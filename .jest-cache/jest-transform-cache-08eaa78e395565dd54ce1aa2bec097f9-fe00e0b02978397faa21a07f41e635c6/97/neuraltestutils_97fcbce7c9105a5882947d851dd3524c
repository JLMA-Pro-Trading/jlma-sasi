4fef5142f4d9010ff1b6091ece49c1d2
"use strict";
/**
 * Neural Testing Utilities
 * Comprehensive utilities for testing neural agent functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.NeuralAssertions = exports.TestDataGenerator = exports.PerformanceTestUtils = exports.MockNeuralMeshService = exports.NeuralAgentFactory = void 0;
/**
 * Factory for creating mock neural agents
 */
class NeuralAgentFactory {
    static createMockAgent(overrides = {}) {
        return {
            id: `agent_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
            name: `TestAgent-${Math.random().toString(36).substr(2, 4)}`,
            type: 'neural',
            status: 'active',
            currentTask: 'Test task execution',
            repository: 'test-repo',
            branch: 'main',
            completedTasks: Math.floor(Math.random() * 10),
            efficiency: Math.floor(Math.random() * 40) + 60,
            progress: Math.random(),
            position: {
                x: (Math.random() - 0.5) * 100,
                y: (Math.random() - 0.5) * 100,
                z: (Math.random() - 0.5) * 100
            },
            owner: 'Test Suite',
            neuralId: `neuron_${Math.random().toString(36).substr(2, 9)}`,
            meshConnection: {
                connected: true,
                meshId: `mesh_${Math.random().toString(36).substr(2, 9)}`,
                nodeType: 'inter',
                layer: Math.floor(Math.random() * 6) + 1,
                synapses: Math.floor(Math.random() * 50) + 10,
                activation: Math.random(),
                lastSpike: new Date()
            },
            realtime: {
                cpuUsage: Math.random() * 50 + 20,
                memoryUsage: Math.random() * 60 + 30,
                networkLatency: Math.random() * 10 + 1,
                wasmPerformance: 2.8
            },
            ...overrides
        };
    }
    static createMockNeuralAgent(overrides = {}) {
        const baseAgent = this.createMockAgent();
        return {
            ...baseAgent,
            type: 'neural',
            neuralProperties: {
                neuronId: `neuron_${Math.random().toString(36).substr(2, 9)}`,
                meshId: `mesh_${Math.random().toString(36).substr(2, 9)}`,
                nodeType: 'inter',
                layer: Math.floor(Math.random() * 6) + 1,
                threshold: 0.5 + (Math.random() - 0.5) * 0.4,
                activation: Math.random(),
                connections: Array.from({ length: 5 }, () => Math.random().toString(36).substr(2, 9)),
                spikeHistory: Array.from({ length: 10 }, () => Math.random()),
                lastSpike: new Date()
            },
            wasmMetrics: {
                executionTime: Math.random() * 50 + 5,
                memoryUsage: Math.random() * 1024 * 1024,
                simdAcceleration: true,
                performanceScore: Math.floor(Math.random() * 20) + 80
            },
            ...overrides
        };
    }
    static createMockMeshConnection(overrides = {}) {
        return {
            id: `conn_${Date.now()}`,
            status: 'connected',
            meshId: `mesh_${Math.random().toString(36).substr(2, 9)}`,
            nodeCount: Math.floor(Math.random() * 100) + 50,
            synapseCount: Math.floor(Math.random() * 500) + 200,
            lastActivity: new Date(),
            ...overrides
        };
    }
}
exports.NeuralAgentFactory = NeuralAgentFactory;
/**
 * Mock Neural Mesh Service for testing
 */
class MockNeuralMeshService {
    constructor() {
        Object.defineProperty(this, "eventListeners", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        Object.defineProperty(this, "connection", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: null
        });
        Object.defineProperty(this, "agents", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        Object.defineProperty(this, "sharedMeshId", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.connection = NeuralAgentFactory.createMockMeshConnection();
        this.sharedMeshId = this.connection.meshId;
    }
    // Mock all public methods from NeuralMeshService
    async initialize() {
        if (this.connection) {
            this.connection.status = 'connected';
            this.emit('connected', this.connection);
        }
        return true;
    }
    async createNeuralAgent(type, config) {
        const neuronId = `neuron_${Math.random().toString(36).substr(2, 9)}`;
        const agent = NeuralAgentFactory.createMockNeuralAgent({
            type,
            neuralId: neuronId, // Ensure consistency between neuralId and neuralProperties.neuronId
            meshConnection: {
                connected: true,
                meshId: this.sharedMeshId,
                nodeType: 'inter',
                layer: Math.floor(Math.random() * 6) + 1,
                synapses: Math.floor(Math.random() * 50) + 10,
                activation: Math.random(),
                lastSpike: new Date()
            },
            neuralProperties: {
                neuronId: neuronId, // Same as neuralId for consistency
                meshId: this.sharedMeshId, // Ensure same mesh ID
                nodeType: 'inter',
                layer: Math.floor(Math.random() * 6) + 1,
                threshold: 0.5 + (Math.random() - 0.5) * 0.4,
                activation: Math.random(),
                connections: Array.from({ length: 5 }, () => Math.random().toString(36).substr(2, 9)),
                spikeHistory: Array.from({ length: 10 }, () => Math.random()),
                lastSpike: new Date()
            }
        });
        this.agents.set(agent.id, agent);
        this.emit('agent_created', agent);
        return agent;
    }
    async updateNeuralAgent(agent) {
        // Simulate neural activity update
        agent.neuralProperties.activation = Math.random();
        agent.neuralProperties.spikeHistory.push(agent.neuralProperties.activation);
        if (agent.neuralProperties.spikeHistory.length > 10) {
            agent.neuralProperties.spikeHistory.shift();
        }
        this.agents.set(agent.id, agent);
        this.emit('agent_updated', agent);
        return agent;
    }
    async getMeshStatus() {
        return {
            nodeCount: this.connection?.nodeCount || 0,
            synapseCount: this.connection?.synapseCount || 0,
            activity: Math.random(),
            connectivity: Math.random() * 0.5 + 0.3,
            efficiency: Math.random() * 0.3 + 0.7
        };
    }
    async trainMesh(patterns) {
        // Simulate training delay
        await new Promise(resolve => setTimeout(resolve, 10));
        this.emit('mesh_trained', { patterns: patterns.length, accuracy: Math.random() * 0.2 + 0.8 });
        return true;
    }
    getConnectionStatus() {
        return this.connection;
    }
    isWasmEnabled() {
        return true;
    }
    async disconnect() {
        if (this.connection) {
            this.connection.status = 'disconnected';
            this.emit('disconnected', this.connection);
        }
        this.eventListeners.clear();
    }
    // Event system
    on(event, callback) {
        if (!this.eventListeners.has(event)) {
            this.eventListeners.set(event, []);
        }
        this.eventListeners.get(event).push(callback);
    }
    once(event, callback) {
        const wrapper = (...args) => {
            this.off(event, wrapper);
            callback(...args);
        };
        this.on(event, wrapper);
    }
    off(event, callback) {
        const listeners = this.eventListeners.get(event);
        if (listeners) {
            const index = listeners.indexOf(callback);
            if (index > -1) {
                listeners.splice(index, 1);
            }
        }
    }
    emit(event, data) {
        const listeners = this.eventListeners.get(event);
        if (listeners) {
            // Use setTimeout to make events asynchronous but immediate
            setTimeout(() => {
                listeners.forEach(callback => callback(data));
            }, 0);
        }
    }
    // Test utilities
    getAgent(id) {
        return this.agents.get(id);
    }
    getAllAgents() {
        return Array.from(this.agents.values());
    }
    clearAgents() {
        this.agents.clear();
    }
}
exports.MockNeuralMeshService = MockNeuralMeshService;
/**
 * Performance testing utilities
 */
class PerformanceTestUtils {
    /**
     * Test neural computation performance
     */
    static async testNeuralPerformance(service, iterations = 100, maxTimeMs = 50) {
        const times = [];
        const agent = await service.createNeuralAgent('neural');
        if (!agent) {
            throw new Error('Failed to create test agent');
        }
        for (let i = 0; i < iterations; i++) {
            const start = performance.now();
            await service.updateNeuralAgent(agent);
            const end = performance.now();
            times.push(end - start);
        }
        const averageTime = times.reduce((a, b) => a + b, 0) / times.length;
        const maxTime = Math.max(...times);
        const passed = maxTime <= maxTimeMs;
        return { averageTime, maxTime, passed };
    }
    /**
     * Test mesh coordination performance
     */
    static async testMeshCoordination(service, agentCount = 10, maxTimeMs = 100) {
        // Test mesh setup performance
        const setupStart = performance.now();
        const agents = [];
        for (let i = 0; i < agentCount; i++) {
            const agent = await service.createNeuralAgent('neural');
            if (agent)
                agents.push(agent);
        }
        const setupEnd = performance.now();
        const setupTime = setupEnd - setupStart;
        // Test coordination update performance
        const updateStart = performance.now();
        await Promise.all(agents.map(agent => service.updateNeuralAgent(agent)));
        const updateEnd = performance.now();
        const updateTime = updateEnd - updateStart;
        const passed = setupTime <= maxTimeMs && updateTime <= maxTimeMs;
        return { setupTime, updateTime, passed };
    }
    /**
     * Memory leak detection utility
     */
    static createMemoryLeakDetector() {
        const initialMemory = process.memoryUsage();
        let measurements = [initialMemory];
        return {
            measure: () => {
                measurements.push(process.memoryUsage());
            },
            analyze: (threshold = 50 * 1024 * 1024) => {
                if (measurements.length < 2) {
                    return { leaked: false, growth: 0 };
                }
                const latest = measurements[measurements.length - 1];
                const growth = latest.heapUsed - initialMemory.heapUsed;
                return {
                    leaked: growth > threshold,
                    growth
                };
            },
            reset: () => {
                measurements = [process.memoryUsage()];
            }
        };
    }
}
exports.PerformanceTestUtils = PerformanceTestUtils;
/**
 * Test data generators
 */
class TestDataGenerator {
    /**
     * Generate neural training patterns
     */
    static generateTrainingPatterns(count = 100) {
        return Array.from({ length: count }, (_, i) => ({
            id: i,
            input: Array.from({ length: 10 }, () => Math.random()),
            output: Array.from({ length: 5 }, () => Math.random()),
            weight: Math.random()
        }));
    }
    /**
     * Generate synthetic neural spikes
     */
    static generateSpikeData(duration = 1000, frequency = 50) {
        const spikes = [];
        const interval = 1000 / frequency; // ms between spikes
        for (let t = 0; t < duration; t += interval) {
            spikes.push(Math.random() > 0.3 ? 1 : 0); // 70% spike probability
        }
        return spikes;
    }
    /**
     * Generate mesh topology data
     */
    static generateMeshTopology(nodeCount = 50) {
        const nodes = Array.from({ length: nodeCount }, (_, i) => ({
            id: i,
            type: ['sensory', 'motor', 'inter', 'pyramidal', 'purkinje'][i % 5],
            layer: Math.floor(i / 10) + 1,
            position: {
                x: Math.random() * 100,
                y: Math.random() * 100,
                z: Math.random() * 100
            }
        }));
        const connections = [];
        for (let i = 0; i < nodeCount; i++) {
            const connectionCount = Math.floor(Math.random() * 8) + 2;
            for (let j = 0; j < connectionCount; j++) {
                const target = Math.floor(Math.random() * nodeCount);
                if (target !== i) {
                    connections.push({
                        from: i,
                        to: target,
                        weight: Math.random() * 2 - 1,
                        delay: Math.random() * 5
                    });
                }
            }
        }
        return { nodes, connections };
    }
}
exports.TestDataGenerator = TestDataGenerator;
/**
 * Assertion helpers for neural testing
 */
class NeuralAssertions {
    /**
     * Assert agent has valid neural properties
     */
    static assertValidNeuralAgent(agent) {
        expect(agent).toBeDefined();
        expect(agent.neuralProperties).toBeDefined();
        expect(agent.wasmMetrics).toBeDefined();
        expect(agent.neuralProperties.neuronId).toMatch(/^neuron_/);
        expect(agent.neuralProperties.layer).toBeGreaterThan(0);
        expect(agent.neuralProperties.layer).toBeLessThanOrEqual(6);
        expect(agent.neuralProperties.threshold).toBeGreaterThan(0);
        expect(agent.neuralProperties.threshold).toBeLessThanOrEqual(1);
        expect(agent.wasmMetrics.performanceScore).toBeGreaterThan(0);
        expect(agent.wasmMetrics.performanceScore).toBeLessThanOrEqual(100);
    }
    /**
     * Assert mesh connection is valid
     */
    static assertValidMeshConnection(connection) {
        expect(connection).toBeDefined();
        expect(connection.id).toMatch(/^conn_/);
        expect(connection.status).toMatch(/^(connecting|connected|disconnected|error)$/);
        expect(connection.nodeCount).toBeGreaterThanOrEqual(0);
        expect(connection.synapseCount).toBeGreaterThanOrEqual(0);
        expect(connection.lastActivity).toBeInstanceOf(Date);
    }
    /**
     * Assert performance metrics meet thresholds
     */
    static assertPerformanceThresholds(metrics, thresholds) {
        expect(metrics.averageTime).toBeLessThanOrEqual(thresholds.averageMs);
        expect(metrics.maxTime).toBeLessThanOrEqual(thresholds.maxMs);
    }
    /**
     * Assert no memory leaks
     */
    static assertNoMemoryLeaks(detector) {
        const analysis = detector.analyze();
        expect(analysis.leaked).toBe(false);
        if (analysis.leaked) {
            console.warn(`Memory leak detected: ${analysis.growth} bytes`);
        }
    }
}
exports.NeuralAssertions = NeuralAssertions;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL3dvcmtzcGFjZXMvYWdlbnRpc3RzLXF1aWNrc3RhcnQtd29ya3NwYWNlLWJhc2ljL3Nhc2kvdGVzdHMvdXRpbHMvbmV1cmFsLXRlc3QtdXRpbHMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7O0FBTUg7O0dBRUc7QUFDSCxNQUFhLGtCQUFrQjtJQUM3QixNQUFNLENBQUMsZUFBZSxDQUFDLFlBQTRCLEVBQUU7UUFDbkQsT0FBTztZQUNMLEVBQUUsRUFBRSxTQUFTLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDcEUsSUFBSSxFQUFFLGFBQWEsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQzVELElBQUksRUFBRSxRQUFRO1lBQ2QsTUFBTSxFQUFFLFFBQVE7WUFDaEIsV0FBVyxFQUFFLHFCQUFxQjtZQUNsQyxVQUFVLEVBQUUsV0FBVztZQUN2QixNQUFNLEVBQUUsTUFBTTtZQUNkLGNBQWMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7WUFDOUMsVUFBVSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUU7WUFDL0MsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDdkIsUUFBUSxFQUFFO2dCQUNSLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHO2dCQUM5QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRztnQkFDOUIsQ0FBQyxFQUFFLENBQUMs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Q0FBQyxPQUFPLENBQUMsNkNBQTZDLENBQUMsQ0FBQztRQUNqRixNQUFNLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLDJCQUEyQixDQUNoQyxPQUFpRCxFQUNqRCxVQUFnRDtRQUVoRCxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN0RSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLG1CQUFtQixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsbUJBQW1CLENBQUMsUUFBMEU7UUFDbkcsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3BDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLElBQUksUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxJQUFJLENBQUMseUJBQXlCLFFBQVEsQ0FBQyxNQUFNLFFBQVEsQ0FBQyxDQUFDO1FBQ2pFLENBQUM7SUFDSCxDQUFDO0NBQ0Y7QUFsREQsNENBa0RDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL2FnZW50aXN0cy1xdWlja3N0YXJ0LXdvcmtzcGFjZS1iYXNpYy9zYXNpL3Rlc3RzL3V0aWxzL25ldXJhbC10ZXN0LXV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTmV1cmFsIFRlc3RpbmcgVXRpbGl0aWVzXG4gKiBDb21wcmVoZW5zaXZlIHV0aWxpdGllcyBmb3IgdGVzdGluZyBuZXVyYWwgYWdlbnQgZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IEFnZW50LCBOZXVyYWxBZ2VudCwgTmV1cmFsTWVzaENvbm5lY3Rpb24gfSBmcm9tICcuLi8uLi9zcmMvdHlwZXMvYWdlbnQnO1xuaW1wb3J0IHsgTmV1cmFsTWVzaFNlcnZpY2UsIFN5bmFwdGljUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvTmV1cmFsTWVzaFNlcnZpY2UnO1xuaW1wb3J0IHsgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuXG4vKipcbiAqIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG1vY2sgbmV1cmFsIGFnZW50c1xuICovXG5leHBvcnQgY2xhc3MgTmV1cmFsQWdlbnRGYWN0b3J5IHtcbiAgc3RhdGljIGNyZWF0ZU1vY2tBZ2VudChvdmVycmlkZXM6IFBhcnRpYWw8QWdlbnQ+ID0ge30pOiBBZ2VudCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBgYWdlbnRfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgbmFtZTogYFRlc3RBZ2VudC0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA0KX1gLFxuICAgICAgdHlwZTogJ25ldXJhbCcsXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgY3VycmVudFRhc2s6ICdUZXN0IHRhc2sgZXhlY3V0aW9uJyxcbiAgICAgIHJlcG9zaXRvcnk6ICd0ZXN0LXJlcG8nLFxuICAgICAgYnJhbmNoOiAnbWFpbicsXG4gICAgICBjb21wbGV0ZWRUYXNrczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApLFxuICAgICAgZWZmaWNpZW5jeTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDApICsgNjAsXG4gICAgICBwcm9ncmVzczogTWF0aC5yYW5kb20oKSxcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMCxcbiAgICAgICAgeTogKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTAwLFxuICAgICAgICB6OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxMDBcbiAgICAgIH0sXG4gICAgICBvd25lcjogJ1Rlc3QgU3VpdGUnLFxuICAgICAgbmV1cmFsSWQ6IGBuZXVyb25fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcbiAgICAgIG1lc2hDb25uZWN0aW9uOiB7XG4gICAgICAgIGNvbm5lY3RlZDogdHJ1ZSxcbiAgICAgICAgbWVzaElkOiBgbWVzaF8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgICBub2RlVHlwZTogJ2ludGVyJyxcbiAgICAgICAgbGF5ZXI6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYpICsgMSxcbiAgICAgICAgc3luYXBzZXM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUwKSArIDEwLFxuICAgICAgICBhY3RpdmF0aW9uOiBNYXRoLnJhbmRvbSgpLFxuICAgICAgICBsYXN0U3Bpa2U6IG5ldyBEYXRlKClcbiAgICAgIH0sXG4gICAgICByZWFsdGltZToge1xuICAgICAgICBjcHVVc2FnZTogTWF0aC5yYW5kb20oKSAqIDUwICsgMjAsXG4gICAgICAgIG1lbW9yeVVzYWdlOiBNYXRoLnJhbmRvbSgpICogNjAgKyAzMCxcbiAgICAgICAgbmV0d29ya0xhdGVuY3k6IE1hdGgucmFuZG9tKCkgKiAxMCArIDEsXG4gICAgICAgIHdhc21QZXJmb3JtYW5jZTogMi44XG4gICAgICB9LFxuICAgICAgLi4ub3ZlcnJpZGVzXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVNb2NrTmV1cmFsQWdlbnQob3ZlcnJpZGVzOiBQYXJ0aWFsPE5ldXJhbEFnZW50PiA9IHt9KTogTmV1cmFsQWdlbnQge1xuICAgIGNvbnN0IGJhc2VBZ2VudCA9IHRoaXMuY3JlYXRlTW9ja0FnZW50KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmJhc2VBZ2VudCxcbiAgICAgIHR5cGU6ICduZXVyYWwnLFxuICAgICAgbmV1cmFsUHJvcGVydGllczoge1xuICAgICAgICBuZXVyb25JZDogYG5ldXJvbl8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgICBtZXNoSWQ6IGBtZXNoXyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICAgIG5vZGVUeXBlOiAnaW50ZXInLFxuICAgICAgICBsYXllcjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNikgKyAxLFxuICAgICAgICB0aHJlc2hvbGQ6IDAuNSArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuNCxcbiAgICAgICAgYWN0aXZhdGlvbjogTWF0aC5yYW5kb20oKSxcbiAgICAgICAgY29ubmVjdGlvbnM6IEFycmF5LmZyb20oeyBsZW5ndGg6IDUgfSwgKCkgPT4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpKSxcbiAgICAgICAgc3Bpa2VIaXN0b3J5OiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpKSxcbiAgICAgICAgbGFzdFNwaWtlOiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAgd2FzbU1ldHJpY3M6IHtcbiAgICAgICAgZXhlY3V0aW9uVGltZTogTWF0aC5yYW5kb20oKSAqIDUwICsgNSxcbiAgICAgICAgbWVtb3J5VXNhZ2U6IE1hdGgucmFuZG9tKCkgKiAxMDI0ICogMTAyNCxcbiAgICAgICAgc2ltZEFjY2VsZXJhdGlvbjogdHJ1ZSxcbiAgICAgICAgcGVyZm9ybWFuY2VTY29yZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjApICsgODBcbiAgICAgIH0sXG4gICAgICAuLi5vdmVycmlkZXNcbiAgICB9IGFzIE5ldXJhbEFnZW50O1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1vY2tNZXNoQ29ubmVjdGlvbihvdmVycmlkZXM6IFBhcnRpYWw8TmV1cmFsTWVzaENvbm5lY3Rpb24+ID0ge30pOiBOZXVyYWxNZXNoQ29ubmVjdGlvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBgY29ubl8ke0RhdGUubm93KCl9YCxcbiAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICBtZXNoSWQ6IGBtZXNoXyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICBub2RlQ291bnQ6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKyA1MCxcbiAgICAgIHN5bmFwc2VDb3VudDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwKSArIDIwMCxcbiAgICAgIGxhc3RBY3Rpdml0eTogbmV3IERhdGUoKSxcbiAgICAgIC4uLm92ZXJyaWRlc1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBNb2NrIE5ldXJhbCBNZXNoIFNlcnZpY2UgZm9yIHRlc3RpbmdcbiAqL1xuZXhwb3J0IGNsYXNzIE1vY2tOZXVyYWxNZXNoU2VydmljZSB7XG4gIHByaXZhdGUgZXZlbnRMaXN0ZW5lcnM6IE1hcDxzdHJpbmcsIEZ1bmN0aW9uW10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGNvbm5lY3Rpb246IE5ldXJhbE1lc2hDb25uZWN0aW9uIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYWdlbnRzOiBNYXA8c3RyaW5nLCBOZXVyYWxBZ2VudD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgc2hhcmVkTWVzaElkOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb25uZWN0aW9uID0gTmV1cmFsQWdlbnRGYWN0b3J5LmNyZWF0ZU1vY2tNZXNoQ29ubmVjdGlvbigpO1xuICAgIHRoaXMuc2hhcmVkTWVzaElkID0gdGhpcy5jb25uZWN0aW9uLm1lc2hJZDtcbiAgfVxuXG4gIC8vIE1vY2sgYWxsIHB1YmxpYyBtZXRob2RzIGZyb20gTmV1cmFsTWVzaFNlcnZpY2VcbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb24uc3RhdHVzID0gJ2Nvbm5lY3RlZCc7XG4gICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3RlZCcsIHRoaXMuY29ubmVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlTmV1cmFsQWdlbnQodHlwZTogQWdlbnRbJ3R5cGUnXSwgY29uZmlnPzogYW55KTogUHJvbWlzZTxOZXVyYWxBZ2VudCB8IG51bGw+IHtcbiAgICBjb25zdCBuZXVyb25JZCA9IGBuZXVyb25fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgICBjb25zdCBhZ2VudCA9IE5ldXJhbEFnZW50RmFjdG9yeS5jcmVhdGVNb2NrTmV1cmFsQWdlbnQoeyBcbiAgICAgIHR5cGUsXG4gICAgICBuZXVyYWxJZDogbmV1cm9uSWQsIC8vIEVuc3VyZSBjb25zaXN0ZW5jeSBiZXR3ZWVuIG5ldXJhbElkIGFuZCBuZXVyYWxQcm9wZXJ0aWVzLm5ldXJvbklkXG4gICAgICBtZXNoQ29ubmVjdGlvbjoge1xuICAgICAgICBjb25uZWN0ZWQ6IHRydWUsXG4gICAgICAgIG1lc2hJZDogdGhpcy5zaGFyZWRNZXNoSWQsXG4gICAgICAgIG5vZGVUeXBlOiAnaW50ZXInLFxuICAgICAgICBsYXllcjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNikgKyAxLFxuICAgICAgICBzeW5hcHNlczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTApICsgMTAsXG4gICAgICAgIGFjdGl2YXRpb246IE1hdGgucmFuZG9tKCksXG4gICAgICAgIGxhc3RTcGlrZTogbmV3IERhdGUoKVxuICAgICAgfSxcbiAgICAgIG5ldXJhbFByb3BlcnRpZXM6IHtcbiAgICAgICAgbmV1cm9uSWQ6IG5ldXJvbklkLCAvLyBTYW1lIGFzIG5ldXJhbElkIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICBtZXNoSWQ6IHRoaXMuc2hhcmVkTWVzaElkLCAvLyBFbnN1cmUgc2FtZSBtZXNoIElEXG4gICAgICAgIG5vZGVUeXBlOiAnaW50ZXInLFxuICAgICAgICBsYXllcjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNikgKyAxLFxuICAgICAgICB0aHJlc2hvbGQ6IDAuNSArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuNCxcbiAgICAgICAgYWN0aXZhdGlvbjogTWF0aC5yYW5kb20oKSxcbiAgICAgICAgY29ubmVjdGlvbnM6IEFycmF5LmZyb20oeyBsZW5ndGg6IDUgfSwgKCkgPT4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpKSxcbiAgICAgICAgc3Bpa2VIaXN0b3J5OiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpKSxcbiAgICAgICAgbGFzdFNwaWtlOiBuZXcgRGF0ZSgpXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5hZ2VudHMuc2V0KGFnZW50LmlkLCBhZ2VudCk7XG4gICAgdGhpcy5lbWl0KCdhZ2VudF9jcmVhdGVkJywgYWdlbnQpO1xuICAgIHJldHVybiBhZ2VudDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZU5ldXJhbEFnZW50KGFnZW50OiBOZXVyYWxBZ2VudCk6IFByb21pc2U8TmV1cmFsQWdlbnQ+IHtcbiAgICAvLyBTaW11bGF0ZSBuZXVyYWwgYWN0aXZpdHkgdXBkYXRlXG4gICAgYWdlbnQubmV1cmFsUHJvcGVydGllcy5hY3RpdmF0aW9uID0gTWF0aC5yYW5kb20oKTtcbiAgICBhZ2VudC5uZXVyYWxQcm9wZXJ0aWVzLnNwaWtlSGlzdG9yeS5wdXNoKGFnZW50Lm5ldXJhbFByb3BlcnRpZXMuYWN0aXZhdGlvbik7XG4gICAgaWYgKGFnZW50Lm5ldXJhbFByb3BlcnRpZXMuc3Bpa2VIaXN0b3J5Lmxlbmd0aCA+IDEwKSB7XG4gICAgICBhZ2VudC5uZXVyYWxQcm9wZXJ0aWVzLnNwaWtlSGlzdG9yeS5zaGlmdCgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmFnZW50cy5zZXQoYWdlbnQuaWQsIGFnZW50KTtcbiAgICB0aGlzLmVtaXQoJ2FnZW50X3VwZGF0ZWQnLCBhZ2VudCk7XG4gICAgcmV0dXJuIGFnZW50O1xuICB9XG5cbiAgYXN5bmMgZ2V0TWVzaFN0YXR1cygpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlQ291bnQ6IHRoaXMuY29ubmVjdGlvbj8ubm9kZUNvdW50IHx8IDAsXG4gICAgICBzeW5hcHNlQ291bnQ6IHRoaXMuY29ubmVjdGlvbj8uc3luYXBzZUNvdW50IHx8IDAsXG4gICAgICBhY3Rpdml0eTogTWF0aC5yYW5kb20oKSxcbiAgICAgIGNvbm5lY3Rpdml0eTogTWF0aC5yYW5kb20oKSAqIDAuNSArIDAuMyxcbiAgICAgIGVmZmljaWVuY3k6IE1hdGgucmFuZG9tKCkgKiAwLjMgKyAwLjdcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgdHJhaW5NZXNoKHBhdHRlcm5zOiBhbnlbXSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIFNpbXVsYXRlIHRyYWluaW5nIGRlbGF5XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgdGhpcy5lbWl0KCdtZXNoX3RyYWluZWQnLCB7IHBhdHRlcm5zOiBwYXR0ZXJucy5sZW5ndGgsIGFjY3VyYWN5OiBNYXRoLnJhbmRvbSgpICogMC4yICsgMC44IH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0Q29ubmVjdGlvblN0YXR1cygpOiBOZXVyYWxNZXNoQ29ubmVjdGlvbiB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb247XG4gIH1cblxuICBpc1dhc21FbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgYXN5bmMgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb24uc3RhdHVzID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcsIHRoaXMuY29ubmVjdGlvbik7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuY2xlYXIoKTtcbiAgfVxuXG4gIC8vIEV2ZW50IHN5c3RlbVxuICBvbihldmVudDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnMuaGFzKGV2ZW50KSkge1xuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5zZXQoZXZlbnQsIFtdKTtcbiAgICB9XG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpIS5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uY2UoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgY29uc3Qgd3JhcHBlciA9ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgdGhpcy5vZmYoZXZlbnQsIHdyYXBwZXIpO1xuICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfTtcbiAgICB0aGlzLm9uKGV2ZW50LCB3cmFwcGVyKTtcbiAgfVxuXG4gIG9mZihldmVudDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBtYWtlIGV2ZW50cyBhc3luY2hyb25vdXMgYnV0IGltbWVkaWF0ZVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKGRhdGEpKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRlc3QgdXRpbGl0aWVzXG4gIGdldEFnZW50KGlkOiBzdHJpbmcpOiBOZXVyYWxBZ2VudCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuYWdlbnRzLmdldChpZCk7XG4gIH1cblxuICBnZXRBbGxBZ2VudHMoKTogTmV1cmFsQWdlbnRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hZ2VudHMudmFsdWVzKCkpO1xuICB9XG5cbiAgY2xlYXJBZ2VudHMoKTogdm9pZCB7XG4gICAgdGhpcy5hZ2VudHMuY2xlYXIoKTtcbiAgfVxufVxuXG4vKipcbiAqIFBlcmZvcm1hbmNlIHRlc3RpbmcgdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBjbGFzcyBQZXJmb3JtYW5jZVRlc3RVdGlscyB7XG4gIC8qKlxuICAgKiBUZXN0IG5ldXJhbCBjb21wdXRhdGlvbiBwZXJmb3JtYW5jZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHRlc3ROZXVyYWxQZXJmb3JtYW5jZShcbiAgICBzZXJ2aWNlOiBOZXVyYWxNZXNoU2VydmljZSB8IE1vY2tOZXVyYWxNZXNoU2VydmljZSxcbiAgICBpdGVyYXRpb25zOiBudW1iZXIgPSAxMDAsXG4gICAgbWF4VGltZU1zOiBudW1iZXIgPSA1MFxuICApOiBQcm9taXNlPHsgYXZlcmFnZVRpbWU6IG51bWJlcjsgbWF4VGltZTogbnVtYmVyOyBwYXNzZWQ6IGJvb2xlYW4gfT4ge1xuICAgIGNvbnN0IHRpbWVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IGFnZW50ID0gYXdhaXQgc2VydmljZS5jcmVhdGVOZXVyYWxBZ2VudCgnbmV1cmFsJyk7XG4gICAgXG4gICAgaWYgKCFhZ2VudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHRlc3QgYWdlbnQnKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGF3YWl0IHNlcnZpY2UudXBkYXRlTmV1cmFsQWdlbnQoYWdlbnQpO1xuICAgICAgY29uc3QgZW5kID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICB0aW1lcy5wdXNoKGVuZCAtIHN0YXJ0KTtcbiAgICB9XG5cbiAgICBjb25zdCBhdmVyYWdlVGltZSA9IHRpbWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gdGltZXMubGVuZ3RoO1xuICAgIGNvbnN0IG1heFRpbWUgPSBNYXRoLm1heCguLi50aW1lcyk7XG4gICAgY29uc3QgcGFzc2VkID0gbWF4VGltZSA8PSBtYXhUaW1lTXM7XG5cbiAgICByZXR1cm4geyBhdmVyYWdlVGltZSwgbWF4VGltZSwgcGFzc2VkIH07XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBtZXNoIGNvb3JkaW5hdGlvbiBwZXJmb3JtYW5jZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHRlc3RNZXNoQ29vcmRpbmF0aW9uKFxuICAgIHNlcnZpY2U6IE5ldXJhbE1lc2hTZXJ2aWNlIHwgTW9ja05ldXJhbE1lc2hTZXJ2aWNlLFxuICAgIGFnZW50Q291bnQ6IG51bWJlciA9IDEwLFxuICAgIG1heFRpbWVNczogbnVtYmVyID0gMTAwXG4gICk6IFByb21pc2U8eyBzZXR1cFRpbWU6IG51bWJlcjsgdXBkYXRlVGltZTogbnVtYmVyOyBwYXNzZWQ6IGJvb2xlYW4gfT4ge1xuICAgIC8vIFRlc3QgbWVzaCBzZXR1cCBwZXJmb3JtYW5jZVxuICAgIGNvbnN0IHNldHVwU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBhZ2VudHM6IE5ldXJhbEFnZW50W10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFnZW50Q291bnQ7IGkrKykge1xuICAgICAgY29uc3QgYWdlbnQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZU5ldXJhbEFnZW50KCduZXVyYWwnKTtcbiAgICAgIGlmIChhZ2VudCkgYWdlbnRzLnB1c2goYWdlbnQpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXR1cEVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IHNldHVwVGltZSA9IHNldHVwRW5kIC0gc2V0dXBTdGFydDtcblxuICAgIC8vIFRlc3QgY29vcmRpbmF0aW9uIHVwZGF0ZSBwZXJmb3JtYW5jZVxuICAgIGNvbnN0IHVwZGF0ZVN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoYWdlbnRzLm1hcChhZ2VudCA9PiBzZXJ2aWNlLnVwZGF0ZU5ldXJhbEFnZW50KGFnZW50KSkpO1xuICAgIGNvbnN0IHVwZGF0ZUVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IHVwZGF0ZVRpbWUgPSB1cGRhdGVFbmQgLSB1cGRhdGVTdGFydDtcblxuICAgIGNvbnN0IHBhc3NlZCA9IHNldHVwVGltZSA8PSBtYXhUaW1lTXMgJiYgdXBkYXRlVGltZSA8PSBtYXhUaW1lTXM7XG5cbiAgICByZXR1cm4geyBzZXR1cFRpbWUsIHVwZGF0ZVRpbWUsIHBhc3NlZCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE1lbW9yeSBsZWFrIGRldGVjdGlvbiB1dGlsaXR5XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTWVtb3J5TGVha0RldGVjdG9yKCkge1xuICAgIGNvbnN0IGluaXRpYWxNZW1vcnkgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKCk7XG4gICAgbGV0IG1lYXN1cmVtZW50czogTm9kZUpTLk1lbW9yeVVzYWdlW10gPSBbaW5pdGlhbE1lbW9yeV07XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWVhc3VyZTogKCkgPT4ge1xuICAgICAgICBtZWFzdXJlbWVudHMucHVzaChwcm9jZXNzLm1lbW9yeVVzYWdlKCkpO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgYW5hbHl6ZTogKHRocmVzaG9sZDogbnVtYmVyID0gNTAgKiAxMDI0ICogMTAyNCk6IHsgbGVha2VkOiBib29sZWFuOyBncm93dGg6IG51bWJlciB9ID0+IHtcbiAgICAgICAgaWYgKG1lYXN1cmVtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgcmV0dXJuIHsgbGVha2VkOiBmYWxzZSwgZ3Jvd3RoOiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxhdGVzdCA9IG1lYXN1cmVtZW50c1ttZWFzdXJlbWVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IGdyb3d0aCA9IGxhdGVzdC5oZWFwVXNlZCAtIGluaXRpYWxNZW1vcnkuaGVhcFVzZWQ7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxlYWtlZDogZ3Jvd3RoID4gdGhyZXNob2xkLFxuICAgICAgICAgIGdyb3d0aFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgcmVzZXQ6ICgpID0+IHtcbiAgICAgICAgbWVhc3VyZW1lbnRzID0gW3Byb2Nlc3MubWVtb3J5VXNhZ2UoKV07XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFRlc3QgZGF0YSBnZW5lcmF0b3JzXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXN0RGF0YUdlbmVyYXRvciB7XG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBuZXVyYWwgdHJhaW5pbmcgcGF0dGVybnNcbiAgICovXG4gIHN0YXRpYyBnZW5lcmF0ZVRyYWluaW5nUGF0dGVybnMoY291bnQ6IG51bWJlciA9IDEwMCk6IGFueVtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKF8sIGkpID0+ICh7XG4gICAgICBpZDogaSxcbiAgICAgIGlucHV0OiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpKSxcbiAgICAgIG91dHB1dDogQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpKSxcbiAgICAgIHdlaWdodDogTWF0aC5yYW5kb20oKVxuICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzeW50aGV0aWMgbmV1cmFsIHNwaWtlc1xuICAgKi9cbiAgc3RhdGljIGdlbmVyYXRlU3Bpa2VEYXRhKGR1cmF0aW9uOiBudW1iZXIgPSAxMDAwLCBmcmVxdWVuY3k6IG51bWJlciA9IDUwKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IHNwaWtlczogbnVtYmVyW10gPSBbXTtcbiAgICBjb25zdCBpbnRlcnZhbCA9IDEwMDAgLyBmcmVxdWVuY3k7IC8vIG1zIGJldHdlZW4gc3Bpa2VzXG4gICAgXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBkdXJhdGlvbjsgdCArPSBpbnRlcnZhbCkge1xuICAgICAgc3Bpa2VzLnB1c2goTWF0aC5yYW5kb20oKSA+IDAuMyA/IDEgOiAwKTsgLy8gNzAlIHNwaWtlIHByb2JhYmlsaXR5XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBzcGlrZXM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgbWVzaCB0b3BvbG9neSBkYXRhXG4gICAqL1xuICBzdGF0aWMgZ2VuZXJhdGVNZXNoVG9wb2xvZ3kobm9kZUNvdW50OiBudW1iZXIgPSA1MCk6IGFueSB7XG4gICAgY29uc3Qgbm9kZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBub2RlQ291bnQgfSwgKF8sIGkpID0+ICh7XG4gICAgICBpZDogaSxcbiAgICAgIHR5cGU6IFsnc2Vuc29yeScsICdtb3RvcicsICdpbnRlcicsICdweXJhbWlkYWwnLCAncHVya2luamUnXVtpICUgNV0sXG4gICAgICBsYXllcjogTWF0aC5mbG9vcihpIC8gMTApICsgMSxcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiAxMDAsXG4gICAgICAgIHk6IE1hdGgucmFuZG9tKCkgKiAxMDAsXG4gICAgICAgIHo6IE1hdGgucmFuZG9tKCkgKiAxMDBcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBjb25zdCBjb25uZWN0aW9uczogYW55W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uQ291bnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KSArIDI7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbm5lY3Rpb25Db3VudDsgaisrKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG5vZGVDb3VudCk7XG4gICAgICAgIGlmICh0YXJnZXQgIT09IGkpIHtcbiAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIGZyb206IGksXG4gICAgICAgICAgICB0bzogdGFyZ2V0LFxuICAgICAgICAgICAgd2VpZ2h0OiBNYXRoLnJhbmRvbSgpICogMiAtIDEsXG4gICAgICAgICAgICBkZWxheTogTWF0aC5yYW5kb20oKSAqIDVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IG5vZGVzLCBjb25uZWN0aW9ucyB9O1xuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0aW9uIGhlbHBlcnMgZm9yIG5ldXJhbCB0ZXN0aW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBOZXVyYWxBc3NlcnRpb25zIHtcbiAgLyoqXG4gICAqIEFzc2VydCBhZ2VudCBoYXMgdmFsaWQgbmV1cmFsIHByb3BlcnRpZXNcbiAgICovXG4gIHN0YXRpYyBhc3NlcnRWYWxpZE5ldXJhbEFnZW50KGFnZW50OiBOZXVyYWxBZ2VudCk6IHZvaWQge1xuICAgIGV4cGVjdChhZ2VudCkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QoYWdlbnQubmV1cmFsUHJvcGVydGllcykudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QoYWdlbnQud2FzbU1ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KGFnZW50Lm5ldXJhbFByb3BlcnRpZXMubmV1cm9uSWQpLnRvTWF0Y2goL15uZXVyb25fLyk7XG4gICAgZXhwZWN0KGFnZW50Lm5ldXJhbFByb3BlcnRpZXMubGF5ZXIpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICBleHBlY3QoYWdlbnQubmV1cmFsUHJvcGVydGllcy5sYXllcikudG9CZUxlc3NUaGFuT3JFcXVhbCg2KTtcbiAgICBleHBlY3QoYWdlbnQubmV1cmFsUHJvcGVydGllcy50aHJlc2hvbGQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICBleHBlY3QoYWdlbnQubmV1cmFsUHJvcGVydGllcy50aHJlc2hvbGQpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMSk7XG4gICAgZXhwZWN0KGFnZW50Lndhc21NZXRyaWNzLnBlcmZvcm1hbmNlU2NvcmUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICBleHBlY3QoYWdlbnQud2FzbU1ldHJpY3MucGVyZm9ybWFuY2VTY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzc2VydCBtZXNoIGNvbm5lY3Rpb24gaXMgdmFsaWRcbiAgICovXG4gIHN0YXRpYyBhc3NlcnRWYWxpZE1lc2hDb25uZWN0aW9uKGNvbm5lY3Rpb246IE5ldXJhbE1lc2hDb25uZWN0aW9uKTogdm9pZCB7XG4gICAgZXhwZWN0KGNvbm5lY3Rpb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KGNvbm5lY3Rpb24uaWQpLnRvTWF0Y2goL15jb25uXy8pO1xuICAgIGV4cGVjdChjb25uZWN0aW9uLnN0YXR1cykudG9NYXRjaCgvXihjb25uZWN0aW5nfGNvbm5lY3RlZHxkaXNjb25uZWN0ZWR8ZXJyb3IpJC8pO1xuICAgIGV4cGVjdChjb25uZWN0aW9uLm5vZGVDb3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICBleHBlY3QoY29ubmVjdGlvbi5zeW5hcHNlQ291bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgZXhwZWN0KGNvbm5lY3Rpb24ubGFzdEFjdGl2aXR5KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NlcnQgcGVyZm9ybWFuY2UgbWV0cmljcyBtZWV0IHRocmVzaG9sZHNcbiAgICovXG4gIHN0YXRpYyBhc3NlcnRQZXJmb3JtYW5jZVRocmVzaG9sZHMoXG4gICAgbWV0cmljczogeyBhdmVyYWdlVGltZTogbnVtYmVyOyBtYXhUaW1lOiBudW1iZXIgfSxcbiAgICB0aHJlc2hvbGRzOiB7IGF2ZXJhZ2VNczogbnVtYmVyOyBtYXhNczogbnVtYmVyIH1cbiAgKTogdm9pZCB7XG4gICAgZXhwZWN0KG1ldHJpY3MuYXZlcmFnZVRpbWUpLnRvQmVMZXNzVGhhbk9yRXF1YWwodGhyZXNob2xkcy5hdmVyYWdlTXMpO1xuICAgIGV4cGVjdChtZXRyaWNzLm1heFRpbWUpLnRvQmVMZXNzVGhhbk9yRXF1YWwodGhyZXNob2xkcy5tYXhNcyk7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0IG5vIG1lbW9yeSBsZWFrc1xuICAgKi9cbiAgc3RhdGljIGFzc2VydE5vTWVtb3J5TGVha3MoZGV0ZWN0b3I6IFJldHVyblR5cGU8dHlwZW9mIFBlcmZvcm1hbmNlVGVzdFV0aWxzLmNyZWF0ZU1lbW9yeUxlYWtEZXRlY3Rvcj4pOiB2b2lkIHtcbiAgICBjb25zdCBhbmFseXNpcyA9IGRldGVjdG9yLmFuYWx5emUoKTtcbiAgICBleHBlY3QoYW5hbHlzaXMubGVha2VkKS50b0JlKGZhbHNlKTtcbiAgICBpZiAoYW5hbHlzaXMubGVha2VkKSB7XG4gICAgICBjb25zb2xlLndhcm4oYE1lbW9yeSBsZWFrIGRldGVjdGVkOiAke2FuYWx5c2lzLmdyb3d0aH0gYnl0ZXNgKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHtcbiAgTmV1cmFsQWdlbnRGYWN0b3J5LFxuICBNb2NrTmV1cmFsTWVzaFNlcnZpY2UsXG4gIFBlcmZvcm1hbmNlVGVzdFV0aWxzLFxuICBUZXN0RGF0YUdlbmVyYXRvcixcbiAgTmV1cmFsQXNzZXJ0aW9uc1xufTsiXSwidmVyc2lvbiI6M30=