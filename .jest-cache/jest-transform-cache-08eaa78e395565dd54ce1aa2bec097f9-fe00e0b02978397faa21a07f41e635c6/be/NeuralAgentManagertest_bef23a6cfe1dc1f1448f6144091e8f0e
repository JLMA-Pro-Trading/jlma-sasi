13243d4f6cf488f7a8aba385fcfa0ac6
"use strict";
/**
 * Comprehensive Unit Tests for NeuralAgentManager
 * Target: 95%+ coverage for neural agent lifecycle and operations
 */
Object.defineProperty(exports, "__esModule", { value: true });
const events_1 = require("events");
const NeuralAgentManager_1 = require("../../../src/services/NeuralAgentManager");
const neural_1 = require("../../../src/types/neural");
// Mock performance for testing
const mockPerformance = {
    now: jest.fn(() => Date.now()),
};
global.performance = mockPerformance;
// Mock WebAssembly for testing
global.WebAssembly = {
    compile: jest.fn(),
    instantiate: jest.fn(),
    validate: jest.fn(() => true),
};
describe('NeuralAgentManager - Comprehensive Unit Tests', () => {
    let manager;
    let mockConfig;
    beforeEach(() => {
        jest.clearAllMocks();
        mockPerformance.now.mockReturnValue(1000);
        mockConfig = {
            maxAgents: 5,
            memoryLimitPerAgent: 10 * 1024 * 1024, // 10MB for testing
            inferenceTimeout: 50,
            simdEnabled: true,
            crossLearningEnabled: true,
            persistenceEnabled: false, // Disable for unit tests
            performanceMonitoring: true,
            wasmModulePath: '/test/neural.wasm'
        };
        manager = new NeuralAgentManager_1.NeuralAgentManager(mockConfig);
    });
    afterEach(async () => {
        if (manager) {
            await manager.cleanup();
        }
    });
    describe('Initialization', () => {
        test('should initialize with default configuration', () => {
            const defaultManager = new NeuralAgentManager_1.NeuralAgentManager();
            expect(defaultManager).toBeInstanceOf(events_1.EventEmitter);
        });
        test('should initialize with custom configuration', () => {
            const customConfig = {
                maxAgents: 10,
                memoryLimitPerAgent: 100 * 1024 * 1024,
                inferenceTimeout: 200
            };
            const customManager = new NeuralAgentManager_1.NeuralAgentManager(customConfig);
            expect(customManager).toBeInstanceOf(events_1.EventEmitter);
        });
        test('should emit initialized event after successful initialization', (done) => {
            const testManager = new NeuralAgentManager_1.NeuralAgentManager(mockConfig);
            testManager.on('initialized', (event) => {
                expect(event.config).toBeDefined();
                expect(event.timestamp).toBeDefined();
                done();
            });
        });
        test('should handle initialization errors gracefully', (done) => {
            const errorConfig = {
                ...mockConfig,
                wasmModulePath: '/invalid/path.wasm'
            };
            const errorManager = new NeuralAgentManager_1.NeuralAgentManager(errorConfig);
            errorManager.on('error', (error) => {
                expect(error).toBeDefined();
                done();
            });
        });
    });
    describe('Agent Spawning', () => {
        beforeEach(async () => {
            // Wait for initialization
            await new Promise(resolve => setTimeout(resolve, 100));
        });
        test('should spawn agent with valid configuration', async () => {
            const agentConfig = {
                type: 'mlp',
                architecture: [10, 5, 1],
                learningRate: 0.001
            };
            mockPerformance.now.mockReturnValueOnce(1000).mockReturnValueOnce(1075);
            const agentId = await manager.spawnAgent(agentConfig);
            expect(agentId).toBeDefined();
            expect(typeof agentId).toBe('string');
            expect(agentId).toMatch(/^agent_\d+_[a-z0-9]+$/);
        });
        test('should emit agentSpawned event', (done) => {
            const agentConfig = {
                type: 'mlp',
                architecture: [10, 5, 1]
            };
            manager.on('agentSpawned', (event) => {
                expect(event.agentId).toBeDefined();
                expect(event.spawnTime).toBeDefined();
                expect(event.config).toEqual(agentConfig);
                expect(event.memoryUsage).toBeDefined();
                done();
            });
            manager.spawnAgent(agentConfig);
        });
        test('should reject spawning when max agents reached', async () => {
            const agentConfig = { type: 'mlp', architecture: [5, 1] };
            // Spawn max agents
            for (let i = 0; i < mockConfig.maxAgents; i++) {
                await manager.spawnAgent(agentConfig);
            }
            // Try to spawn one more
            await expect(manager.spawnAgent(agentConfig))
                .rejects.toThrow('Maximum agents limit reached: 5');
        });
        test('should reject spawning when not initialized', async () => {
            const uninitializedManager = new NeuralAgentManager_1.NeuralAgentManager(mockConfig);
            const agentConfig = { type: 'mlp', architecture: [5, 1] };
            await expect(uninitializedManager.spawnAgent(agentConfig))
                .rejects.toThrow('Neural Agent Manager not initialized');
        });
        test('should track performance metrics during spawning', async () => {
            mockPerformance.now.mockReturnValueOnce(1000).mockReturnValueOnce(1080);
            const agentConfig = { type: 'mlp', architecture: [10, 5, 1] };
            await manager.spawnAgent(agentConfig);
            const metrics = manager.getPerformanceMetrics();
            expect(metrics.totalAgentsSpawned).toBe(1);
            expect(metrics.averageSpawnTime).toBeGreaterThan(0);
        });
    });
    describe('Neural Inference', () => {
        let agentId;
        beforeEach(async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [3, 2, 1] };
            agentId = await manager.spawnAgent(agentConfig);
        });
        test('should run inference successfully', async () => {
            const inputs = [0.1, 0.5, 0.9];
            mockPerformance.now.mockReturnValueOnce(2000).mockReturnValueOnce(2030);
            const outputs = await manager.runInference(agentId, inputs);
            expect(outputs).toBeDefined();
            expect(Array.isArray(outputs)).toBe(true);
            expect(outputs.length).toBeGreaterThan(0);
        });
        test('should emit inferenceComplete event', (done) => {
            const inputs = [0.1, 0.5, 0.9];
            manager.on('inferenceComplete', (event) => {
                expect(event.agentId).toBe(agentId);
                expect(event.inferenceTime).toBeDefined();
                expect(event.inputSize).toBe(inputs.length);
                expect(event.outputSize).toBeGreaterThan(0);
                done();
            });
            manager.runInference(agentId, inputs);
        });
        test('should reject inference for non-existent agent', async () => {
            const inputs = [0.1, 0.5, 0.9];
            await expect(manager.runInference('invalid-agent-id', inputs))
                .rejects.toThrow('Agent not found: invalid-agent-id');
        });
        test('should handle inference timeout', async () => {
            const inputs = [0.1, 0.5, 0.9];
            // Mock a slow inference that exceeds timeout
            const slowManager = new NeuralAgentManager_1.NeuralAgentManager({
                ...mockConfig,
                inferenceTimeout: 1 // 1ms timeout
            });
            await new Promise(resolve => setTimeout(resolve, 100));
            const slowAgentId = await slowManager.spawnAgent({ type: 'mlp', architecture: [3, 1] });
            await expect(slowManager.runInference(slowAgentId, inputs))
                .rejects.toThrow('Inference timeout');
        });
        test('should update agent statistics after inference', async () => {
            const inputs = [0.1, 0.5, 0.9];
            await manager.runInference(agentId, inputs);
            const agent = manager.getAgentState(agentId);
            expect(agent).toBeDefined();
            expect(agent.totalInferences).toBe(1);
            expect(agent.averageInferenceTime).toBeGreaterThan(0);
            expect(agent.lastActive).toBeGreaterThan(0);
        });
    });
    describe('Agent Training', () => {
        let agentId;
        beforeEach(async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [2, 3, 1] };
            agentId = await manager.spawnAgent(agentConfig);
        });
        test('should train agent successfully', async () => {
            const trainingData = [
                { inputs: [0, 0], outputs: [0] },
                { inputs: [0, 1], outputs: [1] },
                { inputs: [1, 0], outputs: [1] },
                { inputs: [1, 1], outputs: [0] }
            ];
            mockPerformance.now.mockReturnValueOnce(3000).mockReturnValueOnce(3500);
            const session = await manager.trainAgent(agentId, trainingData, 10);
            expect(session).toBeDefined();
            expect(session.sessionId).toBeDefined();
            expect(session.agentId).toBe(agentId);
            expect(session.epochs).toBe(10);
            expect(session.finalAccuracy).toBeGreaterThan(0);
            expect(session.dataPoints).toBe(4);
        });
        test('should emit learningComplete event', (done) => {
            const trainingData = [
                { inputs: [0.1, 0.2], outputs: [0.3] }
            ];
            manager.on('learningComplete', (session) => {
                expect(session.sessionId).toBeDefined();
                expect(session.agentId).toBe(agentId);
                expect(session.finalAccuracy).toBeGreaterThan(0);
                done();
            });
            manager.trainAgent(agentId, trainingData, 5);
        });
        test('should update agent state during training', async () => {
            const trainingData = [{ inputs: [0.1], outputs: [0.2] }];
            // Check state changes during training
            const trainingPromise = manager.trainAgent(agentId, trainingData, 5);
            // Give training a moment to start
            await new Promise(resolve => setTimeout(resolve, 10));
            const agentDuringTraining = manager.getAgentState(agentId);
            expect(agentDuringTraining.state).toBe(neural_1.AgentState.LEARNING);
            await trainingPromise;
            const agentAfterTraining = manager.getAgentState(agentId);
            expect(agentAfterTraining.state).toBe(neural_1.AgentState.ACTIVE);
            expect(agentAfterTraining.learningProgress).toBeGreaterThan(0);
        });
        test('should handle training errors gracefully', async () => {
            const invalidTrainingData = null;
            await expect(manager.trainAgent(agentId, invalidTrainingData, 10))
                .rejects.toThrow();
            // Agent should return to active state after error
            const agent = manager.getAgentState(agentId);
            expect(agent.state).toBe(neural_1.AgentState.ACTIVE);
        });
    });
    describe('Knowledge Sharing', () => {
        let sourceAgentId;
        let targetAgentId;
        beforeEach(async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [3, 2, 1] };
            sourceAgentId = await manager.spawnAgent(agentConfig);
            targetAgentId = await manager.spawnAgent(agentConfig);
        });
        test('should share knowledge between agents', async () => {
            await expect(manager.shareKnowledge(sourceAgentId, [targetAgentId]))
                .resolves.not.toThrow();
        });
        test('should emit knowledgeShared event', (done) => {
            manager.on('knowledgeShared', (event) => {
                expect(event.sourceAgentId).toBe(sourceAgentId);
                expect(event.targetAgentIds).toContain(targetAgentId);
                expect(event.timestamp).toBeDefined();
                done();
            });
            manager.shareKnowledge(sourceAgentId, [targetAgentId]);
        });
        test('should reject sharing when cross-learning disabled', async () => {
            const noCrossLearningManager = new NeuralAgentManager_1.NeuralAgentManager({
                ...mockConfig,
                crossLearningEnabled: false
            });
            await expect(noCrossLearningManager.shareKnowledge('agent1', ['agent2']))
                .rejects.toThrow('Cross-learning is disabled');
        });
        test('should reject sharing from non-existent source agent', async () => {
            await expect(manager.shareKnowledge('invalid-source', [targetAgentId]))
                .rejects.toThrow('Source agent not found: invalid-source');
        });
        test('should handle non-existent target agents gracefully', async () => {
            await expect(manager.shareKnowledge(sourceAgentId, ['invalid-target']))
                .resolves.not.toThrow();
        });
    });
    describe('Agent Management', () => {
        let agentId;
        beforeEach(async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [2, 1] };
            agentId = await manager.spawnAgent(agentConfig);
        });
        test('should get agent state', () => {
            const agent = manager.getAgentState(agentId);
            expect(agent).toBeDefined();
            expect(agent.id).toBe(agentId);
            expect(agent.state).toBe(neural_1.AgentState.ACTIVE);
            expect(agent.config).toBeDefined();
            expect(agent.createdAt).toBeDefined();
        });
        test('should return null for non-existent agent', () => {
            const agent = manager.getAgentState('invalid-id');
            expect(agent).toBeNull();
        });
        test('should get active agents', () => {
            const activeAgents = manager.getActiveAgents();
            expect(Array.isArray(activeAgents)).toBe(true);
            expect(activeAgents.length).toBeGreaterThan(0);
            expect(activeAgents[0].state).toBe(neural_1.AgentState.ACTIVE);
        });
        test('should terminate agent successfully', async () => {
            await manager.terminateAgent(agentId);
            const agent = manager.getAgentState(agentId);
            expect(agent).toBeNull();
        });
        test('should emit agentTerminated event', (done) => {
            manager.on('agentTerminated', (event) => {
                expect(event.agentId).toBe(agentId);
                done();
            });
            manager.terminateAgent(agentId);
        });
        test('should handle terminating non-existent agent gracefully', async () => {
            await expect(manager.terminateAgent('invalid-id'))
                .resolves.not.toThrow();
        });
    });
    describe('Network Topology', () => {
        beforeEach(async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            // Spawn multiple agents for topology testing
            const agentConfig = { type: 'mlp', architecture: [2, 1] };
            await manager.spawnAgent(agentConfig);
            await manager.spawnAgent(agentConfig);
            await manager.spawnAgent(agentConfig);
        });
        test('should get network topology', () => {
            const topology = manager.getNetworkTopology();
            expect(topology).toBeDefined();
            expect(topology.nodes).toBeDefined();
            expect(topology.connections).toBeDefined();
            expect(topology.totalNodes).toBe(3);
            expect(topology.activeConnections).toBeGreaterThan(0);
            expect(topology.networkHealth).toBeGreaterThan(0);
        });
        test('should include correct node information', () => {
            const topology = manager.getNetworkTopology();
            topology.nodes.forEach(node => {
                expect(node.id).toBeDefined();
                expect(node.type).toBeDefined();
                expect(node.state).toBe(neural_1.AgentState.ACTIVE);
                expect(typeof node.performance).toBe('number');
                expect(typeof node.memoryUsage).toBe('number');
            });
        });
        test('should calculate network connections correctly', () => {
            const topology = manager.getNetworkTopology();
            const expectedConnections = (3 * (3 - 1)) / 2; // n*(n-1)/2 for full mesh
            expect(topology.connections.length).toBe(expectedConnections);
            topology.connections.forEach(connection => {
                expect(connection).toHaveLength(3); // [source, target, strength]
                expect(typeof connection[2]).toBe('number'); // strength
            });
        });
    });
    describe('Performance Metrics', () => {
        test('should provide performance metrics', () => {
            const metrics = manager.getPerformanceMetrics();
            expect(metrics).toBeDefined();
            expect(typeof metrics.totalAgentsSpawned).toBe('number');
            expect(typeof metrics.averageSpawnTime).toBe('number');
            expect(typeof metrics.averageInferenceTime).toBe('number');
            expect(typeof metrics.memoryUsage).toBe('number');
            expect(typeof metrics.activeLearningTasks).toBe('number');
            expect(typeof metrics.systemHealthScore).toBe('number');
        });
        test('should calculate system health correctly', async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const metrics = manager.getPerformanceMetrics();
            expect(metrics.systemHealthScore).toBeGreaterThanOrEqual(0);
            expect(metrics.systemHealthScore).toBeLessThanOrEqual(100);
        });
        test('should update metrics after operations', async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const initialMetrics = manager.getPerformanceMetrics();
            const agentConfig = { type: 'mlp', architecture: [2, 1] };
            await manager.spawnAgent(agentConfig);
            const updatedMetrics = manager.getPerformanceMetrics();
            expect(updatedMetrics.totalAgentsSpawned).toBeGreaterThan(initialMetrics.totalAgentsSpawned);
        });
    });
    describe('Cleanup', () => {
        test('should cleanup all resources', async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            // Spawn some agents
            const agentConfig = { type: 'mlp', architecture: [2, 1] };
            await manager.spawnAgent(agentConfig);
            await manager.spawnAgent(agentConfig);
            expect(manager.getActiveAgents().length).toBe(2);
            await manager.cleanup();
            expect(manager.getActiveAgents().length).toBe(0);
        });
        test('should emit cleanup event', (done) => {
            manager.on('cleanup', () => {
                done();
            });
            manager.cleanup();
        });
    });
    describe('Error Handling', () => {
        test('should handle WASM initialization failure', async () => {
            // Mock WebAssembly to throw error
            const originalWebAssembly = global.WebAssembly;
            global.WebAssembly = {
                instantiate: jest.fn().mockRejectedValue(new Error('WASM load failed'))
            };
            const errorManager = new NeuralAgentManager_1.NeuralAgentManager(mockConfig);
            await new Promise(resolve => setTimeout(resolve, 100));
            // Restore WebAssembly
            global.WebAssembly = originalWebAssembly;
        });
        test('should handle memory allocation errors', async () => {
            // Test with very small memory limit
            const smallMemoryManager = new NeuralAgentManager_1.NeuralAgentManager({
                ...mockConfig,
                memoryLimitPerAgent: 1 // 1 byte - too small
            });
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [1000, 1000, 1000] }; // Large network
            // Should not throw but may emit warnings
            await expect(smallMemoryManager.spawnAgent(agentConfig))
                .resolves.toBeDefined();
        });
    });
    describe('Edge Cases', () => {
        test('should handle empty training data', async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [2, 1] };
            const agentId = await manager.spawnAgent(agentConfig);
            await expect(manager.trainAgent(agentId, [], 10))
                .rejects.toThrow();
        });
        test('should handle zero epochs training', async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [2, 1] };
            const agentId = await manager.spawnAgent(agentConfig);
            const trainingData = [{ inputs: [0.1, 0.2], outputs: [0.3] }];
            const session = await manager.trainAgent(agentId, trainingData, 0);
            expect(session.epochs).toBe(0);
        });
        test('should handle large input arrays', async () => {
            await new Promise(resolve => setTimeout(resolve, 100));
            const agentConfig = { type: 'mlp', architecture: [1000, 1] };
            const agentId = await manager.spawnAgent(agentConfig);
            const largeInputs = new Array(1000).fill(0).map(() => Math.random());
            await expect(manager.runInference(agentId, largeInputs))
                .resolves.toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL3dvcmtzcGFjZXMvYWdlbnRpc3RzLXF1aWNrc3RhcnQtd29ya3NwYWNlLWJhc2ljL3Nhc2kvdGVzdHMvdW5pdC9zZXJ2aWNlcy9OZXVyYWxBZ2VudE1hbmFnZXIudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQUVILG1DQUFzQztBQUN0QyxpRkFBOEU7QUFDOUUsc0RBQXVEO0FBRXZELCtCQUErQjtBQUMvQixNQUFNLGVBQWUsR0FBRztJQUN0QixHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7Q0FDL0IsQ0FBQztBQUNGLE1BQU0sQ0FBQyxXQUFXLEdBQUcsZUFBc0IsQ0FBQztBQUU1QywrQkFBK0I7QUFDL0IsTUFBTSxDQUFDLFdBQVcsR0FBRztJQUNuQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNsQixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN0QixRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUM7Q0FDdkIsQ0FBQztBQUVULFFBQVEsQ0FBQywrQ0FBK0MsRUFBRSxHQUFHLEVBQUU7SUFDN0QsSUFBSSxPQUEyQixDQUFDO0lBQ2hDLElBQUksVUFBZSxDQUFDO0lBRXBCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsZUFBZSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFMUMsVUFBVSxHQUFHO1lBQ1gsU0FBUyxFQUFFLENBQUM7WUFDWixtQkFBbUIsRUFBRSxFQUFFLEdBQUcsSUFBSSxHQUFHLElBQUksRUFBRSxtQkFBbUI7WUFDMUQsZ0JBQWdCLEVBQUUsRUFBRTtZQUNwQixXQUFXLEVBQUUsSUFBSTtZQUNqQixvQkFBb0IsRUFBRSxJQUFJO1lBQzFCLGtCQUFrQixFQUFFLEtBQUssRUFBRSx5QkFBeUI7WUFDcEQs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cmNlcyI6WyIvd29ya3NwYWNlcy9hZ2VudGlzdHMtcXVpY2tzdGFydC13b3Jrc3BhY2UtYmFzaWMvc2FzaS90ZXN0cy91bml0L3NlcnZpY2VzL05ldXJhbEFnZW50TWFuYWdlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBVbml0IFRlc3RzIGZvciBOZXVyYWxBZ2VudE1hbmFnZXJcbiAqIFRhcmdldDogOTUlKyBjb3ZlcmFnZSBmb3IgbmV1cmFsIGFnZW50IGxpZmVjeWNsZSBhbmQgb3BlcmF0aW9uc1xuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBOZXVyYWxBZ2VudE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvTmV1cmFsQWdlbnRNYW5hZ2VyJztcbmltcG9ydCB7IEFnZW50U3RhdGUgfSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMvbmV1cmFsJztcblxuLy8gTW9jayBwZXJmb3JtYW5jZSBmb3IgdGVzdGluZ1xuY29uc3QgbW9ja1BlcmZvcm1hbmNlID0ge1xuICBub3c6IGplc3QuZm4oKCkgPT4gRGF0ZS5ub3coKSksXG59O1xuZ2xvYmFsLnBlcmZvcm1hbmNlID0gbW9ja1BlcmZvcm1hbmNlIGFzIGFueTtcblxuLy8gTW9jayBXZWJBc3NlbWJseSBmb3IgdGVzdGluZ1xuZ2xvYmFsLldlYkFzc2VtYmx5ID0ge1xuICBjb21waWxlOiBqZXN0LmZuKCksXG4gIGluc3RhbnRpYXRlOiBqZXN0LmZuKCksXG4gIHZhbGlkYXRlOiBqZXN0LmZuKCgpID0+IHRydWUpLFxufSBhcyBhbnk7XG5cbmRlc2NyaWJlKCdOZXVyYWxBZ2VudE1hbmFnZXIgLSBDb21wcmVoZW5zaXZlIFVuaXQgVGVzdHMnLCAoKSA9PiB7XG4gIGxldCBtYW5hZ2VyOiBOZXVyYWxBZ2VudE1hbmFnZXI7XG4gIGxldCBtb2NrQ29uZmlnOiBhbnk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgbW9ja1BlcmZvcm1hbmNlLm5vdy5tb2NrUmV0dXJuVmFsdWUoMTAwMCk7XG4gICAgXG4gICAgbW9ja0NvbmZpZyA9IHtcbiAgICAgIG1heEFnZW50czogNSxcbiAgICAgIG1lbW9yeUxpbWl0UGVyQWdlbnQ6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUIgZm9yIHRlc3RpbmdcbiAgICAgIGluZmVyZW5jZVRpbWVvdXQ6IDUwLFxuICAgICAgc2ltZEVuYWJsZWQ6IHRydWUsXG4gICAgICBjcm9zc0xlYXJuaW5nRW5hYmxlZDogdHJ1ZSxcbiAgICAgIHBlcnNpc3RlbmNlRW5hYmxlZDogZmFsc2UsIC8vIERpc2FibGUgZm9yIHVuaXQgdGVzdHNcbiAgICAgIHBlcmZvcm1hbmNlTW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgIHdhc21Nb2R1bGVQYXRoOiAnL3Rlc3QvbmV1cmFsLndhc20nXG4gICAgfTtcbiAgICBcbiAgICBtYW5hZ2VyID0gbmV3IE5ldXJhbEFnZW50TWFuYWdlcihtb2NrQ29uZmlnKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICBpZiAobWFuYWdlcikge1xuICAgICAgYXdhaXQgbWFuYWdlci5jbGVhbnVwKCk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBkZWZhdWx0IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBkZWZhdWx0TWFuYWdlciA9IG5ldyBOZXVyYWxBZ2VudE1hbmFnZXIoKTtcbiAgICAgIGV4cGVjdChkZWZhdWx0TWFuYWdlcikudG9CZUluc3RhbmNlT2YoRXZlbnRFbWl0dGVyKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggY3VzdG9tIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Db25maWcgPSB7XG4gICAgICAgIG1heEFnZW50czogMTAsXG4gICAgICAgIG1lbW9yeUxpbWl0UGVyQWdlbnQ6IDEwMCAqIDEwMjQgKiAxMDI0LFxuICAgICAgICBpbmZlcmVuY2VUaW1lb3V0OiAyMDBcbiAgICAgIH07XG4gICAgICBjb25zdCBjdXN0b21NYW5hZ2VyID0gbmV3IE5ldXJhbEFnZW50TWFuYWdlcihjdXN0b21Db25maWcpO1xuICAgICAgZXhwZWN0KGN1c3RvbU1hbmFnZXIpLnRvQmVJbnN0YW5jZU9mKEV2ZW50RW1pdHRlcik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZW1pdCBpbml0aWFsaXplZCBldmVudCBhZnRlciBzdWNjZXNzZnVsIGluaXRpYWxpemF0aW9uJywgKGRvbmUpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RNYW5hZ2VyID0gbmV3IE5ldXJhbEFnZW50TWFuYWdlcihtb2NrQ29uZmlnKTtcbiAgICAgIFxuICAgICAgdGVzdE1hbmFnZXIub24oJ2luaXRpYWxpemVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV4cGVjdChldmVudC5jb25maWcpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChldmVudC50aW1lc3RhbXApLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBpbml0aWFsaXphdGlvbiBlcnJvcnMgZ3JhY2VmdWxseScsIChkb25lKSA9PiB7XG4gICAgICBjb25zdCBlcnJvckNvbmZpZyA9IHtcbiAgICAgICAgLi4ubW9ja0NvbmZpZyxcbiAgICAgICAgd2FzbU1vZHVsZVBhdGg6ICcvaW52YWxpZC9wYXRoLndhc20nXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBlcnJvck1hbmFnZXIgPSBuZXcgTmV1cmFsQWdlbnRNYW5hZ2VyKGVycm9yQ29uZmlnKTtcbiAgICAgIFxuICAgICAgZXJyb3JNYW5hZ2VyLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWdlbnQgU3Bhd25pbmcnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBXYWl0IGZvciBpbml0aWFsaXphdGlvblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNwYXduIGFnZW50IHdpdGggdmFsaWQgY29uZmlndXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0ge1xuICAgICAgICB0eXBlOiAnbWxwJyxcbiAgICAgICAgYXJjaGl0ZWN0dXJlOiBbMTAsIDUsIDFdLFxuICAgICAgICBsZWFybmluZ1JhdGU6IDAuMDAxXG4gICAgICB9O1xuXG4gICAgICBtb2NrUGVyZm9ybWFuY2Uubm93Lm1vY2tSZXR1cm5WYWx1ZU9uY2UoMTAwMCkubW9ja1JldHVyblZhbHVlT25jZSgxMDc1KTtcbiAgICAgIFxuICAgICAgY29uc3QgYWdlbnRJZCA9IGF3YWl0IG1hbmFnZXIuc3Bhd25BZ2VudChhZ2VudENvbmZpZyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhZ2VudElkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBhZ2VudElkKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdChhZ2VudElkKS50b01hdGNoKC9eYWdlbnRfXFxkK19bYS16MC05XSskLyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZW1pdCBhZ2VudFNwYXduZWQgZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgY29uc3QgYWdlbnRDb25maWcgPSB7XG4gICAgICAgIHR5cGU6ICdtbHAnLFxuICAgICAgICBhcmNoaXRlY3R1cmU6IFsxMCwgNSwgMV1cbiAgICAgIH07XG5cbiAgICAgIG1hbmFnZXIub24oJ2FnZW50U3Bhd25lZCcsIChldmVudCkgPT4ge1xuICAgICAgICBleHBlY3QoZXZlbnQuYWdlbnRJZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50LnNwYXduVGltZSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50LmNvbmZpZykudG9FcXVhbChhZ2VudENvbmZpZyk7XG4gICAgICAgIGV4cGVjdChldmVudC5tZW1vcnlVc2FnZSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIG1hbmFnZXIuc3Bhd25BZ2VudChhZ2VudENvbmZpZyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IHNwYXduaW5nIHdoZW4gbWF4IGFnZW50cyByZWFjaGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWdlbnRDb25maWcgPSB7IHR5cGU6ICdtbHAnLCBhcmNoaXRlY3R1cmU6IFs1LCAxXSB9O1xuICAgICAgXG4gICAgICAvLyBTcGF3biBtYXggYWdlbnRzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vY2tDb25maWcubWF4QWdlbnRzOyBpKyspIHtcbiAgICAgICAgYXdhaXQgbWFuYWdlci5zcGF3bkFnZW50KGFnZW50Q29uZmlnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIHNwYXduIG9uZSBtb3JlXG4gICAgICBhd2FpdCBleHBlY3QobWFuYWdlci5zcGF3bkFnZW50KGFnZW50Q29uZmlnKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnTWF4aW11bSBhZ2VudHMgbGltaXQgcmVhY2hlZDogNScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCBzcGF3bmluZyB3aGVuIG5vdCBpbml0aWFsaXplZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVuaW5pdGlhbGl6ZWRNYW5hZ2VyID0gbmV3IE5ldXJhbEFnZW50TWFuYWdlcihtb2NrQ29uZmlnKTtcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbNSwgMV0gfTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KHVuaW5pdGlhbGl6ZWRNYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdOZXVyYWwgQWdlbnQgTWFuYWdlciBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB0cmFjayBwZXJmb3JtYW5jZSBtZXRyaWNzIGR1cmluZyBzcGF3bmluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQZXJmb3JtYW5jZS5ub3cubW9ja1JldHVyblZhbHVlT25jZSgxMDAwKS5tb2NrUmV0dXJuVmFsdWVPbmNlKDEwODApO1xuICAgICAgXG4gICAgICBjb25zdCBhZ2VudENvbmZpZyA9IHsgdHlwZTogJ21scCcsIGFyY2hpdGVjdHVyZTogWzEwLCA1LCAxXSB9O1xuICAgICAgYXdhaXQgbWFuYWdlci5zcGF3bkFnZW50KGFnZW50Q29uZmlnKTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IG1hbmFnZXIuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICBleHBlY3QobWV0cmljcy50b3RhbEFnZW50c1NwYXduZWQpLnRvQmUoMSk7XG4gICAgICBleHBlY3QobWV0cmljcy5hdmVyYWdlU3Bhd25UaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOZXVyYWwgSW5mZXJlbmNlJywgKCkgPT4ge1xuICAgIGxldCBhZ2VudElkOiBzdHJpbmc7XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMywgMiwgMV0gfTtcbiAgICAgIGFnZW50SWQgPSBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJ1biBpbmZlcmVuY2Ugc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5wdXRzID0gWzAuMSwgMC41LCAwLjldO1xuICAgICAgbW9ja1BlcmZvcm1hbmNlLm5vdy5tb2NrUmV0dXJuVmFsdWVPbmNlKDIwMDApLm1vY2tSZXR1cm5WYWx1ZU9uY2UoMjAzMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG91dHB1dHMgPSBhd2FpdCBtYW5hZ2VyLnJ1bkluZmVyZW5jZShhZ2VudElkLCBpbnB1dHMpO1xuICAgICAgXG4gICAgICBleHBlY3Qob3V0cHV0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG91dHB1dHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG91dHB1dHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZW1pdCBpbmZlcmVuY2VDb21wbGV0ZSBldmVudCcsIChkb25lKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dHMgPSBbMC4xLCAwLjUsIDAuOV07XG4gICAgICBcbiAgICAgIG1hbmFnZXIub24oJ2luZmVyZW5jZUNvbXBsZXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV4cGVjdChldmVudC5hZ2VudElkKS50b0JlKGFnZW50SWQpO1xuICAgICAgICBleHBlY3QoZXZlbnQuaW5mZXJlbmNlVGltZSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50LmlucHV0U2l6ZSkudG9CZShpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50Lm91dHB1dFNpemUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIG1hbmFnZXIucnVuSW5mZXJlbmNlKGFnZW50SWQsIGlucHV0cyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGluZmVyZW5jZSBmb3Igbm9uLWV4aXN0ZW50IGFnZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5wdXRzID0gWzAuMSwgMC41LCAwLjldO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QobWFuYWdlci5ydW5JbmZlcmVuY2UoJ2ludmFsaWQtYWdlbnQtaWQnLCBpbnB1dHMpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdBZ2VudCBub3QgZm91bmQ6IGludmFsaWQtYWdlbnQtaWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW5mZXJlbmNlIHRpbWVvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dHMgPSBbMC4xLCAwLjUsIDAuOV07XG4gICAgICBcbiAgICAgIC8vIE1vY2sgYSBzbG93IGluZmVyZW5jZSB0aGF0IGV4Y2VlZHMgdGltZW91dFxuICAgICAgY29uc3Qgc2xvd01hbmFnZXIgPSBuZXcgTmV1cmFsQWdlbnRNYW5hZ2VyKHtcbiAgICAgICAgLi4ubW9ja0NvbmZpZyxcbiAgICAgICAgaW5mZXJlbmNlVGltZW91dDogMSAvLyAxbXMgdGltZW91dFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIGNvbnN0IHNsb3dBZ2VudElkID0gYXdhaXQgc2xvd01hbmFnZXIuc3Bhd25BZ2VudCh7IHR5cGU6ICdtbHAnLCBhcmNoaXRlY3R1cmU6IFszLCAxXSB9KTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KHNsb3dNYW5hZ2VyLnJ1bkluZmVyZW5jZShzbG93QWdlbnRJZCwgaW5wdXRzKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnSW5mZXJlbmNlIHRpbWVvdXQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgYWdlbnQgc3RhdGlzdGljcyBhZnRlciBpbmZlcmVuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dHMgPSBbMC4xLCAwLjUsIDAuOV07XG4gICAgICBcbiAgICAgIGF3YWl0IG1hbmFnZXIucnVuSW5mZXJlbmNlKGFnZW50SWQsIGlucHV0cyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFnZW50ID0gbWFuYWdlci5nZXRBZ2VudFN0YXRlKGFnZW50SWQpO1xuICAgICAgZXhwZWN0KGFnZW50KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGFnZW50IS50b3RhbEluZmVyZW5jZXMpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoYWdlbnQhLmF2ZXJhZ2VJbmZlcmVuY2VUaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoYWdlbnQhLmxhc3RBY3RpdmUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FnZW50IFRyYWluaW5nJywgKCkgPT4ge1xuICAgIGxldCBhZ2VudElkOiBzdHJpbmc7XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMiwgMywgMV0gfTtcbiAgICAgIGFnZW50SWQgPSBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRyYWluIGFnZW50IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYWluaW5nRGF0YSA9IFtcbiAgICAgICAgeyBpbnB1dHM6IFswLCAwXSwgb3V0cHV0czogWzBdIH0sXG4gICAgICAgIHsgaW5wdXRzOiBbMCwgMV0sIG91dHB1dHM6IFsxXSB9LFxuICAgICAgICB7IGlucHV0czogWzEsIDBdLCBvdXRwdXRzOiBbMV0gfSxcbiAgICAgICAgeyBpbnB1dHM6IFsxLCAxXSwgb3V0cHV0czogWzBdIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIG1vY2tQZXJmb3JtYW5jZS5ub3cubW9ja1JldHVyblZhbHVlT25jZSgzMDAwKS5tb2NrUmV0dXJuVmFsdWVPbmNlKDM1MDApO1xuICAgICAgXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgbWFuYWdlci50cmFpbkFnZW50KGFnZW50SWQsIHRyYWluaW5nRGF0YSwgMTApO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2Vzc2lvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzZXNzaW9uLnNlc3Npb25JZCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzZXNzaW9uLmFnZW50SWQpLnRvQmUoYWdlbnRJZCk7XG4gICAgICBleHBlY3Qoc2Vzc2lvbi5lcG9jaHMpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHNlc3Npb24uZmluYWxBY2N1cmFjeSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHNlc3Npb24uZGF0YVBvaW50cykudG9CZSg0KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBlbWl0IGxlYXJuaW5nQ29tcGxldGUgZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgY29uc3QgdHJhaW5pbmdEYXRhID0gW1xuICAgICAgICB7IGlucHV0czogWzAuMSwgMC4yXSwgb3V0cHV0czogWzAuM10gfVxuICAgICAgXTtcbiAgICAgIFxuICAgICAgbWFuYWdlci5vbignbGVhcm5pbmdDb21wbGV0ZScsIChzZXNzaW9uKSA9PiB7XG4gICAgICAgIGV4cGVjdChzZXNzaW9uLnNlc3Npb25JZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHNlc3Npb24uYWdlbnRJZCkudG9CZShhZ2VudElkKTtcbiAgICAgICAgZXhwZWN0KHNlc3Npb24uZmluYWxBY2N1cmFjeSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcblxuICAgICAgbWFuYWdlci50cmFpbkFnZW50KGFnZW50SWQsIHRyYWluaW5nRGF0YSwgNSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIGFnZW50IHN0YXRlIGR1cmluZyB0cmFpbmluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYWluaW5nRGF0YSA9IFt7IGlucHV0czogWzAuMV0sIG91dHB1dHM6IFswLjJdIH1dO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBzdGF0ZSBjaGFuZ2VzIGR1cmluZyB0cmFpbmluZ1xuICAgICAgY29uc3QgdHJhaW5pbmdQcm9taXNlID0gbWFuYWdlci50cmFpbkFnZW50KGFnZW50SWQsIHRyYWluaW5nRGF0YSwgNSk7XG4gICAgICBcbiAgICAgIC8vIEdpdmUgdHJhaW5pbmcgYSBtb21lbnQgdG8gc3RhcnRcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpO1xuICAgICAgXG4gICAgICBjb25zdCBhZ2VudER1cmluZ1RyYWluaW5nID0gbWFuYWdlci5nZXRBZ2VudFN0YXRlKGFnZW50SWQpO1xuICAgICAgZXhwZWN0KGFnZW50RHVyaW5nVHJhaW5pbmchLnN0YXRlKS50b0JlKEFnZW50U3RhdGUuTEVBUk5JTkcpO1xuICAgICAgXG4gICAgICBhd2FpdCB0cmFpbmluZ1Byb21pc2U7XG4gICAgICBcbiAgICAgIGNvbnN0IGFnZW50QWZ0ZXJUcmFpbmluZyA9IG1hbmFnZXIuZ2V0QWdlbnRTdGF0ZShhZ2VudElkKTtcbiAgICAgIGV4cGVjdChhZ2VudEFmdGVyVHJhaW5pbmchLnN0YXRlKS50b0JlKEFnZW50U3RhdGUuQUNUSVZFKTtcbiAgICAgIGV4cGVjdChhZ2VudEFmdGVyVHJhaW5pbmchLmxlYXJuaW5nUHJvZ3Jlc3MpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdHJhaW5pbmcgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkVHJhaW5pbmdEYXRhOiBhbnkgPSBudWxsO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QobWFuYWdlci50cmFpbkFnZW50KGFnZW50SWQsIGludmFsaWRUcmFpbmluZ0RhdGEsIDEwKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygpO1xuICAgICAgXG4gICAgICAvLyBBZ2VudCBzaG91bGQgcmV0dXJuIHRvIGFjdGl2ZSBzdGF0ZSBhZnRlciBlcnJvclxuICAgICAgY29uc3QgYWdlbnQgPSBtYW5hZ2VyLmdldEFnZW50U3RhdGUoYWdlbnRJZCk7XG4gICAgICBleHBlY3QoYWdlbnQhLnN0YXRlKS50b0JlKEFnZW50U3RhdGUuQUNUSVZFKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0tub3dsZWRnZSBTaGFyaW5nJywgKCkgPT4ge1xuICAgIGxldCBzb3VyY2VBZ2VudElkOiBzdHJpbmc7XG4gICAgbGV0IHRhcmdldEFnZW50SWQ6IHN0cmluZztcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xuICAgICAgY29uc3QgYWdlbnRDb25maWcgPSB7IHR5cGU6ICdtbHAnLCBhcmNoaXRlY3R1cmU6IFszLCAyLCAxXSB9O1xuICAgICAgc291cmNlQWdlbnRJZCA9IGF3YWl0IG1hbmFnZXIuc3Bhd25BZ2VudChhZ2VudENvbmZpZyk7XG4gICAgICB0YXJnZXRBZ2VudElkID0gYXdhaXQgbWFuYWdlci5zcGF3bkFnZW50KGFnZW50Q29uZmlnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzaGFyZSBrbm93bGVkZ2UgYmV0d2VlbiBhZ2VudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QobWFuYWdlci5zaGFyZUtub3dsZWRnZShzb3VyY2VBZ2VudElkLCBbdGFyZ2V0QWdlbnRJZF0pKVxuICAgICAgICAucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBlbWl0IGtub3dsZWRnZVNoYXJlZCBldmVudCcsIChkb25lKSA9PiB7XG4gICAgICBtYW5hZ2VyLm9uKCdrbm93bGVkZ2VTaGFyZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXhwZWN0KGV2ZW50LnNvdXJjZUFnZW50SWQpLnRvQmUoc291cmNlQWdlbnRJZCk7XG4gICAgICAgIGV4cGVjdChldmVudC50YXJnZXRBZ2VudElkcykudG9Db250YWluKHRhcmdldEFnZW50SWQpO1xuICAgICAgICBleHBlY3QoZXZlbnQudGltZXN0YW1wKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcblxuICAgICAgbWFuYWdlci5zaGFyZUtub3dsZWRnZShzb3VyY2VBZ2VudElkLCBbdGFyZ2V0QWdlbnRJZF0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCBzaGFyaW5nIHdoZW4gY3Jvc3MtbGVhcm5pbmcgZGlzYWJsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBub0Nyb3NzTGVhcm5pbmdNYW5hZ2VyID0gbmV3IE5ldXJhbEFnZW50TWFuYWdlcih7XG4gICAgICAgIC4uLm1vY2tDb25maWcsXG4gICAgICAgIGNyb3NzTGVhcm5pbmdFbmFibGVkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGV4cGVjdChub0Nyb3NzTGVhcm5pbmdNYW5hZ2VyLnNoYXJlS25vd2xlZGdlKCdhZ2VudDEnLCBbJ2FnZW50MiddKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnQ3Jvc3MtbGVhcm5pbmcgaXMgZGlzYWJsZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3Qgc2hhcmluZyBmcm9tIG5vbi1leGlzdGVudCBzb3VyY2UgYWdlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QobWFuYWdlci5zaGFyZUtub3dsZWRnZSgnaW52YWxpZC1zb3VyY2UnLCBbdGFyZ2V0QWdlbnRJZF0pKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdTb3VyY2UgYWdlbnQgbm90IGZvdW5kOiBpbnZhbGlkLXNvdXJjZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBub24tZXhpc3RlbnQgdGFyZ2V0IGFnZW50cyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KG1hbmFnZXIuc2hhcmVLbm93bGVkZ2Uoc291cmNlQWdlbnRJZCwgWydpbnZhbGlkLXRhcmdldCddKSlcbiAgICAgICAgLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBZ2VudCBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGxldCBhZ2VudElkOiBzdHJpbmc7XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMiwgMV0gfTtcbiAgICAgIGFnZW50SWQgPSBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGdldCBhZ2VudCBzdGF0ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50ID0gbWFuYWdlci5nZXRBZ2VudFN0YXRlKGFnZW50SWQpO1xuICAgICAgXG4gICAgICBleHBlY3QoYWdlbnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoYWdlbnQhLmlkKS50b0JlKGFnZW50SWQpO1xuICAgICAgZXhwZWN0KGFnZW50IS5zdGF0ZSkudG9CZShBZ2VudFN0YXRlLkFDVElWRSk7XG4gICAgICBleHBlY3QoYWdlbnQhLmNvbmZpZykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChhZ2VudCEuY3JlYXRlZEF0KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBub24tZXhpc3RlbnQgYWdlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudCA9IG1hbmFnZXIuZ2V0QWdlbnRTdGF0ZSgnaW52YWxpZC1pZCcpO1xuICAgICAgZXhwZWN0KGFnZW50KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGdldCBhY3RpdmUgYWdlbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZlQWdlbnRzID0gbWFuYWdlci5nZXRBY3RpdmVBZ2VudHMoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYWN0aXZlQWdlbnRzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChhY3RpdmVBZ2VudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoYWN0aXZlQWdlbnRzWzBdLnN0YXRlKS50b0JlKEFnZW50U3RhdGUuQUNUSVZFKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB0ZXJtaW5hdGUgYWdlbnQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWFuYWdlci50ZXJtaW5hdGVBZ2VudChhZ2VudElkKTtcbiAgICAgIFxuICAgICAgY29uc3QgYWdlbnQgPSBtYW5hZ2VyLmdldEFnZW50U3RhdGUoYWdlbnRJZCk7XG4gICAgICBleHBlY3QoYWdlbnQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZW1pdCBhZ2VudFRlcm1pbmF0ZWQgZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgbWFuYWdlci5vbignYWdlbnRUZXJtaW5hdGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV4cGVjdChldmVudC5hZ2VudElkKS50b0JlKGFnZW50SWQpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcblxuICAgICAgbWFuYWdlci50ZXJtaW5hdGVBZ2VudChhZ2VudElkKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdGVybWluYXRpbmcgbm9uLWV4aXN0ZW50IGFnZW50IGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QobWFuYWdlci50ZXJtaW5hdGVBZ2VudCgnaW52YWxpZC1pZCcpKVxuICAgICAgICAucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ05ldHdvcmsgVG9wb2xvZ3knLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG4gICAgICAvLyBTcGF3biBtdWx0aXBsZSBhZ2VudHMgZm9yIHRvcG9sb2d5IHRlc3RpbmdcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMiwgMV0gfTtcbiAgICAgIGF3YWl0IG1hbmFnZXIuc3Bhd25BZ2VudChhZ2VudENvbmZpZyk7XG4gICAgICBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgICAgYXdhaXQgbWFuYWdlci5zcGF3bkFnZW50KGFnZW50Q29uZmlnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBnZXQgbmV0d29yayB0b3BvbG9neScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvcG9sb2d5ID0gbWFuYWdlci5nZXROZXR3b3JrVG9wb2xvZ3koKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHRvcG9sb2d5KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHRvcG9sb2d5Lm5vZGVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHRvcG9sb2d5LmNvbm5lY3Rpb25zKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHRvcG9sb2d5LnRvdGFsTm9kZXMpLnRvQmUoMyk7XG4gICAgICBleHBlY3QodG9wb2xvZ3kuYWN0aXZlQ29ubmVjdGlvbnMpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdCh0b3BvbG9neS5uZXR3b3JrSGVhbHRoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaW5jbHVkZSBjb3JyZWN0IG5vZGUgaW5mb3JtYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3BvbG9neSA9IG1hbmFnZXIuZ2V0TmV0d29ya1RvcG9sb2d5KCk7XG4gICAgICBcbiAgICAgIHRvcG9sb2d5Lm5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgIGV4cGVjdChub2RlLmlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3Qobm9kZS50eXBlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3Qobm9kZS5zdGF0ZSkudG9CZShBZ2VudFN0YXRlLkFDVElWRSk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2Ygbm9kZS5wZXJmb3JtYW5jZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2Ygbm9kZS5tZW1vcnlVc2FnZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjYWxjdWxhdGUgbmV0d29yayBjb25uZWN0aW9ucyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3BvbG9neSA9IG1hbmFnZXIuZ2V0TmV0d29ya1RvcG9sb2d5KCk7XG4gICAgICBjb25zdCBleHBlY3RlZENvbm5lY3Rpb25zID0gKDMgKiAoMyAtIDEpKSAvIDI7IC8vIG4qKG4tMSkvMiBmb3IgZnVsbCBtZXNoXG4gICAgICBcbiAgICAgIGV4cGVjdCh0b3BvbG9neS5jb25uZWN0aW9ucy5sZW5ndGgpLnRvQmUoZXhwZWN0ZWRDb25uZWN0aW9ucyk7XG4gICAgICBcbiAgICAgIHRvcG9sb2d5LmNvbm5lY3Rpb25zLmZvckVhY2goY29ubmVjdGlvbiA9PiB7XG4gICAgICAgIGV4cGVjdChjb25uZWN0aW9uKS50b0hhdmVMZW5ndGgoMyk7IC8vIFtzb3VyY2UsIHRhcmdldCwgc3RyZW5ndGhdXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgY29ubmVjdGlvblsyXSkudG9CZSgnbnVtYmVyJyk7IC8vIHN0cmVuZ3RoXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIE1ldHJpY3MnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHByb3ZpZGUgcGVyZm9ybWFuY2UgbWV0cmljcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBtYW5hZ2VyLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgICAgXG4gICAgICBleHBlY3QobWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljcy50b3RhbEFnZW50c1NwYXduZWQpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLmF2ZXJhZ2VTcGF3blRpbWUpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLmF2ZXJhZ2VJbmZlcmVuY2VUaW1lKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljcy5tZW1vcnlVc2FnZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MuYWN0aXZlTGVhcm5pbmdUYXNrcykudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3Muc3lzdGVtSGVhbHRoU2NvcmUpLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNhbGN1bGF0ZSBzeXN0ZW0gaGVhbHRoIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IG1hbmFnZXIuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICBleHBlY3QobWV0cmljcy5zeXN0ZW1IZWFsdGhTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnN5c3RlbUhlYWx0aFNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIG1ldHJpY3MgYWZ0ZXIgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIFxuICAgICAgY29uc3QgaW5pdGlhbE1ldHJpY3MgPSBtYW5hZ2VyLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgICAgXG4gICAgICBjb25zdCBhZ2VudENvbmZpZyA9IHsgdHlwZTogJ21scCcsIGFyY2hpdGVjdHVyZTogWzIsIDFdIH07XG4gICAgICBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgICAgXG4gICAgICBjb25zdCB1cGRhdGVkTWV0cmljcyA9IG1hbmFnZXIuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICBleHBlY3QodXBkYXRlZE1ldHJpY3MudG90YWxBZ2VudHNTcGF3bmVkKS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbE1ldHJpY3MudG90YWxBZ2VudHNTcGF3bmVkKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NsZWFudXAnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNsZWFudXAgYWxsIHJlc291cmNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIFxuICAgICAgLy8gU3Bhd24gc29tZSBhZ2VudHNcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMiwgMV0gfTtcbiAgICAgIGF3YWl0IG1hbmFnZXIuc3Bhd25BZ2VudChhZ2VudENvbmZpZyk7XG4gICAgICBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgICAgXG4gICAgICBleHBlY3QobWFuYWdlci5nZXRBY3RpdmVBZ2VudHMoKS5sZW5ndGgpLnRvQmUoMik7XG4gICAgICBcbiAgICAgIGF3YWl0IG1hbmFnZXIuY2xlYW51cCgpO1xuICAgICAgXG4gICAgICBleHBlY3QobWFuYWdlci5nZXRBY3RpdmVBZ2VudHMoKS5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZW1pdCBjbGVhbnVwIGV2ZW50JywgKGRvbmUpID0+IHtcbiAgICAgIG1hbmFnZXIub24oJ2NsZWFudXAnLCAoKSA9PiB7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBtYW5hZ2VyLmNsZWFudXAoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgV0FTTSBpbml0aWFsaXphdGlvbiBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBXZWJBc3NlbWJseSB0byB0aHJvdyBlcnJvclxuICAgICAgY29uc3Qgb3JpZ2luYWxXZWJBc3NlbWJseSA9IGdsb2JhbC5XZWJBc3NlbWJseTtcbiAgICAgIGdsb2JhbC5XZWJBc3NlbWJseSA9IHtcbiAgICAgICAgaW5zdGFudGlhdGU6IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1dBU00gbG9hZCBmYWlsZWQnKSlcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCBlcnJvck1hbmFnZXIgPSBuZXcgTmV1cmFsQWdlbnRNYW5hZ2VyKG1vY2tDb25maWcpO1xuICAgICAgXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgV2ViQXNzZW1ibHlcbiAgICAgIGdsb2JhbC5XZWJBc3NlbWJseSA9IG9yaWdpbmFsV2ViQXNzZW1ibHk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG1lbW9yeSBhbGxvY2F0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3Qgd2l0aCB2ZXJ5IHNtYWxsIG1lbW9yeSBsaW1pdFxuICAgICAgY29uc3Qgc21hbGxNZW1vcnlNYW5hZ2VyID0gbmV3IE5ldXJhbEFnZW50TWFuYWdlcih7XG4gICAgICAgIC4uLm1vY2tDb25maWcsXG4gICAgICAgIG1lbW9yeUxpbWl0UGVyQWdlbnQ6IDEgLy8gMSBieXRlIC0gdG9vIHNtYWxsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xuICAgICAgXG4gICAgICBjb25zdCBhZ2VudENvbmZpZyA9IHsgdHlwZTogJ21scCcsIGFyY2hpdGVjdHVyZTogWzEwMDAsIDEwMDAsIDEwMDBdIH07IC8vIExhcmdlIG5ldHdvcmtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIG5vdCB0aHJvdyBidXQgbWF5IGVtaXQgd2FybmluZ3NcbiAgICAgIGF3YWl0IGV4cGVjdChzbWFsbE1lbW9yeU1hbmFnZXIuc3Bhd25BZ2VudChhZ2VudENvbmZpZykpXG4gICAgICAgIC5yZXNvbHZlcy50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHRyYWluaW5nIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMiwgMV0gfTtcbiAgICAgIGNvbnN0IGFnZW50SWQgPSBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QobWFuYWdlci50cmFpbkFnZW50KGFnZW50SWQsIFtdLCAxMCkpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgemVybyBlcG9jaHMgdHJhaW5pbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMiwgMV0gfTtcbiAgICAgIGNvbnN0IGFnZW50SWQgPSBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgICAgY29uc3QgdHJhaW5pbmdEYXRhID0gW3sgaW5wdXRzOiBbMC4xLCAwLjJdLCBvdXRwdXRzOiBbMC4zXSB9XTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IG1hbmFnZXIudHJhaW5BZ2VudChhZ2VudElkLCB0cmFpbmluZ0RhdGEsIDApO1xuICAgICAgZXhwZWN0KHNlc3Npb24uZXBvY2hzKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBpbnB1dCBhcnJheXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0geyB0eXBlOiAnbWxwJywgYXJjaGl0ZWN0dXJlOiBbMTAwMCwgMV0gfTtcbiAgICAgIGNvbnN0IGFnZW50SWQgPSBhd2FpdCBtYW5hZ2VyLnNwYXduQWdlbnQoYWdlbnRDb25maWcpO1xuICAgICAgXG4gICAgICBjb25zdCBsYXJnZUlucHV0cyA9IG5ldyBBcnJheSgxMDAwKS5maWxsKDApLm1hcCgoKSA9PiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KG1hbmFnZXIucnVuSW5mZXJlbmNlKGFnZW50SWQsIGxhcmdlSW5wdXRzKSlcbiAgICAgICAgLnJlc29sdmVzLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9