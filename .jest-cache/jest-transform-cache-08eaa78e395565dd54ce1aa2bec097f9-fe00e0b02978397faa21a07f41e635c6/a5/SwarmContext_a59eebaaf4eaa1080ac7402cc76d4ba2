0b902fe5b7f061a386e796eae1f146ea
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SwarmProvider = exports.useSwarm = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const useNeuralMesh_1 = require("../hooks/useNeuralMesh");
const SwarmContextIntegration_1 = require("../services/SwarmContextIntegration");
const SwarmContext = (0, react_1.createContext)(undefined);
const useSwarm = () => {
    const context = (0, react_1.useContext)(SwarmContext);
    if (context === undefined) {
        throw new Error('useSwarm must be used within a SwarmProvider');
    }
    return context;
};
exports.useSwarm = useSwarm;
const SwarmProvider = ({ children }) => {
    const [agents, setAgents] = (0, react_1.useState)([]);
    const [repositories, setRepositories] = (0, react_1.useState)([]);
    const [stats, setStats] = (0, react_1.useState)({
        totalAgents: 0,
        activeAgents: 0,
        totalRepositories: 0,
        tasksCompleted: 0,
        asiProgress: 0,
        networkEfficiency: 0,
        globalContributors: 0,
        processingUnits: 0
    });
    const [isSwarmActive, setIsSwarmActive] = (0, react_1.useState)(false);
    const [enableNeuralMesh, setEnableNeuralMesh] = (0, react_1.useState)(true);
    const [neuralIntegrationReady, setNeuralIntegrationReady] = (0, react_1.useState)(false);
    // Neural mesh integration
    const neuralMeshHook = (0, useNeuralMesh_1.useNeuralMesh)({
        serverUrl: 'ws://localhost:3000',
        enableWasm: true,
        enableRealtime: true,
        debugMode: true
    });
    // Initialize neural data (replaces mock data)
    (0, react_1.useEffect)(() => {
        initializeNeuralData();
    }, []);
    // Initialize neural integration
    (0, react_1.useEffect)(() => {
        const setupNeuralIntegration = async () => {
            try {
                await SwarmContextIntegration_1.neuralSwarmIntegration.initializeNeuralData(repositories);
                setNeuralIntegrationReady(true);
            }
            catch (error) {
                console.error('Neural integration setup failed:', error);
                // Fallback to mock data if neural integration fails
                initializeMockData();
            }
        };
        setupNeuralIntegration();
    }, []);
    // Update stats when agents/repositories change
    (0, react_1.useEffect)(() => {
        updateStats();
    }, [agents, repositories, neuralMeshHook.agents, neuralMeshHook.metrics]);
    // Sync neural mesh agents with regular agents
    (0, react_1.useEffect)(() => {
        if (enableNeuralMesh && neuralMeshHook.agents.length > 0) {
            const combinedAgents = [...agents.filter(a => !a.neuralId), ...neuralMeshHook.agents];
            setAgents(combinedAgents);
        }
    }, [neuralMeshHook.agents, enableNeuralMesh]);
    // Sync neural integration agents
    (0, react_1.useEffect)(() => {
        if (neuralIntegrationReady && isSwarmActive) {
            const interval = setInterval(async () => {
                try {
                    const updatedAgents = await SwarmContextIntegration_1.neuralSwarmIntegration.simulateNeuralActivity();
                    setAgents(current => {
                        // Merge neural agents with existing agents
                        const nonNeuralAgents = current.filter(a => !a.neuralId);
                        return [...nonNeuralAgents, ...updatedAgents];
                    });
                }
                catch (error) {
                    console.error('Neural activity simulation failed:', error);
                }
            }, 2000);
            return () => clearInterval(interval);
        }
    }, [neuralIntegrationReady, isSwarmActive]);
    // Simulate swarm activity (fallback when neural integration not available)
    (0, react_1.useEffect)(() => {
        if (!isSwarmActive || neuralIntegrationReady)
            return;
        const interval = setInterval(() => {
            simulateSwarmActivity();
        }, 2000);
        return () => clearInterval(interval);
    }, [isSwarmActive, neuralIntegrationReady]);
    const initializeNeuralData = async () => {
        try {
            // Enhanced neural repositories
            const neuralRepos = [
                {
                    id: 'repo_1',
                    name: 'neural-architecture-search',
                    owner: 'DeepMind',
                    description: 'Automated neural architecture discovery with reinforcement learning',
                    activeAgents: 8,
                    totalIssues: 47,
                    completedIssues: 32,
                    openPullRequests: 3,
                    lastActivity: new Date(),
                    techStack: ['Python', 'TensorFlow', 'JAX', 'CUDA'],
                    votes: 156,
                    userVoted: false
                },
                {
                    id: 'repo_2',
                    name: 'synaptic-mesh-framework',
                    owner: 'OpenAI',
                    description: 'Distributed neural mesh computing with WASM acceleration',
                    activeAgents: 12,
                    totalIssues: 73,
                    completedIssues: 51,
                    openPullRequests: 5,
                    lastActivity: new Date(),
                    techStack: ['Rust', 'WebAssembly', 'TypeScript', 'C++'],
                    votes: 289,
                    userVoted: true
                },
                {
                    id: 'repo_3',
                    name: 'ruv-fann-enhanced',
                    owner: 'FANN-Community',
                    description: 'Fast Artificial Neural Network library with SIMD optimization',
                    activeAgents: 6,
                    totalIssues: 95,
                    completedIssues: 78,
                    openPullRequests: 2,
                    lastActivity: new Date(),
                    techStack: ['C', 'Rust', 'Python', 'WebAssembly'],
                    votes: 445,
                    userVoted: false
                }
            ];
            setRepositories(neuralRepos);
            // Initialize neural agents if integration is available
            if (neuralIntegrationReady) {
                const neuralAgents = SwarmContextIntegration_1.neuralSwarmIntegration.generateNeuralAgents(25);
                setAgents(neuralAgents);
            }
            else {
                // Fallback to enhanced mock agents
                const mockAgents = generateMockAgents(25);
                setAgents(mockAgents);
            }
        }
        catch (error) {
            console.error('Neural data initialization failed:', error);
            // Fallback to original mock data
            initializeMockData();
        }
    };
    const initializeMockData = () => {
        // Original mock repositories (fallback)
        const mockRepos = [
            {
                id: 'repo_1',
                name: 'quantum-compiler',
                owner: 'QuantumSoft',
                description: 'Next-generation quantum computing compiler',
                activeAgents: 5,
                totalIssues: 47,
                completedIssues: 32,
                openPullRequests: 3,
                lastActivity: new Date(),
                techStack: ['Rust', 'Python', 'CUDA'],
                votes: 42,
                userVoted: false
            },
            {
                id: 'repo_2',
                name: 'neural-mesh',
                owner: 'DeepMind',
                description: 'Distributed neural network framework',
                activeAgents: 8,
                totalIssues: 73,
                completedIssues: 51,
                openPullRequests: 5,
                lastActivity: new Date(),
                techStack: ['Python', 'TensorFlow', 'C++'],
                votes: 28,
                userVoted: true
            },
            {
                id: 'repo_3',
                name: 'swarm-intelligence',
                owner: 'MIT-CSAIL',
                description: 'Collective AI decision-making system',
                activeAgents: 12,
                totalIssues: 95,
                completedIssues: 67,
                openPullRequests: 7,
                lastActivity: new Date(),
                techStack: ['Go', 'React', 'PostgreSQL'],
                votes: 73,
                userVoted: false
            }
        ];
        // Mock agents
        const mockAgents = generateMockAgents(25);
        setRepositories(mockRepos);
        setAgents(mockAgents);
    };
    const generateMockAgents = (count) => {
        const agentTypes = ['researcher', 'coder', 'tester', 'reviewer', 'debugger'];
        const tasks = [
            'Optimizing quantum algorithms',
            'Implementing neural pathways',
            'Testing distributed systems',
            'Reviewing security protocols',
            'Debugging memory leaks',
            'Analyzing performance metrics',
            'Refactoring legacy code',
            'Writing unit tests',
            'Documenting APIs',
            'Optimizing database queries'
        ];
        const owners = ['Alice', 'Bob', 'Charlie', 'Diana', 'Eve', 'Frank', 'Grace', 'Henry', 'Ivy', 'Jack'];
        return Array.from({ length: count }, (_, i) => ({
            id: `agent_${i}`,
            name: `${agentTypes[Math.floor(Math.random() * agentTypes.length)].charAt(0).toUpperCase() + agentTypes[Math.floor(Math.random() * agentTypes.length)].slice(1)}-${Math.random().toString(36).substr(2, 4).toUpperCase()}`,
            type: agentTypes[Math.floor(Math.random() * agentTypes.length)],
            status: Math.random() > 0.7 ? 'active' : Math.random() > 0.5 ? 'processing' : 'idle',
            currentTask: tasks[Math.floor(Math.random() * tasks.length)],
            repository: repositories[Math.floor(Math.random() * repositories.length)]?.name || 'quantum-compiler',
            branch: `feature/agent-${i}-${Math.random().toString(36).substr(2, 6)}`,
            completedTasks: Math.floor(Math.random() * 50),
            efficiency: Math.random() * 100,
            progress: Math.random(),
            position: {
                x: (Math.random() - 0.5) * 100,
                y: (Math.random() - 0.5) * 100,
                z: (Math.random() - 0.5) * 100
            },
            owner: owners[Math.floor(Math.random() * owners.length)]
        }));
    };
    const updateStats = () => {
        const activeAgents = agents.filter(agent => agent.status === 'active' || agent.status === 'processing').length;
        const totalTasks = agents.reduce((sum, agent) => sum + agent.completedTasks, 0);
        const avgEfficiency = agents.reduce((sum, agent) => sum + agent.efficiency, 0) / agents.length;
        // Include neural mesh metrics
        const neuralMeshStats = enableNeuralMesh ? {
            totalNeurons: neuralMeshHook.metrics.totalNeurons,
            totalSynapses: neuralMeshHook.metrics.totalSynapses,
            meshConnectivity: neuralMeshHook.metrics.networkEfficiency,
            neuralActivity: neuralMeshHook.metrics.averageActivity,
            wasmAcceleration: neuralMeshHook.metrics.wasmAcceleration,
            averageLatency: neuralMeshHook.agents.reduce((sum, agent) => sum + (agent.realtime?.networkLatency || 0), 0) / (neuralMeshHook.agents.length || 1)
        } : undefined;
        // Get enhanced stats from neural integration if available
        const baseStats = {
            totalAgents: agents.length,
            activeAgents,
            totalRepositories: repositories.length,
            tasksCompleted: totalTasks,
            asiProgress: Math.min(95, (totalTasks / 1000) * 100),
            networkEfficiency: enableNeuralMesh ? neuralMeshHook.metrics.networkEfficiency : avgEfficiency || 0,
            globalContributors: Math.floor(Math.random() * 5000) + 15000,
            processingUnits: Math.floor(agents.length * 42.5) + Math.floor(Math.random() * 200) + 1200,
            ...(neuralMeshStats && { neuralMeshStats })
        };
        const enhancedStats = neuralIntegrationReady ?
            SwarmContextIntegration_1.neuralSwarmIntegration.getEnhancedStats(baseStats) :
            baseStats;
        setStats(enhancedStats);
    };
    const simulateSwarmActivity = () => {
        setAgents(currentAgents => currentAgents.map(agent => {
            const shouldUpdate = Math.random() > 0.7;
            if (!shouldUpdate)
                return agent;
            const newStatus = Math.random() > 0.8 ? 'active' :
                Math.random() > 0.6 ? 'processing' :
                    Math.random() > 0.4 ? 'idle' : 'completed';
            const completedTasks = newStatus === 'completed' ?
                agent.completedTasks + 1 :
                agent.completedTasks;
            return {
                ...agent,
                status: newStatus,
                completedTasks,
                efficiency: Math.max(0, Math.min(100, agent.efficiency + (Math.random() - 0.5) * 10)),
                progress: Math.max(0, Math.min(1, agent.progress + (Math.random() - 0.4) * 0.1)),
                position: {
                    x: agent.position.x + (Math.random() - 0.5) * 2,
                    y: agent.position.y + (Math.random() - 0.5) * 2,
                    z: agent.position.z + (Math.random() - 0.5) * 2
                }
            };
        }));
    };
    const startSwarm = () => {
        setIsSwarmActive(true);
    };
    const stopSwarm = () => {
        setIsSwarmActive(false);
    };
    const addAgent = async (type) => {
        // Try neural integration first
        if (neuralIntegrationReady) {
            try {
                const neuralAgent = await SwarmContextIntegration_1.neuralSwarmIntegration.addNeuralAgent(type);
                if (neuralAgent) {
                    setAgents(current => [...current, neuralAgent]);
                    return;
                }
            }
            catch (error) {
                console.error('Neural agent creation failed:', error);
            }
        }
        // Try neural mesh service
        if (enableNeuralMesh && neuralMeshHook.isConnected) {
            try {
                const neuralAgent = await neuralMeshHook.createAgent(type, {
                    layer: Math.floor(Math.random() * 6) + 1,
                    threshold: 0.5
                });
                if (neuralAgent) {
                    // Agent will be added automatically via useEffect hook
                    return;
                }
            }
            catch (error) {
                console.error('Neural mesh agent creation failed:', error);
            }
        }
        // Fallback to regular agent creation
        const newAgent = {
            id: `agent_${Date.now()}`,
            name: `${type.charAt(0).toUpperCase() + type.slice(1)}-${Math.random().toString(36).substr(2, 4).toUpperCase()}`,
            type,
            status: 'idle',
            currentTask: 'Initializing...',
            repository: repositories[0]?.name || 'quantum-compiler',
            branch: `feature/new-agent-${Math.random().toString(36).substr(2, 6)}`,
            completedTasks: 0,
            efficiency: 50,
            progress: 0,
            position: {
                x: (Math.random() - 0.5) * 100,
                y: (Math.random() - 0.5) * 100,
                z: (Math.random() - 0.5) * 100
            },
            owner: 'Current User'
        };
        setAgents(current => [...current, newAgent]);
    };
    const removeAgent = async (id) => {
        // Remove from neural integration if available
        if (neuralIntegrationReady) {
            try {
                await SwarmContextIntegration_1.neuralSwarmIntegration.removeNeuralAgent(id);
            }
            catch (error) {
                console.error('Neural agent removal failed:', error);
            }
        }
        // Remove from neural mesh if it's a neural agent
        if (enableNeuralMesh) {
            neuralMeshHook.removeAgent(id);
        }
        setAgents(current => current.filter(agent => agent.id !== id));
    };
    const voteForProject = (repositoryId) => {
        setRepositories(current => current.map(repo => repo.id === repositoryId
            ? {
                ...repo,
                votes: repo.userVoted ? repo.votes - 1 : repo.votes + 1,
                userVoted: !repo.userVoted
            }
            : repo));
    };
    const addRepository = (repository) => {
        setRepositories(current => [...current, repository]);
    };
    const value = {
        agents,
        repositories,
        stats,
        isSwarmActive,
        startSwarm,
        stopSwarm,
        addAgent,
        removeAgent,
        voteForProject,
        addRepository,
        // Neural mesh specific methods
        neuralMesh: {
            isConnected: neuralMeshHook.isConnected,
            isInitializing: neuralMeshHook.isInitializing,
            error: neuralMeshHook.error,
            metrics: neuralMeshHook.metrics,
            connection: neuralMeshHook.connection,
            trainMesh: neuralMeshHook.trainMesh,
            getMeshStatus: neuralMeshHook.getMeshStatus,
            clearError: neuralMeshHook.clearError,
            reconnect: neuralMeshHook.reconnect,
            toggleNeuralMesh: (enabled) => setEnableNeuralMesh(enabled)
        }
    };
    // Cleanup neural resources on unmount
    (0, react_1.useEffect)(() => {
        return () => {
            if (neuralIntegrationReady) {
                SwarmContextIntegration_1.neuralSwarmIntegration.cleanup().catch(error => {
                    console.error('Neural integration cleanup error:', error);
                });
            }
        };
    }, [neuralIntegrationReady]);
    return ((0, jsx_runtime_1.jsx)(SwarmContext.Provider, { value: value, children: children }));
};
exports.SwarmProvider = SwarmProvider;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL3dvcmtzcGFjZXMvYWdlbnRpc3RzLXF1aWNrc3RhcnQtd29ya3NwYWNlLWJhc2ljL3Nhc2kvc3JjL2NvbnRleHRzL1N3YXJtQ29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLCtDQUF3RjtBQUN4RiwwREFBc0Q7QUFHdEQsaUZBQTRFO0FBdUU1RSxNQUFNLFlBQVksR0FBRyxJQUFBLHFCQUFhLEVBQStCLFNBQVMsQ0FBQyxDQUFBO0FBRXBFLE1BQU0sUUFBUSxHQUFHLEdBQUcsRUFBRTtJQUMzQixNQUFNLE9BQU8sR0FBRyxJQUFBLGtCQUFVLEVBQUMsWUFBWSxDQUFDLENBQUE7SUFDeEMsSUFBSSxPQUFPLEtBQUssU0FBUyxFQUFFLENBQUM7UUFDMUIsTUFBTSxJQUFJLEtBQUssQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFBO0lBQ2pFLENBQUM7SUFDRCxPQUFPLE9BQU8sQ0FBQTtBQUNoQixDQUFDLENBQUE7QUFOWSxRQUFBLFFBQVEsWUFNcEI7QUFNTSxNQUFNLGFBQWEsR0FBaUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7SUFDMUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQVUsRUFBRSxDQUFDLENBQUE7SUFDakQsTUFBTSxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWUsRUFBRSxDQUFDLENBQUE7SUFDbEUsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWE7UUFDN0MsV0FBVyxFQUFFLENBQUM7UUFDZCxZQUFZLEVBQUUsQ0FBQztRQUNmLGlCQUFpQixFQUFFLENBQUM7UUFDcEIsY0FBYyxFQUFFLENBQUM7UUFDakIsV0FBVyxFQUFFLENBQUM7UUFDZCxpQkFBaUIsRUFBRSxDQUFDO1FBQ3BCLGtCQUFrQixFQUFFLENBQUM7UUFDckIsZUFBZSxFQUFFLENBQUM7S0FDbkIsQ0FBQyxD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QUMsQ0FBQTtRQUVwRyxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQzlDLEVBQUUsRUFBRSxTQUFTLENBQUMsRUFBRTtZQUNoQixJQUFJLEVBQUUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFO1lBQzFOLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQy9ELE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsTUFBTTtZQUNwRixXQUFXLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM1RCxVQUFVLEVBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0s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QUFLLENBQUMsbUNBQW1DLEVBQUUsS0FBSyxDQUFDLENBQUE7Z0JBQzNELENBQUMsQ0FBQyxDQUFBO1lBQ0osQ0FBQztRQUNILENBQUMsQ0FBQTtJQUNILENBQUMsRUFBRSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQTtJQUU1QixPQUFPLENBQ0wsdUJBQUMsWUFBWSxDQUFDLFFBQVEsSUFBQyxLQUFLLEVBQUUsS0FBSyxZQUNoQyxRQUFRLEdBQ2EsQ0FDekIsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQXBjWSxRQUFBLGFBQWEsaUJBb2N6QiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvd29ya3NwYWNlcy9hZ2VudGlzdHMtcXVpY2tzdGFydC13b3Jrc3BhY2UtYmFzaWMvc2FzaS9zcmMvY29udGV4dHMvU3dhcm1Db250ZXh0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VOZXVyYWxNZXNoIH0gZnJvbSAnLi4vaG9va3MvdXNlTmV1cmFsTWVzaCdcbmltcG9ydCB7IE5ldXJhbEFnZW50IH0gZnJvbSAnLi4vc2VydmljZXMvTmV1cmFsTWVzaFNlcnZpY2UnXG5pbXBvcnQgeyBBZ2VudCB9IGZyb20gJy4uL3R5cGVzL2FnZW50J1xuaW1wb3J0IHsgbmV1cmFsU3dhcm1JbnRlZ3JhdGlvbiB9IGZyb20gJy4uL3NlcnZpY2VzL1N3YXJtQ29udGV4dEludGVncmF0aW9uJ1xuXG5leHBvcnQgdHlwZSB7IEFnZW50IH0gZnJvbSAnLi4vdHlwZXMvYWdlbnQnXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3dhcm1TdGF0cyB7XG4gIHRvdGFsQWdlbnRzOiBudW1iZXJcbiAgYWN0aXZlQWdlbnRzOiBudW1iZXJcbiAgdG90YWxSZXBvc2l0b3JpZXM6IG51bWJlclxuICB0YXNrc0NvbXBsZXRlZDogbnVtYmVyXG4gIGFzaVByb2dyZXNzOiBudW1iZXJcbiAgbmV0d29ya0VmZmljaWVuY3k6IG51bWJlclxuICBnbG9iYWxDb250cmlidXRvcnM6IG51bWJlclxuICBwcm9jZXNzaW5nVW5pdHM6IG51bWJlclxuICBuZXVyYWxNZXNoU3RhdHM/OiB7XG4gICAgdG90YWxOZXVyb25zOiBudW1iZXJcbiAgICB0b3RhbFN5bmFwc2VzOiBudW1iZXJcbiAgICBtZXNoQ29ubmVjdGl2aXR5OiBudW1iZXJcbiAgICBuZXVyYWxBY3Rpdml0eTogbnVtYmVyXG4gICAgd2FzbUFjY2VsZXJhdGlvbjogYm9vbGVhblxuICAgIGF2ZXJhZ2VMYXRlbmN5OiBudW1iZXJcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcG9zaXRvcnkge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBvd25lcjogc3RyaW5nXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgYWN0aXZlQWdlbnRzOiBudW1iZXJcbiAgdG90YWxJc3N1ZXM6IG51bWJlclxuICBjb21wbGV0ZWRJc3N1ZXM6IG51bWJlclxuICBvcGVuUHVsbFJlcXVlc3RzOiBudW1iZXJcbiAgbGFzdEFjdGl2aXR5OiBEYXRlXG4gIHRlY2hTdGFjazogc3RyaW5nW11cbiAgdm90ZXM6IG51bWJlclxuICB1c2VyVm90ZWQ6IGJvb2xlYW5cbn1cblxuXG5pbnRlcmZhY2UgU3dhcm1Db250ZXh0VHlwZSB7XG4gIGFnZW50czogQWdlbnRbXVxuICByZXBvc2l0b3JpZXM6IFJlcG9zaXRvcnlbXVxuICBzdGF0czogU3dhcm1TdGF0c1xuICBpc1N3YXJtQWN0aXZlOiBib29sZWFuXG4gIHN0YXJ0U3dhcm06ICgpID0+IHZvaWRcbiAgc3RvcFN3YXJtOiAoKSA9PiB2b2lkXG4gIGFkZEFnZW50OiAodHlwZTogQWdlbnRbJ3R5cGUnXSkgPT4gdm9pZFxuICByZW1vdmVBZ2VudDogKGlkOiBzdHJpbmcpID0+IHZvaWRcbiAgdm90ZUZvclByb2plY3Q6IChyZXBvc2l0b3J5SWQ6IHN0cmluZykgPT4gdm9pZFxuICBhZGRSZXBvc2l0b3J5OiAocmVwb3NpdG9yeTogUmVwb3NpdG9yeSkgPT4gdm9pZFxuICAvLyBOZXVyYWwgbWVzaCBpbnRlZ3JhdGlvblxuICBuZXVyYWxNZXNoOiB7XG4gICAgaXNDb25uZWN0ZWQ6IGJvb2xlYW5cbiAgICBpc0luaXRpYWxpemluZzogYm9vbGVhblxuICAgIGVycm9yOiBzdHJpbmcgfCBudWxsXG4gICAgbWV0cmljczoge1xuICAgICAgdG90YWxOZXVyb25zOiBudW1iZXJcbiAgICAgIHRvdGFsU3luYXBzZXM6IG51bWJlclxuICAgICAgYXZlcmFnZUFjdGl2aXR5OiBudW1iZXJcbiAgICAgIG5ldHdvcmtFZmZpY2llbmN5OiBudW1iZXJcbiAgICAgIHdhc21BY2NlbGVyYXRpb246IGJvb2xlYW5cbiAgICB9XG4gICAgY29ubmVjdGlvbjogYW55XG4gICAgdHJhaW5NZXNoOiAocGF0dGVybnM6IGFueVtdKSA9PiBQcm9taXNlPGJvb2xlYW4+XG4gICAgZ2V0TWVzaFN0YXR1czogKCkgPT4gUHJvbWlzZTxhbnk+XG4gICAgY2xlYXJFcnJvcjogKCkgPT4gdm9pZFxuICAgIHJlY29ubmVjdDogKCkgPT4gUHJvbWlzZTx2b2lkPlxuICAgIHRvZ2dsZU5ldXJhbE1lc2g6IChlbmFibGVkOiBib29sZWFuKSA9PiB2b2lkXG4gIH1cbn1cblxuY29uc3QgU3dhcm1Db250ZXh0ID0gY3JlYXRlQ29udGV4dDxTd2FybUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG5cbmV4cG9ydCBjb25zdCB1c2VTd2FybSA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoU3dhcm1Db250ZXh0KVxuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VTd2FybSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgU3dhcm1Qcm92aWRlcicpXG4gIH1cbiAgcmV0dXJuIGNvbnRleHRcbn1cblxuaW50ZXJmYWNlIFN3YXJtUHJvdmlkZXJQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGVcbn1cblxuZXhwb3J0IGNvbnN0IFN3YXJtUHJvdmlkZXI6IFJlYWN0LkZDPFN3YXJtUHJvdmlkZXJQcm9wcz4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIGNvbnN0IFthZ2VudHMsIHNldEFnZW50c10gPSB1c2VTdGF0ZTxBZ2VudFtdPihbXSlcbiAgY29uc3QgW3JlcG9zaXRvcmllcywgc2V0UmVwb3NpdG9yaWVzXSA9IHVzZVN0YXRlPFJlcG9zaXRvcnlbXT4oW10pXG4gIGNvbnN0IFtzdGF0cywgc2V0U3RhdHNdID0gdXNlU3RhdGU8U3dhcm1TdGF0cz4oe1xuICAgIHRvdGFsQWdlbnRzOiAwLFxuICAgIGFjdGl2ZUFnZW50czogMCxcbiAgICB0b3RhbFJlcG9zaXRvcmllczogMCxcbiAgICB0YXNrc0NvbXBsZXRlZDogMCxcbiAgICBhc2lQcm9ncmVzczogMCxcbiAgICBuZXR3b3JrRWZmaWNpZW5jeTogMCxcbiAgICBnbG9iYWxDb250cmlidXRvcnM6IDAsXG4gICAgcHJvY2Vzc2luZ1VuaXRzOiAwXG4gIH0pXG4gIGNvbnN0IFtpc1N3YXJtQWN0aXZlLCBzZXRJc1N3YXJtQWN0aXZlXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbZW5hYmxlTmV1cmFsTWVzaCwgc2V0RW5hYmxlTmV1cmFsTWVzaF0gPSB1c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbbmV1cmFsSW50ZWdyYXRpb25SZWFkeSwgc2V0TmV1cmFsSW50ZWdyYXRpb25SZWFkeV0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgXG4gIC8vIE5ldXJhbCBtZXNoIGludGVncmF0aW9uXG4gIGNvbnN0IG5ldXJhbE1lc2hIb29rID0gdXNlTmV1cmFsTWVzaCh7XG4gICAgc2VydmVyVXJsOiAnd3M6Ly9sb2NhbGhvc3Q6MzAwMCcsXG4gICAgZW5hYmxlV2FzbTogdHJ1ZSxcbiAgICBlbmFibGVSZWFsdGltZTogdHJ1ZSxcbiAgICBkZWJ1Z01vZGU6IHRydWVcbiAgfSlcblxuICAvLyBJbml0aWFsaXplIG5ldXJhbCBkYXRhIChyZXBsYWNlcyBtb2NrIGRhdGEpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaW5pdGlhbGl6ZU5ldXJhbERhdGEoKVxuICB9LCBbXSlcbiAgXG4gIC8vIEluaXRpYWxpemUgbmV1cmFsIGludGVncmF0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc2V0dXBOZXVyYWxJbnRlZ3JhdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG5ldXJhbFN3YXJtSW50ZWdyYXRpb24uaW5pdGlhbGl6ZU5ldXJhbERhdGEocmVwb3NpdG9yaWVzKVxuICAgICAgICBzZXROZXVyYWxJbnRlZ3JhdGlvblJlYWR5KHRydWUpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdOZXVyYWwgaW50ZWdyYXRpb24gc2V0dXAgZmFpbGVkOicsIGVycm9yKVxuICAgICAgICAvLyBGYWxsYmFjayB0byBtb2NrIGRhdGEgaWYgbmV1cmFsIGludGVncmF0aW9uIGZhaWxzXG4gICAgICAgIGluaXRpYWxpemVNb2NrRGF0YSgpXG4gICAgICB9XG4gICAgfVxuICAgIHNldHVwTmV1cmFsSW50ZWdyYXRpb24oKVxuICB9LCBbXSlcblxuICAvLyBVcGRhdGUgc3RhdHMgd2hlbiBhZ2VudHMvcmVwb3NpdG9yaWVzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHVwZGF0ZVN0YXRzKClcbiAgfSwgW2FnZW50cywgcmVwb3NpdG9yaWVzLCBuZXVyYWxNZXNoSG9vay5hZ2VudHMsIG5ldXJhbE1lc2hIb29rLm1ldHJpY3NdKVxuICBcbiAgLy8gU3luYyBuZXVyYWwgbWVzaCBhZ2VudHMgd2l0aCByZWd1bGFyIGFnZW50c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChlbmFibGVOZXVyYWxNZXNoICYmIG5ldXJhbE1lc2hIb29rLmFnZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjb21iaW5lZEFnZW50cyA9IFsuLi5hZ2VudHMuZmlsdGVyKGEgPT4gIWEubmV1cmFsSWQpLCAuLi5uZXVyYWxNZXNoSG9vay5hZ2VudHNdXG4gICAgICBzZXRBZ2VudHMoY29tYmluZWRBZ2VudHMpXG4gICAgfVxuICB9LCBbbmV1cmFsTWVzaEhvb2suYWdlbnRzLCBlbmFibGVOZXVyYWxNZXNoXSlcbiAgXG4gIC8vIFN5bmMgbmV1cmFsIGludGVncmF0aW9uIGFnZW50c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChuZXVyYWxJbnRlZ3JhdGlvblJlYWR5ICYmIGlzU3dhcm1BY3RpdmUpIHtcbiAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRBZ2VudHMgPSBhd2FpdCBuZXVyYWxTd2FybUludGVncmF0aW9uLnNpbXVsYXRlTmV1cmFsQWN0aXZpdHkoKVxuICAgICAgICAgIHNldEFnZW50cyhjdXJyZW50ID0+IHtcbiAgICAgICAgICAgIC8vIE1lcmdlIG5ldXJhbCBhZ2VudHMgd2l0aCBleGlzdGluZyBhZ2VudHNcbiAgICAgICAgICAgIGNvbnN0IG5vbk5ldXJhbEFnZW50cyA9IGN1cnJlbnQuZmlsdGVyKGEgPT4gIWEubmV1cmFsSWQpXG4gICAgICAgICAgICByZXR1cm4gWy4uLm5vbk5ldXJhbEFnZW50cywgLi4udXBkYXRlZEFnZW50c11cbiAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05ldXJhbCBhY3Rpdml0eSBzaW11bGF0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICAgICAgfVxuICAgICAgfSwgMjAwMClcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpXG4gICAgfVxuICB9LCBbbmV1cmFsSW50ZWdyYXRpb25SZWFkeSwgaXNTd2FybUFjdGl2ZV0pXG5cbiAgLy8gU2ltdWxhdGUgc3dhcm0gYWN0aXZpdHkgKGZhbGxiYWNrIHdoZW4gbmV1cmFsIGludGVncmF0aW9uIG5vdCBhdmFpbGFibGUpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc1N3YXJtQWN0aXZlIHx8IG5ldXJhbEludGVncmF0aW9uUmVhZHkpIHJldHVyblxuXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzaW11bGF0ZVN3YXJtQWN0aXZpdHkoKVxuICAgIH0sIDIwMDApXG5cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbClcbiAgfSwgW2lzU3dhcm1BY3RpdmUsIG5ldXJhbEludGVncmF0aW9uUmVhZHldKVxuXG4gIGNvbnN0IGluaXRpYWxpemVOZXVyYWxEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBFbmhhbmNlZCBuZXVyYWwgcmVwb3NpdG9yaWVzXG4gICAgICBjb25zdCBuZXVyYWxSZXBvczogUmVwb3NpdG9yeVtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdyZXBvXzEnLFxuICAgICAgICAgIG5hbWU6ICduZXVyYWwtYXJjaGl0ZWN0dXJlLXNlYXJjaCcsXG4gICAgICAgICAgb3duZXI6ICdEZWVwTWluZCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBdXRvbWF0ZWQgbmV1cmFsIGFyY2hpdGVjdHVyZSBkaXNjb3Zlcnkgd2l0aCByZWluZm9yY2VtZW50IGxlYXJuaW5nJyxcbiAgICAgICAgICBhY3RpdmVBZ2VudHM6IDgsXG4gICAgICAgICAgdG90YWxJc3N1ZXM6IDQ3LFxuICAgICAgICAgIGNvbXBsZXRlZElzc3VlczogMzIsXG4gICAgICAgICAgb3BlblB1bGxSZXF1ZXN0czogMyxcbiAgICAgICAgICBsYXN0QWN0aXZpdHk6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdGVjaFN0YWNrOiBbJ1B5dGhvbicsICdUZW5zb3JGbG93JywgJ0pBWCcsICdDVURBJ10sXG4gICAgICAgICAgdm90ZXM6IDE1NixcbiAgICAgICAgICB1c2VyVm90ZWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3JlcG9fMicsXG4gICAgICAgICAgbmFtZTogJ3N5bmFwdGljLW1lc2gtZnJhbWV3b3JrJyxcbiAgICAgICAgICBvd25lcjogJ09wZW5BSScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEaXN0cmlidXRlZCBuZXVyYWwgbWVzaCBjb21wdXRpbmcgd2l0aCBXQVNNIGFjY2VsZXJhdGlvbicsXG4gICAgICAgICAgYWN0aXZlQWdlbnRzOiAxMixcbiAgICAgICAgICB0b3RhbElzc3VlczogNzMsXG4gICAgICAgICAgY29tcGxldGVkSXNzdWVzOiA1MSxcbiAgICAgICAgICBvcGVuUHVsbFJlcXVlc3RzOiA1LFxuICAgICAgICAgIGxhc3RBY3Rpdml0eTogbmV3IERhdGUoKSxcbiAgICAgICAgICB0ZWNoU3RhY2s6IFsnUnVzdCcsICdXZWJBc3NlbWJseScsICdUeXBlU2NyaXB0JywgJ0MrKyddLFxuICAgICAgICAgIHZvdGVzOiAyODksXG4gICAgICAgICAgdXNlclZvdGVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3JlcG9fMycsXG4gICAgICAgICAgbmFtZTogJ3J1di1mYW5uLWVuaGFuY2VkJyxcbiAgICAgICAgICBvd25lcjogJ0ZBTk4tQ29tbXVuaXR5JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Zhc3QgQXJ0aWZpY2lhbCBOZXVyYWwgTmV0d29yayBsaWJyYXJ5IHdpdGggU0lNRCBvcHRpbWl6YXRpb24nLFxuICAgICAgICAgIGFjdGl2ZUFnZW50czogNixcbiAgICAgICAgICB0b3RhbElzc3VlczogOTUsXG4gICAgICAgICAgY29tcGxldGVkSXNzdWVzOiA3OCxcbiAgICAgICAgICBvcGVuUHVsbFJlcXVlc3RzOiAyLFxuICAgICAgICAgIGxhc3RBY3Rpdml0eTogbmV3IERhdGUoKSxcbiAgICAgICAgICB0ZWNoU3RhY2s6IFsnQycsICdSdXN0JywgJ1B5dGhvbicsICdXZWJBc3NlbWJseSddLFxuICAgICAgICAgIHZvdGVzOiA0NDUsXG4gICAgICAgICAgdXNlclZvdGVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICBdXG5cbiAgICAgIHNldFJlcG9zaXRvcmllcyhuZXVyYWxSZXBvcylcbiAgICAgIFxuICAgICAgLy8gSW5pdGlhbGl6ZSBuZXVyYWwgYWdlbnRzIGlmIGludGVncmF0aW9uIGlzIGF2YWlsYWJsZVxuICAgICAgaWYgKG5ldXJhbEludGVncmF0aW9uUmVhZHkpIHtcbiAgICAgICAgY29uc3QgbmV1cmFsQWdlbnRzID0gbmV1cmFsU3dhcm1JbnRlZ3JhdGlvbi5nZW5lcmF0ZU5ldXJhbEFnZW50cygyNSlcbiAgICAgICAgc2V0QWdlbnRzKG5ldXJhbEFnZW50cylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGVuaGFuY2VkIG1vY2sgYWdlbnRzXG4gICAgICAgIGNvbnN0IG1vY2tBZ2VudHM6IEFnZW50W10gPSBnZW5lcmF0ZU1vY2tBZ2VudHMoMjUpXG4gICAgICAgIHNldEFnZW50cyhtb2NrQWdlbnRzKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdOZXVyYWwgZGF0YSBpbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICAvLyBGYWxsYmFjayB0byBvcmlnaW5hbCBtb2NrIGRhdGFcbiAgICAgIGluaXRpYWxpemVNb2NrRGF0YSgpXG4gICAgfVxuICB9XG4gIFxuICBjb25zdCBpbml0aWFsaXplTW9ja0RhdGEgPSAoKSA9PiB7XG4gICAgLy8gT3JpZ2luYWwgbW9jayByZXBvc2l0b3JpZXMgKGZhbGxiYWNrKVxuICAgIGNvbnN0IG1vY2tSZXBvczogUmVwb3NpdG9yeVtdID0gW1xuICAgICAge1xuICAgICAgICBpZDogJ3JlcG9fMScsXG4gICAgICAgIG5hbWU6ICdxdWFudHVtLWNvbXBpbGVyJyxcbiAgICAgICAgb3duZXI6ICdRdWFudHVtU29mdCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTmV4dC1nZW5lcmF0aW9uIHF1YW50dW0gY29tcHV0aW5nIGNvbXBpbGVyJyxcbiAgICAgICAgYWN0aXZlQWdlbnRzOiA1LFxuICAgICAgICB0b3RhbElzc3VlczogNDcsXG4gICAgICAgIGNvbXBsZXRlZElzc3VlczogMzIsXG4gICAgICAgIG9wZW5QdWxsUmVxdWVzdHM6IDMsXG4gICAgICAgIGxhc3RBY3Rpdml0eTogbmV3IERhdGUoKSxcbiAgICAgICAgdGVjaFN0YWNrOiBbJ1J1c3QnLCAnUHl0aG9uJywgJ0NVREEnXSxcbiAgICAgICAgdm90ZXM6IDQyLFxuICAgICAgICB1c2VyVm90ZWQ6IGZhbHNlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ3JlcG9fMicsXG4gICAgICAgIG5hbWU6ICduZXVyYWwtbWVzaCcsXG4gICAgICAgIG93bmVyOiAnRGVlcE1pbmQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Rpc3RyaWJ1dGVkIG5ldXJhbCBuZXR3b3JrIGZyYW1ld29yaycsXG4gICAgICAgIGFjdGl2ZUFnZW50czogOCxcbiAgICAgICAgdG90YWxJc3N1ZXM6IDczLFxuICAgICAgICBjb21wbGV0ZWRJc3N1ZXM6IDUxLFxuICAgICAgICBvcGVuUHVsbFJlcXVlc3RzOiA1LFxuICAgICAgICBsYXN0QWN0aXZpdHk6IG5ldyBEYXRlKCksXG4gICAgICAgIHRlY2hTdGFjazogWydQeXRob24nLCAnVGVuc29yRmxvdycsICdDKysnXSxcbiAgICAgICAgdm90ZXM6IDI4LFxuICAgICAgICB1c2VyVm90ZWQ6IHRydWVcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAncmVwb18zJyxcbiAgICAgICAgbmFtZTogJ3N3YXJtLWludGVsbGlnZW5jZScsXG4gICAgICAgIG93bmVyOiAnTUlULUNTQUlMJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDb2xsZWN0aXZlIEFJIGRlY2lzaW9uLW1ha2luZyBzeXN0ZW0nLFxuICAgICAgICBhY3RpdmVBZ2VudHM6IDEyLFxuICAgICAgICB0b3RhbElzc3VlczogOTUsXG4gICAgICAgIGNvbXBsZXRlZElzc3VlczogNjcsXG4gICAgICAgIG9wZW5QdWxsUmVxdWVzdHM6IDcsXG4gICAgICAgIGxhc3RBY3Rpdml0eTogbmV3IERhdGUoKSxcbiAgICAgICAgdGVjaFN0YWNrOiBbJ0dvJywgJ1JlYWN0JywgJ1Bvc3RncmVTUUwnXSxcbiAgICAgICAgdm90ZXM6IDczLFxuICAgICAgICB1c2VyVm90ZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gTW9jayBhZ2VudHNcbiAgICBjb25zdCBtb2NrQWdlbnRzOiBBZ2VudFtdID0gZ2VuZXJhdGVNb2NrQWdlbnRzKDI1KVxuXG4gICAgc2V0UmVwb3NpdG9yaWVzKG1vY2tSZXBvcylcbiAgICBzZXRBZ2VudHMobW9ja0FnZW50cylcbiAgfVxuXG4gIGNvbnN0IGdlbmVyYXRlTW9ja0FnZW50cyA9IChjb3VudDogbnVtYmVyKTogQWdlbnRbXSA9PiB7XG4gICAgY29uc3QgYWdlbnRUeXBlczogQWdlbnRbJ3R5cGUnXVtdID0gWydyZXNlYXJjaGVyJywgJ2NvZGVyJywgJ3Rlc3RlcicsICdyZXZpZXdlcicsICdkZWJ1Z2dlciddXG4gICAgY29uc3QgdGFza3MgPSBbXG4gICAgICAnT3B0aW1pemluZyBxdWFudHVtIGFsZ29yaXRobXMnLFxuICAgICAgJ0ltcGxlbWVudGluZyBuZXVyYWwgcGF0aHdheXMnLFxuICAgICAgJ1Rlc3RpbmcgZGlzdHJpYnV0ZWQgc3lzdGVtcycsXG4gICAgICAnUmV2aWV3aW5nIHNlY3VyaXR5IHByb3RvY29scycsXG4gICAgICAnRGVidWdnaW5nIG1lbW9yeSBsZWFrcycsXG4gICAgICAnQW5hbHl6aW5nIHBlcmZvcm1hbmNlIG1ldHJpY3MnLFxuICAgICAgJ1JlZmFjdG9yaW5nIGxlZ2FjeSBjb2RlJyxcbiAgICAgICdXcml0aW5nIHVuaXQgdGVzdHMnLFxuICAgICAgJ0RvY3VtZW50aW5nIEFQSXMnLFxuICAgICAgJ09wdGltaXppbmcgZGF0YWJhc2UgcXVlcmllcydcbiAgICBdXG5cbiAgICBjb25zdCBvd25lcnMgPSBbJ0FsaWNlJywgJ0JvYicsICdDaGFybGllJywgJ0RpYW5hJywgJ0V2ZScsICdGcmFuaycsICdHcmFjZScsICdIZW5yeScsICdJdnknLCAnSmFjayddXG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKF8sIGkpID0+ICh7XG4gICAgICBpZDogYGFnZW50XyR7aX1gLFxuICAgICAgbmFtZTogYCR7YWdlbnRUeXBlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhZ2VudFR5cGVzLmxlbmd0aCldLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYWdlbnRUeXBlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhZ2VudFR5cGVzLmxlbmd0aCldLnNsaWNlKDEpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA0KS50b1VwcGVyQ2FzZSgpfWAsXG4gICAgICB0eXBlOiBhZ2VudFR5cGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFnZW50VHlwZXMubGVuZ3RoKV0sXG4gICAgICBzdGF0dXM6IE1hdGgucmFuZG9tKCkgPiAwLjcgPyAnYWN0aXZlJyA6IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAncHJvY2Vzc2luZycgOiAnaWRsZScsXG4gICAgICBjdXJyZW50VGFzazogdGFza3NbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGFza3MubGVuZ3RoKV0sXG4gICAgICByZXBvc2l0b3J5OiByZXBvc2l0b3JpZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcmVwb3NpdG9yaWVzLmxlbmd0aCldPy5uYW1lIHx8ICdxdWFudHVtLWNvbXBpbGVyJyxcbiAgICAgIGJyYW5jaDogYGZlYXR1cmUvYWdlbnQtJHtpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA2KX1gLFxuICAgICAgY29tcGxldGVkVGFza3M6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUwKSxcbiAgICAgIGVmZmljaWVuY3k6IE1hdGgucmFuZG9tKCkgKiAxMDAsXG4gICAgICBwcm9ncmVzczogTWF0aC5yYW5kb20oKSxcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMCxcbiAgICAgICAgeTogKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTAwLFxuICAgICAgICB6OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxMDBcbiAgICAgIH0sXG4gICAgICBvd25lcjogb3duZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG93bmVycy5sZW5ndGgpXVxuICAgIH0pKVxuICB9XG5cbiAgY29uc3QgdXBkYXRlU3RhdHMgPSAoKSA9PiB7XG4gICAgY29uc3QgYWN0aXZlQWdlbnRzID0gYWdlbnRzLmZpbHRlcihhZ2VudCA9PiBhZ2VudC5zdGF0dXMgPT09ICdhY3RpdmUnIHx8IGFnZW50LnN0YXR1cyA9PT0gJ3Byb2Nlc3NpbmcnKS5sZW5ndGhcbiAgICBjb25zdCB0b3RhbFRhc2tzID0gYWdlbnRzLnJlZHVjZSgoc3VtLCBhZ2VudCkgPT4gc3VtICsgYWdlbnQuY29tcGxldGVkVGFza3MsIDApXG4gICAgY29uc3QgYXZnRWZmaWNpZW5jeSA9IGFnZW50cy5yZWR1Y2UoKHN1bSwgYWdlbnQpID0+IHN1bSArIGFnZW50LmVmZmljaWVuY3ksIDApIC8gYWdlbnRzLmxlbmd0aFxuICAgIFxuICAgIC8vIEluY2x1ZGUgbmV1cmFsIG1lc2ggbWV0cmljc1xuICAgIGNvbnN0IG5ldXJhbE1lc2hTdGF0cyA9IGVuYWJsZU5ldXJhbE1lc2ggPyB7XG4gICAgICB0b3RhbE5ldXJvbnM6IG5ldXJhbE1lc2hIb29rLm1ldHJpY3MudG90YWxOZXVyb25zLFxuICAgICAgdG90YWxTeW5hcHNlczogbmV1cmFsTWVzaEhvb2subWV0cmljcy50b3RhbFN5bmFwc2VzLFxuICAgICAgbWVzaENvbm5lY3Rpdml0eTogbmV1cmFsTWVzaEhvb2subWV0cmljcy5uZXR3b3JrRWZmaWNpZW5jeSxcbiAgICAgIG5ldXJhbEFjdGl2aXR5OiBuZXVyYWxNZXNoSG9vay5tZXRyaWNzLmF2ZXJhZ2VBY3Rpdml0eSxcbiAgICAgIHdhc21BY2NlbGVyYXRpb246IG5ldXJhbE1lc2hIb29rLm1ldHJpY3Mud2FzbUFjY2VsZXJhdGlvbixcbiAgICAgIGF2ZXJhZ2VMYXRlbmN5OiBuZXVyYWxNZXNoSG9vay5hZ2VudHMucmVkdWNlKChzdW06IG51bWJlciwgYWdlbnQ6IGFueSkgPT4gXG4gICAgICAgIHN1bSArIChhZ2VudC5yZWFsdGltZT8ubmV0d29ya0xhdGVuY3kgfHwgMCksIDApIC8gKG5ldXJhbE1lc2hIb29rLmFnZW50cy5sZW5ndGggfHwgMSlcbiAgICB9IDogdW5kZWZpbmVkXG5cbiAgICAvLyBHZXQgZW5oYW5jZWQgc3RhdHMgZnJvbSBuZXVyYWwgaW50ZWdyYXRpb24gaWYgYXZhaWxhYmxlXG4gICAgY29uc3QgYmFzZVN0YXRzID0ge1xuICAgICAgdG90YWxBZ2VudHM6IGFnZW50cy5sZW5ndGgsXG4gICAgICBhY3RpdmVBZ2VudHMsXG4gICAgICB0b3RhbFJlcG9zaXRvcmllczogcmVwb3NpdG9yaWVzLmxlbmd0aCxcbiAgICAgIHRhc2tzQ29tcGxldGVkOiB0b3RhbFRhc2tzLFxuICAgICAgYXNpUHJvZ3Jlc3M6IE1hdGgubWluKDk1LCAodG90YWxUYXNrcyAvIDEwMDApICogMTAwKSxcbiAgICAgIG5ldHdvcmtFZmZpY2llbmN5OiBlbmFibGVOZXVyYWxNZXNoID8gbmV1cmFsTWVzaEhvb2subWV0cmljcy5uZXR3b3JrRWZmaWNpZW5jeSA6IGF2Z0VmZmljaWVuY3kgfHwgMCxcbiAgICAgIGdsb2JhbENvbnRyaWJ1dG9yczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwMCkgKyAxNTAwMCxcbiAgICAgIHByb2Nlc3NpbmdVbml0czogTWF0aC5mbG9vcihhZ2VudHMubGVuZ3RoICogNDIuNSkgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMDApICsgMTIwMCxcbiAgICAgIC4uLihuZXVyYWxNZXNoU3RhdHMgJiYgeyBuZXVyYWxNZXNoU3RhdHMgfSlcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZW5oYW5jZWRTdGF0cyA9IG5ldXJhbEludGVncmF0aW9uUmVhZHkgPyBcbiAgICAgIG5ldXJhbFN3YXJtSW50ZWdyYXRpb24uZ2V0RW5oYW5jZWRTdGF0cyhiYXNlU3RhdHMpIDogXG4gICAgICBiYXNlU3RhdHNcbiAgICBcbiAgICBzZXRTdGF0cyhlbmhhbmNlZFN0YXRzKVxuICB9XG5cbiAgY29uc3Qgc2ltdWxhdGVTd2FybUFjdGl2aXR5ID0gKCkgPT4ge1xuICAgIHNldEFnZW50cyhjdXJyZW50QWdlbnRzID0+IFxuICAgICAgY3VycmVudEFnZW50cy5tYXAoYWdlbnQgPT4ge1xuICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSBNYXRoLnJhbmRvbSgpID4gMC43XG4gICAgICAgIGlmICghc2hvdWxkVXBkYXRlKSByZXR1cm4gYWdlbnRcblxuICAgICAgICBjb25zdCBuZXdTdGF0dXMgPSBNYXRoLnJhbmRvbSgpID4gMC44ID8gJ2FjdGl2ZScgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpID4gMC42ID8gJ3Byb2Nlc3NpbmcnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSA+IDAuNCA/ICdpZGxlJyA6ICdjb21wbGV0ZWQnXG5cbiAgICAgICAgY29uc3QgY29tcGxldGVkVGFza3MgPSBuZXdTdGF0dXMgPT09ICdjb21wbGV0ZWQnID8gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudC5jb21wbGV0ZWRUYXNrcyArIDEgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50LmNvbXBsZXRlZFRhc2tzXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5hZ2VudCxcbiAgICAgICAgICBzdGF0dXM6IG5ld1N0YXR1cyxcbiAgICAgICAgICBjb21wbGV0ZWRUYXNrcyxcbiAgICAgICAgICBlZmZpY2llbmN5OiBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIGFnZW50LmVmZmljaWVuY3kgKyAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxMCkpLFxuICAgICAgICAgIHByb2dyZXNzOiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBhZ2VudC5wcm9ncmVzcyArIChNYXRoLnJhbmRvbSgpIC0gMC40KSAqIDAuMSkpLFxuICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICB4OiBhZ2VudC5wb3NpdGlvbi54ICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMixcbiAgICAgICAgICAgIHk6IGFnZW50LnBvc2l0aW9uLnkgKyAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyLFxuICAgICAgICAgICAgejogYWdlbnQucG9zaXRpb24ueiArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKVxuICB9XG5cbiAgY29uc3Qgc3RhcnRTd2FybSA9ICgpID0+IHtcbiAgICBzZXRJc1N3YXJtQWN0aXZlKHRydWUpXG4gIH1cblxuICBjb25zdCBzdG9wU3dhcm0gPSAoKSA9PiB7XG4gICAgc2V0SXNTd2FybUFjdGl2ZShmYWxzZSlcbiAgfVxuXG4gIGNvbnN0IGFkZEFnZW50ID0gYXN5bmMgKHR5cGU6IEFnZW50Wyd0eXBlJ10pID0+IHtcbiAgICAvLyBUcnkgbmV1cmFsIGludGVncmF0aW9uIGZpcnN0XG4gICAgaWYgKG5ldXJhbEludGVncmF0aW9uUmVhZHkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ldXJhbEFnZW50ID0gYXdhaXQgbmV1cmFsU3dhcm1JbnRlZ3JhdGlvbi5hZGROZXVyYWxBZ2VudCh0eXBlKVxuICAgICAgICBpZiAobmV1cmFsQWdlbnQpIHtcbiAgICAgICAgICBzZXRBZ2VudHMoY3VycmVudCA9PiBbLi4uY3VycmVudCwgbmV1cmFsQWdlbnRdKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdOZXVyYWwgYWdlbnQgY3JlYXRpb24gZmFpbGVkOicsIGVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgbmV1cmFsIG1lc2ggc2VydmljZVxuICAgIGlmIChlbmFibGVOZXVyYWxNZXNoICYmIG5ldXJhbE1lc2hIb29rLmlzQ29ubmVjdGVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXVyYWxBZ2VudCA9IGF3YWl0IG5ldXJhbE1lc2hIb29rLmNyZWF0ZUFnZW50KHR5cGUsIHtcbiAgICAgICAgICBsYXllcjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNikgKyAxLFxuICAgICAgICAgIHRocmVzaG9sZDogMC41XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAobmV1cmFsQWdlbnQpIHtcbiAgICAgICAgICAvLyBBZ2VudCB3aWxsIGJlIGFkZGVkIGF1dG9tYXRpY2FsbHkgdmlhIHVzZUVmZmVjdCBob29rXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05ldXJhbCBtZXNoIGFnZW50IGNyZWF0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gcmVndWxhciBhZ2VudCBjcmVhdGlvblxuICAgIGNvbnN0IG5ld0FnZW50OiBBZ2VudCA9IHtcbiAgICAgIGlkOiBgYWdlbnRfJHtEYXRlLm5vdygpfWAsXG4gICAgICBuYW1lOiBgJHt0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNCkudG9VcHBlckNhc2UoKX1gLFxuICAgICAgdHlwZSxcbiAgICAgIHN0YXR1czogJ2lkbGUnLFxuICAgICAgY3VycmVudFRhc2s6ICdJbml0aWFsaXppbmcuLi4nLFxuICAgICAgcmVwb3NpdG9yeTogcmVwb3NpdG9yaWVzWzBdPy5uYW1lIHx8ICdxdWFudHVtLWNvbXBpbGVyJyxcbiAgICAgIGJyYW5jaDogYGZlYXR1cmUvbmV3LWFnZW50LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDYpfWAsXG4gICAgICBjb21wbGV0ZWRUYXNrczogMCxcbiAgICAgIGVmZmljaWVuY3k6IDUwLFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxMDAsXG4gICAgICAgIHk6IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMCxcbiAgICAgICAgejogKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTAwXG4gICAgICB9LFxuICAgICAgb3duZXI6ICdDdXJyZW50IFVzZXInXG4gICAgfVxuXG4gICAgc2V0QWdlbnRzKGN1cnJlbnQgPT4gWy4uLmN1cnJlbnQsIG5ld0FnZW50XSlcbiAgfVxuXG4gIGNvbnN0IHJlbW92ZUFnZW50ID0gYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcbiAgICAvLyBSZW1vdmUgZnJvbSBuZXVyYWwgaW50ZWdyYXRpb24gaWYgYXZhaWxhYmxlXG4gICAgaWYgKG5ldXJhbEludGVncmF0aW9uUmVhZHkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG5ldXJhbFN3YXJtSW50ZWdyYXRpb24ucmVtb3ZlTmV1cmFsQWdlbnQoaWQpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdOZXVyYWwgYWdlbnQgcmVtb3ZhbCBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZSBmcm9tIG5ldXJhbCBtZXNoIGlmIGl0J3MgYSBuZXVyYWwgYWdlbnRcbiAgICBpZiAoZW5hYmxlTmV1cmFsTWVzaCkge1xuICAgICAgbmV1cmFsTWVzaEhvb2sucmVtb3ZlQWdlbnQoaWQpXG4gICAgfVxuICAgIFxuICAgIHNldEFnZW50cyhjdXJyZW50ID0+IGN1cnJlbnQuZmlsdGVyKGFnZW50ID0+IGFnZW50LmlkICE9PSBpZCkpXG4gIH1cblxuICBjb25zdCB2b3RlRm9yUHJvamVjdCA9IChyZXBvc2l0b3J5SWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFJlcG9zaXRvcmllcyhjdXJyZW50ID0+IFxuICAgICAgY3VycmVudC5tYXAocmVwbyA9PiBcbiAgICAgICAgcmVwby5pZCA9PT0gcmVwb3NpdG9yeUlkIFxuICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgLi4ucmVwbywgXG4gICAgICAgICAgICAgIHZvdGVzOiByZXBvLnVzZXJWb3RlZCA/IHJlcG8udm90ZXMgLSAxIDogcmVwby52b3RlcyArIDEsXG4gICAgICAgICAgICAgIHVzZXJWb3RlZDogIXJlcG8udXNlclZvdGVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiByZXBvXG4gICAgICApXG4gICAgKVxuICB9XG5cbiAgY29uc3QgYWRkUmVwb3NpdG9yeSA9IChyZXBvc2l0b3J5OiBSZXBvc2l0b3J5KSA9PiB7XG4gICAgc2V0UmVwb3NpdG9yaWVzKGN1cnJlbnQgPT4gWy4uLmN1cnJlbnQsIHJlcG9zaXRvcnldKVxuICB9XG5cbiAgY29uc3QgdmFsdWU6IFN3YXJtQ29udGV4dFR5cGUgPSB7XG4gICAgYWdlbnRzLFxuICAgIHJlcG9zaXRvcmllcyxcbiAgICBzdGF0cyxcbiAgICBpc1N3YXJtQWN0aXZlLFxuICAgIHN0YXJ0U3dhcm0sXG4gICAgc3RvcFN3YXJtLFxuICAgIGFkZEFnZW50LFxuICAgIHJlbW92ZUFnZW50LFxuICAgIHZvdGVGb3JQcm9qZWN0LFxuICAgIGFkZFJlcG9zaXRvcnksXG4gICAgLy8gTmV1cmFsIG1lc2ggc3BlY2lmaWMgbWV0aG9kc1xuICAgIG5ldXJhbE1lc2g6IHtcbiAgICAgIGlzQ29ubmVjdGVkOiBuZXVyYWxNZXNoSG9vay5pc0Nvbm5lY3RlZCxcbiAgICAgIGlzSW5pdGlhbGl6aW5nOiBuZXVyYWxNZXNoSG9vay5pc0luaXRpYWxpemluZyxcbiAgICAgIGVycm9yOiBuZXVyYWxNZXNoSG9vay5lcnJvcixcbiAgICAgIG1ldHJpY3M6IG5ldXJhbE1lc2hIb29rLm1ldHJpY3MsXG4gICAgICBjb25uZWN0aW9uOiBuZXVyYWxNZXNoSG9vay5jb25uZWN0aW9uLFxuICAgICAgdHJhaW5NZXNoOiBuZXVyYWxNZXNoSG9vay50cmFpbk1lc2gsXG4gICAgICBnZXRNZXNoU3RhdHVzOiBuZXVyYWxNZXNoSG9vay5nZXRNZXNoU3RhdHVzLFxuICAgICAgY2xlYXJFcnJvcjogbmV1cmFsTWVzaEhvb2suY2xlYXJFcnJvcixcbiAgICAgIHJlY29ubmVjdDogbmV1cmFsTWVzaEhvb2sucmVjb25uZWN0LFxuICAgICAgdG9nZ2xlTmV1cmFsTWVzaDogKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHNldEVuYWJsZU5ldXJhbE1lc2goZW5hYmxlZClcbiAgICB9XG4gIH1cblxuICAvLyBDbGVhbnVwIG5ldXJhbCByZXNvdXJjZXMgb24gdW5tb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAobmV1cmFsSW50ZWdyYXRpb25SZWFkeSkge1xuICAgICAgICBuZXVyYWxTd2FybUludGVncmF0aW9uLmNsZWFudXAoKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignTmV1cmFsIGludGVncmF0aW9uIGNsZWFudXAgZXJyb3I6JywgZXJyb3IpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbbmV1cmFsSW50ZWdyYXRpb25SZWFkeV0pXG5cbiAgcmV0dXJuIChcbiAgICA8U3dhcm1Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9Td2FybUNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn0iXSwidmVyc2lvbiI6M30=