1c7bde56bd4028c66bb0784a864197a1
"use strict";
/**
 * Comprehensive Unit Tests for NeuralMeshService
 * Target: 95%+ coverage for neural mesh operations
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock dependencies
jest.mock('../../../src/utils/WasmBridge');
jest.mock('../../../src/persistence/AgentPersistenceManager');
const events_1 = require("events");
const NeuralMeshService_1 = require("../../../src/services/NeuralMeshService");
// Mock performance for testing
global.performance = {
    now: jest.fn(() => Date.now())
};
describe('NeuralMeshService - Comprehensive Unit Tests', () => {
    let meshService;
    let mockConfig;
    beforeEach(() => {
        jest.clearAllMocks();
        mockConfig = {
            maxNodes: 100,
            connectionThreshold: 0.1,
            learningRate: 0.001,
            decayRate: 0.99,
            activationFunction: 'tanh',
            updateInterval: 100,
            persistentConnections: true,
            autoOptimize: true
        };
        meshService = new NeuralMeshService_1.NeuralMeshService(mockConfig);
    });
    afterEach(async () => {
        if (meshService) {
            await meshService.shutdown();
        }
    });
    describe('Initialization', () => {
        test('should initialize with default configuration', () => {
            const defaultService = new NeuralMeshService_1.NeuralMeshService();
            expect(defaultService).toBeDefined();
            expect(defaultService).toBeInstanceOf(events_1.EventEmitter);
        });
        test('should initialize with custom configuration', () => {
            const customConfig = {
                maxNodes: 50,
                learningRate: 0.002,
                activationFunction: 'relu'
            };
            const customService = new NeuralMeshService_1.NeuralMeshService(customConfig);
            expect(customService).toBeDefined();
        });
        test('should initialize successfully', async () => {
            await expect(meshService.initialize()).resolves.not.toThrow();
            expect(meshService.isInitialized()).toBe(true);
        });
        test('should emit initialized event', (done) => {
            meshService.on('initialized', (event) => {
                expect(event.timestamp).toBeDefined();
                expect(event.config).toBeDefined();
                done();
            });
            meshService.initialize();
        });
        test('should handle initialization errors', async () => {
            // Mock initialization failure
            jest.spyOn(meshService, 'initializeWASM').mockRejectedValue(new Error('WASM failed'));
            await expect(meshService.initialize()).rejects.toThrow();
        });
    });
    describe('Node Management', () => {
        beforeEach(async () => {
            await meshService.initialize();
        });
        test('should add nodes successfully', async () => {
            const nodeConfig = {
                id: 'node-1',
                type: 'processor',
                activationFunction: 'tanh',
                threshold: 0.5
            };
            const nodeId = await meshService.addNode(nodeConfig);
            expect(nodeId).toBe('node-1');
            expect(meshService.getNodeCount()).toBe(1);
        });
        test('should generate node ID when not provided', async () => {
            const nodeConfig = {
                type: 'processor',
                activationFunction: 'relu'
            };
            const nodeId = await meshService.addNode(nodeConfig);
            expect(nodeId).toBeDefined();
            expect(typeof nodeId).toBe('string');
            expect(meshService.getNodeCount()).toBe(1);
        });
        test('should reject duplicate node IDs', async () => {
            const nodeConfig = {
                id: 'duplicate-node',
                type: 'processor'
            };
            await meshService.addNode(nodeConfig);
            await expect(meshService.addNode(nodeConfig))
                .rejects.toThrow('Node with ID duplicate-node already exists');
        });
        test('should remove nodes successfully', async () => {
            const nodeConfig = { id: 'removable-node', type: 'processor' };
            await meshService.addNode(nodeConfig);
            expect(meshService.getNodeCount()).toBe(1);
            await meshService.removeNode('removable-node');
            expect(meshService.getNodeCount()).toBe(0);
        });
        test('should handle removing non-existent nodes gracefully', async () => {
            await expect(meshService.removeNode('non-existent'))
                .resolves.not.toThrow();
        });
        test('should reject exceeding max nodes limit', async () => {
            const smallMeshService = new NeuralMeshService_1.NeuralMeshService({ maxNodes: 2 });
            await smallMeshService.initialize();
            // Add max nodes
            await smallMeshService.addNode({ id: 'node-1', type: 'processor' });
            await smallMeshService.addNode({ id: 'node-2', type: 'processor' });
            // Try to add one more
            await expect(smallMeshService.addNode({ id: 'node-3', type: 'processor' }))
                .rejects.toThrow('Maximum nodes limit reached: 2');
        });
        test('should emit node events', (done) => {
            let eventsReceived = 0;
            const expectedEvents = ['nodeAdded', 'nodeRemoved'];
            meshService.on('nodeAdded', (event) => {
                expect(event.nodeId).toBeDefined();
                eventsReceived++;
                if (eventsReceived === expectedEvents.length)
                    done();
            });
            meshService.on('nodeRemoved', (event) => {
                expect(event.nodeId).toBeDefined();
                eventsReceived++;
                if (eventsReceived === expectedEvents.length)
                    done();
            });
            meshService.addNode({ id: 'test-node', type: 'processor' })
                .then(() => meshService.removeNode('test-node'));
        });
    });
    describe('Connection Management', () => {
        beforeEach(async () => {
            await meshService.initialize();
            await meshService.addNode({ id: 'node-1', type: 'input' });
            await meshService.addNode({ id: 'node-2', type: 'hidden' });
            await meshService.addNode({ id: 'node-3', type: 'output' });
        });
        test('should create connections between nodes', async () => {
            await meshService.createConnection('node-1', 'node-2', 0.5);
            const connections = meshService.getConnections();
            expect(connections).toHaveLength(1);
            expect(connections[0].source).toBe('node-1');
            expect(connections[0].target).toBe('node-2');
            expect(connections[0].weight).toBe(0.5);
        });
        test('should update connection weights', async () => {
            await meshService.createConnection('node-1', 'node-2', 0.3);
            await meshService.updateConnection('node-1', 'node-2', 0.8);
            const connections = meshService.getConnections();
            const connection = connections.find(c => c.source === 'node-1' && c.target === 'node-2');
            expect(connection.weight).toBe(0.8);
        });
        test('should remove connections', async () => {
            await meshService.createConnection('node-1', 'node-2', 0.5);
            expect(meshService.getConnections()).toHaveLength(1);
            await meshService.removeConnection('node-1', 'node-2');
            expect(meshService.getConnections()).toHaveLength(0);
        });
        test('should reject connections to non-existent nodes', async () => {
            await expect(meshService.createConnection('node-1', 'non-existent', 0.5))
                .rejects.toThrow('Target node non-existent does not exist');
            await expect(meshService.createConnection('non-existent', 'node-2', 0.5))
                .rejects.toThrow('Source node non-existent does not exist');
        });
        test('should handle self-connections', async () => {
            await expect(meshService.createConnection('node-1', 'node-1', 0.5))
                .rejects.toThrow('Self-connections are not allowed');
        });
        test('should prevent duplicate connections', async () => {
            await meshService.createConnection('node-1', 'node-2', 0.5);
            await expect(meshService.createConnection('node-1', 'node-2', 0.7))
                .rejects.toThrow('Connection already exists between node-1 and node-2');
        });
        test('should emit connection events', (done) => {
            let eventsReceived = 0;
            meshService.on('connectionCreated', (event) => {
                expect(event.source).toBe('node-1');
                expect(event.target).toBe('node-2');
                expect(event.weight).toBe(0.5);
                eventsReceived++;
                if (eventsReceived === 2)
                    done();
            });
            meshService.on('connectionRemoved', (event) => {
                expect(event.source).toBe('node-1');
                expect(event.target).toBe('node-2');
                eventsReceived++;
                if (eventsReceived === 2)
                    done();
            });
            meshService.createConnection('node-1', 'node-2', 0.5)
                .then(() => meshService.removeConnection('node-1', 'node-2'));
        });
    });
    describe('Signal Propagation', () => {
        beforeEach(async () => {
            await meshService.initialize();
            await meshService.addNode({ id: 'input', type: 'input' });
            await meshService.addNode({ id: 'hidden', type: 'hidden' });
            await meshService.addNode({ id: 'output', type: 'output' });
            await meshService.createConnection('input', 'hidden', 0.8);
            await meshService.createConnection('hidden', 'output', 0.6);
        });
        test('should propagate signals through the mesh', async () => {
            const inputSignal = { input: 1.0 };
            const output = await meshService.propagateSignal(inputSignal);
            expect(output).toBeDefined();
            expect(typeof output.output).toBe('number');
        });
        test('should handle multiple input signals', async () => {
            await meshService.addNode({ id: 'input2', type: 'input' });
            await meshService.createConnection('input2', 'hidden', 0.4);
            const inputSignals = { input: 0.5, input2: 0.8 };
            const output = await meshService.propagateSignal(inputSignals);
            expect(output).toBeDefined();
            expect(typeof output.output).toBe('number');
        });
        test('should handle empty input signals', async () => {
            const output = await meshService.propagateSignal({});
            expect(output).toBeDefined();
        });
        test('should apply activation functions correctly', async () => {
            const tanhService = new NeuralMeshService_1.NeuralMeshService({ activationFunction: 'tanh' });
            await tanhService.initialize();
            await tanhService.addNode({ id: 'test-node', type: 'hidden' });
            // Test tanh activation
            const result = await tanhService.propagateSignal({ 'test-node': 2.0 });
            expect(result).toBeDefined();
        });
        test('should handle different activation functions', async () => {
            const activationFunctions = ['tanh', 'relu', 'sigmoid', 'linear'];
            for (const func of activationFunctions) {
                const service = new NeuralMeshService_1.NeuralMeshService({ activationFunction: func });
                await service.initialize();
                await service.addNode({ id: 'test', type: 'hidden', activationFunction: func });
                const result = await service.propagateSignal({ test: 1.0 });
                expect(result).toBeDefined();
                await service.shutdown();
            }
        });
    });
    describe('Learning and Adaptation', () => {
        beforeEach(async () => {
            await meshService.initialize();
            await meshService.addNode({ id: 'input', type: 'input' });
            await meshService.addNode({ id: 'output', type: 'output' });
            await meshService.createConnection('input', 'output', 0.5);
        });
        test('should learn from training data', async () => {
            const trainingData = [
                { inputs: { input: 0.0 }, outputs: { output: 0.0 } },
                { inputs: { input: 1.0 }, outputs: { output: 1.0 } }
            ];
            const session = await meshService.learn(trainingData, 10);
            expect(session).toBeDefined();
            expect(session.epochs).toBe(10);
            expect(session.finalError).toBeDefined();
            expect(session.convergence).toBeDefined();
        });
        test('should emit learning events', (done) => {
            const trainingData = [
                { inputs: { input: 0.5 }, outputs: { output: 0.5 } }
            ];
            meshService.on('learningStarted', (event) => {
                expect(event.epochs).toBe(5);
                expect(event.dataPoints).toBe(1);
            });
            meshService.on('learningComplete', (event) => {
                expect(event.finalError).toBeDefined();
                expect(event.convergence).toBeDefined();
                done();
            });
            meshService.learn(trainingData, 5);
        });
        test('should adapt connection weights during learning', async () => {
            const initialConnections = meshService.getConnections();
            const initialWeight = initialConnections[0].weight;
            const trainingData = [
                { inputs: { input: 1.0 }, outputs: { output: 0.0 } }
            ];
            await meshService.learn(trainingData, 50);
            const finalConnections = meshService.getConnections();
            const finalWeight = finalConnections[0].weight;
            expect(finalWeight).not.toBe(initialWeight);
        });
        test('should handle empty training data', async () => {
            await expect(meshService.learn([], 10))
                .rejects.toThrow('Training data cannot be empty');
        });
        test('should validate training data structure', async () => {
            const invalidData = [
                { inputs: { nonexistent: 1.0 }, outputs: { output: 1.0 } }
            ];
            await expect(meshService.learn(invalidData, 10))
                .rejects.toThrow('Invalid training data: node nonexistent does not exist');
        });
    });
    describe('Optimization', () => {
        beforeEach(async () => {
            await meshService.initialize();
            // Create a more complex network for optimization testing
            await meshService.addNode({ id: 'input1', type: 'input' });
            await meshService.addNode({ id: 'input2', type: 'input' });
            await meshService.addNode({ id: 'hidden1', type: 'hidden' });
            await meshService.addNode({ id: 'hidden2', type: 'hidden' });
            await meshService.addNode({ id: 'output', type: 'output' });
            await meshService.createConnection('input1', 'hidden1', 0.3);
            await meshService.createConnection('input2', 'hidden1', 0.4);
            await meshService.createConnection('input1', 'hidden2', 0.2);
            await meshService.createConnection('hidden1', 'output', 0.6);
            await meshService.createConnection('hidden2', 'output', 0.5);
        });
        test('should optimize network topology', async () => {
            const initialConnections = meshService.getConnections().length;
            await meshService.optimizeTopology();
            const finalConnections = meshService.getConnections().length;
            // Optimization might remove weak connections
            expect(finalConnections).toBeLessThanOrEqual(initialConnections);
        });
        test('should prune weak connections', async () => {
            // Add a very weak connection
            await meshService.createConnection('input2', 'hidden2', 0.01);
            const initialCount = meshService.getConnections().length;
            await meshService.pruneWeakConnections(0.1); // Remove connections < 0.1
            const finalCount = meshService.getConnections().length;
            expect(finalCount).toBeLessThan(initialCount);
        });
        test('should balance network load', async () => {
            await meshService.balanceLoad();
            // Load balancing should maintain network structure
            expect(meshService.getNodeCount()).toBe(5);
        });
        test('should emit optimization events', (done) => {
            meshService.on('topologyOptimized', (event) => {
                expect(event.removedConnections).toBeDefined();
                expect(event.efficiency).toBeDefined();
                done();
            });
            meshService.optimizeTopology();
        });
    });
    describe('Performance Monitoring', () => {
        beforeEach(async () => {
            await meshService.initialize();
            await meshService.addNode({ id: 'test-node', type: 'processor' });
        });
        test('should provide performance metrics', () => {
            const metrics = meshService.getPerformanceMetrics();
            expect(metrics).toBeDefined();
            expect(typeof metrics.propagationTime).toBe('number');
            expect(typeof metrics.learningRate).toBe('number');
            expect(typeof metrics.networkEfficiency).toBe('number');
            expect(typeof metrics.memoryUsage).toBe('number');
            expect(typeof metrics.nodeUtilization).toBe('number');
        });
        test('should track propagation performance', async () => {
            const initialMetrics = meshService.getPerformanceMetrics();
            // Perform some operations
            await meshService.propagateSignal({ 'test-node': 1.0 });
            const updatedMetrics = meshService.getPerformanceMetrics();
            expect(updatedMetrics.propagationTime).toBeGreaterThanOrEqual(0);
        });
        test('should calculate network efficiency', () => {
            const metrics = meshService.getPerformanceMetrics();
            expect(metrics.networkEfficiency).toBeGreaterThanOrEqual(0);
            expect(metrics.networkEfficiency).toBeLessThanOrEqual(1);
        });
        test('should monitor memory usage', () => {
            const metrics = meshService.getPerformanceMetrics();
            expect(metrics.memoryUsage).toBeGreaterThanOrEqual(0);
        });
    });
    describe('State Management', () => {
        beforeEach(async () => {
            await meshService.initialize();
            await meshService.addNode({ id: 'state-node', type: 'processor' });
            await meshService.createConnection('state-node', 'state-node', 0.5);
        });
        test('should save mesh state', async () => {
            const state = await meshService.saveState();
            expect(state).toBeDefined();
            expect(state.nodes).toBeDefined();
            expect(state.connections).toBeDefined();
            expect(state.config).toBeDefined();
            expect(state.timestamp).toBeDefined();
        });
        test('should restore mesh state', async () => {
            const originalState = await meshService.saveState();
            // Modify the mesh
            await meshService.addNode({ id: 'temp-node', type: 'temp' });
            // Restore original state
            await meshService.restoreState(originalState);
            expect(meshService.getNodeCount()).toBe(1);
            expect(meshService.getNode('temp-node')).toBeNull();
        });
        test('should handle invalid state restoration', async () => {
            const invalidState = {
                nodes: [],
                connections: [],
                config: null,
                timestamp: Date.now()
            };
            await expect(meshService.restoreState(invalidState))
                .rejects.toThrow();
        });
        test('should export mesh data', async () => {
            const exportData = await meshService.exportMesh('json');
            expect(exportData).toBeDefined();
            expect(typeof exportData).toBe('string');
            const parsed = JSON.parse(exportData);
            expect(parsed.nodes).toBeDefined();
            expect(parsed.connections).toBeDefined();
        });
        test('should support different export formats', async () => {
            const jsonData = await meshService.exportMesh('json');
            const csvData = await meshService.exportMesh('csv');
            expect(jsonData).toBeDefined();
            expect(csvData).toBeDefined();
            expect(jsonData).not.toBe(csvData);
        });
    });
    describe('Error Handling', () => {
        test('should handle WASM initialization failures', async () => {
            const errorService = new NeuralMeshService_1.NeuralMeshService();
            // Mock WASM failure
            jest.spyOn(errorService, 'initializeWASM').mockRejectedValue(new Error('WASM failed'));
            await expect(errorService.initialize()).rejects.toThrow('WASM failed');
        });
        test('should handle corrupted mesh data gracefully', async () => {
            await meshService.initialize();
            // Simulate corrupted internal state
            meshService.nodes = null;
            expect(() => meshService.getNodeCount()).not.toThrow();
        });
        test('should handle memory pressure scenarios', async () => {
            await meshService.initialize();
            // Add many nodes to simulate memory pressure
            const promises = [];
            for (let i = 0; i < 50; i++) {
                promises.push(meshService.addNode({ id: `node-${i}`, type: 'processor' }));
            }
            await expect(Promise.all(promises)).resolves.toBeDefined();
        });
        test('should handle concurrent operations safely', async () => {
            await meshService.initialize();
            // Perform concurrent operations
            const operations = [
                meshService.addNode({ id: 'concurrent-1', type: 'processor' }),
                meshService.addNode({ id: 'concurrent-2', type: 'processor' }),
                meshService.propagateSignal({ input: 1.0 }),
                meshService.getPerformanceMetrics()
            ];
            await expect(Promise.all(operations)).resolves.toBeDefined();
        });
    });
    describe('Cleanup and Shutdown', () => {
        test('should shutdown cleanly', async () => {
            await meshService.initialize();
            await meshService.addNode({ id: 'cleanup-test', type: 'processor' });
            await expect(meshService.shutdown()).resolves.not.toThrow();
            expect(meshService.isInitialized()).toBe(false);
        });
        test('should emit shutdown event', (done) => {
            meshService.on('shutdown', (event) => {
                expect(event.timestamp).toBeDefined();
                done();
            });
            meshService.initialize().then(() => meshService.shutdown());
        });
        test('should handle shutdown when not initialized', async () => {
            const uninitializedService = new NeuralMeshService_1.NeuralMeshService();
            await expect(uninitializedService.shutdown()).resolves.not.toThrow();
        });
        test('should clean up all resources on shutdown', async () => {
            await meshService.initialize();
            await meshService.addNode({ id: 'resource-test', type: 'processor' });
            await meshService.shutdown();
            expect(meshService.getNodeCount()).toBe(0);
            expect(meshService.getConnections()).toHaveLength(0);
        });
    });
    describe('Edge Cases', () => {
        beforeEach(async () => {
            await meshService.initialize();
        });
        test('should handle nodes with special characters', async () => {
            const specialId = 'node-with-special-chars-@#$%';
            await meshService.addNode({ id: specialId, type: 'processor' });
            expect(meshService.getNode(specialId)).toBeDefined();
        });
        test('should handle very large weight values', async () => {
            await meshService.addNode({ id: 'node-1', type: 'input' });
            await meshService.addNode({ id: 'node-2', type: 'output' });
            await meshService.createConnection('node-1', 'node-2', Number.MAX_VALUE);
            const connections = meshService.getConnections();
            expect(connections[0].weight).toBe(Number.MAX_VALUE);
        });
        test('should handle negative weight values', async () => {
            await meshService.addNode({ id: 'node-1', type: 'input' });
            await meshService.addNode({ id: 'node-2', type: 'output' });
            await meshService.createConnection('node-1', 'node-2', -0.5);
            const connections = meshService.getConnections();
            expect(connections[0].weight).toBe(-0.5);
        });
        test('should handle NaN and Infinity weight values', async () => {
            await meshService.addNode({ id: 'node-1', type: 'input' });
            await meshService.addNode({ id: 'node-2', type: 'output' });
            await expect(meshService.createConnection('node-1', 'node-2', NaN))
                .rejects.toThrow('Invalid weight value');
            await expect(meshService.createConnection('node-1', 'node-2', Infinity))
                .rejects.toThrow('Invalid weight value');
        });
        test('should handle empty node types', async () => {
            await expect(meshService.addNode({ id: 'empty-type', type: '' }))
                .rejects.toThrow('Node type cannot be empty');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL3dvcmtzcGFjZXMvYWdlbnRpc3RzLXF1aWNrc3RhcnQtd29ya3NwYWNlLWJhc2ljL3Nhc2kvdGVzdHMvdW5pdC9zZXJ2aWNlcy9OZXVyYWxNZXNoU2VydmljZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBS0gsb0JBQW9CO0FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQztBQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLGtEQUFrRCxDQUFDLENBQUM7QUFMOUQsbUNBQXNDO0FBQ3RDLCtFQUE0RTtBQU01RSwrQkFBK0I7QUFDL0IsTUFBTSxDQUFDLFdBQVcsR0FBRztJQUNuQixHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7Q0FDeEIsQ0FBQztBQUVULFFBQVEsQ0FBQyw4Q0FBOEMsRUFBRSxHQUFHLEVBQUU7SUFDNUQsSUFBSSxXQUE4QixDQUFDO0lBQ25DLElBQUksVUFBZSxDQUFDO0lBRXBCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFFckIsVUFBVSxHQUFHO1lBQ1gsUUFBUSxFQUFFLEdBQUc7WUFDYixtQkFBbUIsRUFBRSxHQUFHO1lBQ3hCLFlBQVksRUFBRSxLQUFLO1lBQ25CLFNBQVMsRUFBRSxJQUFJO1lBQ2Ysa0JBQWtCLEVBQUUsTUFBTTtZQUMxQixjQUFjLEVBQUUsR0FBRztZQUNuQixxQkFBcUIsRUFBRSxJQUFJO1lBQzNCLFlBQVksRUFBRSxJQUFJO1NBQ25CLENBQUM7UUFFRixXQUFXLEdBQUcsSUFBSSxxQ0FBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNuQixJQUFJLFdBQVcsRUFBRSxDQUFDO1lBQ2hCLE1BQU0sV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQy9CLENBQUM7SUFDSCxDQUFD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QUFFLENBQUMsQ0FBQztZQUU1RCxNQUFNLE1BQU0sQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztpQkFDaEUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBRTNDLE1BQU0sTUFBTSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO2lCQUNyRSxPQUFPLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDaEQsTUFBTSxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQzlELE9BQU8sQ0FBQyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL3dvcmtzcGFjZXMvYWdlbnRpc3RzLXF1aWNrc3RhcnQtd29ya3NwYWNlLWJhc2ljL3Nhc2kvdGVzdHMvdW5pdC9zZXJ2aWNlcy9OZXVyYWxNZXNoU2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBVbml0IFRlc3RzIGZvciBOZXVyYWxNZXNoU2VydmljZVxuICogVGFyZ2V0OiA5NSUrIGNvdmVyYWdlIGZvciBuZXVyYWwgbWVzaCBvcGVyYXRpb25zXG4gKi9cblxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7IE5ldXJhbE1lc2hTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL05ldXJhbE1lc2hTZXJ2aWNlJztcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL3V0aWxzL1dhc21CcmlkZ2UnKTtcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL3BlcnNpc3RlbmNlL0FnZW50UGVyc2lzdGVuY2VNYW5hZ2VyJyk7XG5cbi8vIE1vY2sgcGVyZm9ybWFuY2UgZm9yIHRlc3Rpbmdcbmdsb2JhbC5wZXJmb3JtYW5jZSA9IHtcbiAgbm93OiBqZXN0LmZuKCgpID0+IERhdGUubm93KCkpXG59IGFzIGFueTtcblxuZGVzY3JpYmUoJ05ldXJhbE1lc2hTZXJ2aWNlIC0gQ29tcHJlaGVuc2l2ZSBVbml0IFRlc3RzJywgKCkgPT4ge1xuICBsZXQgbWVzaFNlcnZpY2U6IE5ldXJhbE1lc2hTZXJ2aWNlO1xuICBsZXQgbW9ja0NvbmZpZzogYW55O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIG1vY2tDb25maWcgPSB7XG4gICAgICBtYXhOb2RlczogMTAwLFxuICAgICAgY29ubmVjdGlvblRocmVzaG9sZDogMC4xLFxuICAgICAgbGVhcm5pbmdSYXRlOiAwLjAwMSxcbiAgICAgIGRlY2F5UmF0ZTogMC45OSxcbiAgICAgIGFjdGl2YXRpb25GdW5jdGlvbjogJ3RhbmgnLFxuICAgICAgdXBkYXRlSW50ZXJ2YWw6IDEwMCxcbiAgICAgIHBlcnNpc3RlbnRDb25uZWN0aW9uczogdHJ1ZSxcbiAgICAgIGF1dG9PcHRpbWl6ZTogdHJ1ZVxuICAgIH07XG4gICAgXG4gICAgbWVzaFNlcnZpY2UgPSBuZXcgTmV1cmFsTWVzaFNlcnZpY2UobW9ja0NvbmZpZyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgaWYgKG1lc2hTZXJ2aWNlKSB7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5zaHV0ZG93bigpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0luaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggZGVmYXVsdCBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFNlcnZpY2UgPSBuZXcgTmV1cmFsTWVzaFNlcnZpY2UoKTtcbiAgICAgIGV4cGVjdChkZWZhdWx0U2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkZWZhdWx0U2VydmljZSkudG9CZUluc3RhbmNlT2YoRXZlbnRFbWl0dGVyKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggY3VzdG9tIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Db25maWcgPSB7XG4gICAgICAgIG1heE5vZGVzOiA1MCxcbiAgICAgICAgbGVhcm5pbmdSYXRlOiAwLjAwMixcbiAgICAgICAgYWN0aXZhdGlvbkZ1bmN0aW9uOiAncmVsdSdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IGN1c3RvbVNlcnZpY2UgPSBuZXcgTmV1cmFsTWVzaFNlcnZpY2UoY3VzdG9tQ29uZmlnKTtcbiAgICAgIGV4cGVjdChjdXN0b21TZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGluaXRpYWxpemUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdChtZXNoU2VydmljZS5pc0luaXRpYWxpemVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZW1pdCBpbml0aWFsaXplZCBldmVudCcsIChkb25lKSA9PiB7XG4gICAgICBtZXNoU2VydmljZS5vbignaW5pdGlhbGl6ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXhwZWN0KGV2ZW50LnRpbWVzdGFtcCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50LmNvbmZpZykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW5pdGlhbGl6YXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBpbml0aWFsaXphdGlvbiBmYWlsdXJlXG4gICAgICBqZXN0LnNweU9uKG1lc2hTZXJ2aWNlIGFzIGFueSwgJ2luaXRpYWxpemVXQVNNJykubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdXQVNNIGZhaWxlZCcpKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKSkucmVqZWN0cy50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOb2RlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5pbml0aWFsaXplKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYWRkIG5vZGVzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGVDb25maWcgPSB7XG4gICAgICAgIGlkOiAnbm9kZS0xJyxcbiAgICAgICAgdHlwZTogJ3Byb2Nlc3NvcicsXG4gICAgICAgIGFjdGl2YXRpb25GdW5jdGlvbjogJ3RhbmgnLFxuICAgICAgICB0aHJlc2hvbGQ6IDAuNVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3Qgbm9kZUlkID0gYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZShub2RlQ29uZmlnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG5vZGVJZCkudG9CZSgnbm9kZS0xJyk7XG4gICAgICBleHBlY3QobWVzaFNlcnZpY2UuZ2V0Tm9kZUNvdW50KCkpLnRvQmUoMSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgbm9kZSBJRCB3aGVuIG5vdCBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGVDb25maWcgPSB7XG4gICAgICAgIHR5cGU6ICdwcm9jZXNzb3InLFxuICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb246ICdyZWx1J1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3Qgbm9kZUlkID0gYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZShub2RlQ29uZmlnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG5vZGVJZCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2Ygbm9kZUlkKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdChtZXNoU2VydmljZS5nZXROb2RlQ291bnQoKSkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgZHVwbGljYXRlIG5vZGUgSURzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgbm9kZUNvbmZpZyA9IHtcbiAgICAgICAgaWQ6ICdkdXBsaWNhdGUtbm9kZScsXG4gICAgICAgIHR5cGU6ICdwcm9jZXNzb3InXG4gICAgICB9O1xuICAgICAgXG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5hZGROb2RlKG5vZGVDb25maWcpO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QobWVzaFNlcnZpY2UuYWRkTm9kZShub2RlQ29uZmlnKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnTm9kZSB3aXRoIElEIGR1cGxpY2F0ZS1ub2RlIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVtb3ZlIG5vZGVzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGVDb25maWcgPSB7IGlkOiAncmVtb3ZhYmxlLW5vZGUnLCB0eXBlOiAncHJvY2Vzc29yJyB9O1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZShub2RlQ29uZmlnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1lc2hTZXJ2aWNlLmdldE5vZGVDb3VudCgpKS50b0JlKDEpO1xuICAgICAgXG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5yZW1vdmVOb2RlKCdyZW1vdmFibGUtbm9kZScpO1xuICAgICAgXG4gICAgICBleHBlY3QobWVzaFNlcnZpY2UuZ2V0Tm9kZUNvdW50KCkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHJlbW92aW5nIG5vbi1leGlzdGVudCBub2RlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KG1lc2hTZXJ2aWNlLnJlbW92ZU5vZGUoJ25vbi1leGlzdGVudCcpKVxuICAgICAgICAucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgZXhjZWVkaW5nIG1heCBub2RlcyBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNtYWxsTWVzaFNlcnZpY2UgPSBuZXcgTmV1cmFsTWVzaFNlcnZpY2UoeyBtYXhOb2RlczogMiB9KTtcbiAgICAgIGF3YWl0IHNtYWxsTWVzaFNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICAvLyBBZGQgbWF4IG5vZGVzXG4gICAgICBhd2FpdCBzbWFsbE1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ25vZGUtMScsIHR5cGU6ICdwcm9jZXNzb3InIH0pO1xuICAgICAgYXdhaXQgc21hbGxNZXNoU2VydmljZS5hZGROb2RlKHsgaWQ6ICdub2RlLTInLCB0eXBlOiAncHJvY2Vzc29yJyB9KTtcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGFkZCBvbmUgbW9yZVxuICAgICAgYXdhaXQgZXhwZWN0KHNtYWxsTWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnbm9kZS0zJywgdHlwZTogJ3Byb2Nlc3NvcicgfSkpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ01heGltdW0gbm9kZXMgbGltaXQgcmVhY2hlZDogMicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGVtaXQgbm9kZSBldmVudHMnLCAoZG9uZSkgPT4ge1xuICAgICAgbGV0IGV2ZW50c1JlY2VpdmVkID0gMDtcbiAgICAgIGNvbnN0IGV4cGVjdGVkRXZlbnRzID0gWydub2RlQWRkZWQnLCAnbm9kZVJlbW92ZWQnXTtcbiAgICAgIFxuICAgICAgbWVzaFNlcnZpY2Uub24oJ25vZGVBZGRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICBleHBlY3QoZXZlbnQubm9kZUlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBldmVudHNSZWNlaXZlZCsrO1xuICAgICAgICBpZiAoZXZlbnRzUmVjZWl2ZWQgPT09IGV4cGVjdGVkRXZlbnRzLmxlbmd0aCkgZG9uZSgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG1lc2hTZXJ2aWNlLm9uKCdub2RlUmVtb3ZlZCcsIChldmVudCkgPT4ge1xuICAgICAgICBleHBlY3QoZXZlbnQubm9kZUlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBldmVudHNSZWNlaXZlZCsrO1xuICAgICAgICBpZiAoZXZlbnRzUmVjZWl2ZWQgPT09IGV4cGVjdGVkRXZlbnRzLmxlbmd0aCkgZG9uZSgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ3Rlc3Qtbm9kZScsIHR5cGU6ICdwcm9jZXNzb3InIH0pXG4gICAgICAgIC50aGVuKCgpID0+IG1lc2hTZXJ2aWNlLnJlbW92ZU5vZGUoJ3Rlc3Qtbm9kZScpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Nvbm5lY3Rpb24gTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ25vZGUtMScsIHR5cGU6ICdpbnB1dCcgfSk7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5hZGROb2RlKHsgaWQ6ICdub2RlLTInLCB0eXBlOiAnaGlkZGVuJyB9KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ25vZGUtMycsIHR5cGU6ICdvdXRwdXQnIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBjb25uZWN0aW9ucyBiZXR3ZWVuIG5vZGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuY3JlYXRlQ29ubmVjdGlvbignbm9kZS0xJywgJ25vZGUtMicsIDAuNSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gbWVzaFNlcnZpY2UuZ2V0Q29ubmVjdGlvbnMoKTtcbiAgICAgIGV4cGVjdChjb25uZWN0aW9ucykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGNvbm5lY3Rpb25zWzBdLnNvdXJjZSkudG9CZSgnbm9kZS0xJyk7XG4gICAgICBleHBlY3QoY29ubmVjdGlvbnNbMF0udGFyZ2V0KS50b0JlKCdub2RlLTInKTtcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uc1swXS53ZWlnaHQpLnRvQmUoMC41KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgY29ubmVjdGlvbiB3ZWlnaHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuY3JlYXRlQ29ubmVjdGlvbignbm9kZS0xJywgJ25vZGUtMicsIDAuMyk7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS51cGRhdGVDb25uZWN0aW9uKCdub2RlLTEnLCAnbm9kZS0yJywgMC44KTtcbiAgICAgIFxuICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSBtZXNoU2VydmljZS5nZXRDb25uZWN0aW9ucygpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25zLmZpbmQoYyA9PiBjLnNvdXJjZSA9PT0gJ25vZGUtMScgJiYgYy50YXJnZXQgPT09ICdub2RlLTInKTtcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uIS53ZWlnaHQpLnRvQmUoMC44KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZW1vdmUgY29ubmVjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdub2RlLTEnLCAnbm9kZS0yJywgMC41KTtcbiAgICAgIGV4cGVjdChtZXNoU2VydmljZS5nZXRDb25uZWN0aW9ucygpKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLnJlbW92ZUNvbm5lY3Rpb24oJ25vZGUtMScsICdub2RlLTInKTtcbiAgICAgIGV4cGVjdChtZXNoU2VydmljZS5nZXRDb25uZWN0aW9ucygpKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGNvbm5lY3Rpb25zIHRvIG5vbi1leGlzdGVudCBub2RlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdub2RlLTEnLCAnbm9uLWV4aXN0ZW50JywgMC41KSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnVGFyZ2V0IG5vZGUgbm9uLWV4aXN0ZW50IGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICBcbiAgICAgIGF3YWl0IGV4cGVjdChtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdub24tZXhpc3RlbnQnLCAnbm9kZS0yJywgMC41KSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnU291cmNlIG5vZGUgbm9uLWV4aXN0ZW50IGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHNlbGYtY29ubmVjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QobWVzaFNlcnZpY2UuY3JlYXRlQ29ubmVjdGlvbignbm9kZS0xJywgJ25vZGUtMScsIDAuNSkpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ1NlbGYtY29ubmVjdGlvbnMgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJldmVudCBkdXBsaWNhdGUgY29ubmVjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdub2RlLTEnLCAnbm9kZS0yJywgMC41KTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ25vZGUtMScsICdub2RlLTInLCAwLjcpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdDb25uZWN0aW9uIGFscmVhZHkgZXhpc3RzIGJldHdlZW4gbm9kZS0xIGFuZCBub2RlLTInKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBlbWl0IGNvbm5lY3Rpb24gZXZlbnRzJywgKGRvbmUpID0+IHtcbiAgICAgIGxldCBldmVudHNSZWNlaXZlZCA9IDA7XG4gICAgICBcbiAgICAgIG1lc2hTZXJ2aWNlLm9uKCdjb25uZWN0aW9uQ3JlYXRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICBleHBlY3QoZXZlbnQuc291cmNlKS50b0JlKCdub2RlLTEnKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50LnRhcmdldCkudG9CZSgnbm9kZS0yJyk7XG4gICAgICAgIGV4cGVjdChldmVudC53ZWlnaHQpLnRvQmUoMC41KTtcbiAgICAgICAgZXZlbnRzUmVjZWl2ZWQrKztcbiAgICAgICAgaWYgKGV2ZW50c1JlY2VpdmVkID09PSAyKSBkb25lKCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbWVzaFNlcnZpY2Uub24oJ2Nvbm5lY3Rpb25SZW1vdmVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV4cGVjdChldmVudC5zb3VyY2UpLnRvQmUoJ25vZGUtMScpO1xuICAgICAgICBleHBlY3QoZXZlbnQudGFyZ2V0KS50b0JlKCdub2RlLTInKTtcbiAgICAgICAgZXZlbnRzUmVjZWl2ZWQrKztcbiAgICAgICAgaWYgKGV2ZW50c1JlY2VpdmVkID09PSAyKSBkb25lKCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbWVzaFNlcnZpY2UuY3JlYXRlQ29ubmVjdGlvbignbm9kZS0xJywgJ25vZGUtMicsIDAuNSlcbiAgICAgICAgLnRoZW4oKCkgPT4gbWVzaFNlcnZpY2UucmVtb3ZlQ29ubmVjdGlvbignbm9kZS0xJywgJ25vZGUtMicpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NpZ25hbCBQcm9wYWdhdGlvbicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ2lucHV0JywgdHlwZTogJ2lucHV0JyB9KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ2hpZGRlbicsIHR5cGU6ICdoaWRkZW4nIH0pO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnb3V0cHV0JywgdHlwZTogJ291dHB1dCcgfSk7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdpbnB1dCcsICdoaWRkZW4nLCAwLjgpO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuY3JlYXRlQ29ubmVjdGlvbignaGlkZGVuJywgJ291dHB1dCcsIDAuNik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJvcGFnYXRlIHNpZ25hbHMgdGhyb3VnaCB0aGUgbWVzaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0U2lnbmFsID0geyBpbnB1dDogMS4wIH07XG4gICAgICBcbiAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG1lc2hTZXJ2aWNlLnByb3BhZ2F0ZVNpZ25hbChpbnB1dFNpZ25hbCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChvdXRwdXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZW9mIG91dHB1dC5vdXRwdXQpLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBpbnB1dCBzaWduYWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnaW5wdXQyJywgdHlwZTogJ2lucHV0JyB9KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ2lucHV0MicsICdoaWRkZW4nLCAwLjQpO1xuICAgICAgXG4gICAgICBjb25zdCBpbnB1dFNpZ25hbHMgPSB7IGlucHV0OiAwLjUsIGlucHV0MjogMC44IH07XG4gICAgICBcbiAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG1lc2hTZXJ2aWNlLnByb3BhZ2F0ZVNpZ25hbChpbnB1dFNpZ25hbHMpO1xuICAgICAgXG4gICAgICBleHBlY3Qob3V0cHV0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBvdXRwdXQub3V0cHV0KS50b0JlKCdudW1iZXInKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgaW5wdXQgc2lnbmFscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG1lc2hTZXJ2aWNlLnByb3BhZ2F0ZVNpZ25hbCh7fSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChvdXRwdXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYXBwbHkgYWN0aXZhdGlvbiBmdW5jdGlvbnMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGFuaFNlcnZpY2UgPSBuZXcgTmV1cmFsTWVzaFNlcnZpY2UoeyBhY3RpdmF0aW9uRnVuY3Rpb246ICd0YW5oJyB9KTtcbiAgICAgIGF3YWl0IHRhbmhTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdGFuaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAndGVzdC1ub2RlJywgdHlwZTogJ2hpZGRlbicgfSk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgdGFuaCBhY3RpdmF0aW9uXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0YW5oU2VydmljZS5wcm9wYWdhdGVTaWduYWwoeyAndGVzdC1ub2RlJzogMi4wIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IGFjdGl2YXRpb24gZnVuY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZhdGlvbkZ1bmN0aW9ucyA9IFsndGFuaCcsICdyZWx1JywgJ3NpZ21vaWQnLCAnbGluZWFyJ107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZnVuYyBvZiBhY3RpdmF0aW9uRnVuY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgTmV1cmFsTWVzaFNlcnZpY2UoeyBhY3RpdmF0aW9uRnVuY3Rpb246IGZ1bmMgfSk7XG4gICAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgc2VydmljZS5hZGROb2RlKHsgaWQ6ICd0ZXN0JywgdHlwZTogJ2hpZGRlbicsIGFjdGl2YXRpb25GdW5jdGlvbjogZnVuYyB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5wcm9wYWdhdGVTaWduYWwoeyB0ZXN0OiAxLjAgfSk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLnNodXRkb3duKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMZWFybmluZyBhbmQgQWRhcHRhdGlvbicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ2lucHV0JywgdHlwZTogJ2lucHV0JyB9KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ291dHB1dCcsIHR5cGU6ICdvdXRwdXQnIH0pO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuY3JlYXRlQ29ubmVjdGlvbignaW5wdXQnLCAnb3V0cHV0JywgMC41KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBsZWFybiBmcm9tIHRyYWluaW5nIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFpbmluZ0RhdGEgPSBbXG4gICAgICAgIHsgaW5wdXRzOiB7IGlucHV0OiAwLjAgfSwgb3V0cHV0czogeyBvdXRwdXQ6IDAuMCB9IH0sXG4gICAgICAgIHsgaW5wdXRzOiB7IGlucHV0OiAxLjAgfSwgb3V0cHV0czogeyBvdXRwdXQ6IDEuMCB9IH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBtZXNoU2VydmljZS5sZWFybih0cmFpbmluZ0RhdGEsIDEwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNlc3Npb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qoc2Vzc2lvbi5lcG9jaHMpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHNlc3Npb24uZmluYWxFcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzZXNzaW9uLmNvbnZlcmdlbmNlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGVtaXQgbGVhcm5pbmcgZXZlbnRzJywgKGRvbmUpID0+IHtcbiAgICAgIGNvbnN0IHRyYWluaW5nRGF0YSA9IFtcbiAgICAgICAgeyBpbnB1dHM6IHsgaW5wdXQ6IDAuNSB9LCBvdXRwdXRzOiB7IG91dHB1dDogMC41IH0gfVxuICAgICAgXTtcbiAgICAgIFxuICAgICAgbWVzaFNlcnZpY2Uub24oJ2xlYXJuaW5nU3RhcnRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICBleHBlY3QoZXZlbnQuZXBvY2hzKS50b0JlKDUpO1xuICAgICAgICBleHBlY3QoZXZlbnQuZGF0YVBvaW50cykudG9CZSgxKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtZXNoU2VydmljZS5vbignbGVhcm5pbmdDb21wbGV0ZScsIChldmVudCkgPT4ge1xuICAgICAgICBleHBlY3QoZXZlbnQuZmluYWxFcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50LmNvbnZlcmdlbmNlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbWVzaFNlcnZpY2UubGVhcm4odHJhaW5pbmdEYXRhLCA1KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBhZGFwdCBjb25uZWN0aW9uIHdlaWdodHMgZHVyaW5nIGxlYXJuaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbENvbm5lY3Rpb25zID0gbWVzaFNlcnZpY2UuZ2V0Q29ubmVjdGlvbnMoKTtcbiAgICAgIGNvbnN0IGluaXRpYWxXZWlnaHQgPSBpbml0aWFsQ29ubmVjdGlvbnNbMF0ud2VpZ2h0O1xuICAgICAgXG4gICAgICBjb25zdCB0cmFpbmluZ0RhdGEgPSBbXG4gICAgICAgIHsgaW5wdXRzOiB7IGlucHV0OiAxLjAgfSwgb3V0cHV0czogeyBvdXRwdXQ6IDAuMCB9IH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmxlYXJuKHRyYWluaW5nRGF0YSwgNTApO1xuICAgICAgXG4gICAgICBjb25zdCBmaW5hbENvbm5lY3Rpb25zID0gbWVzaFNlcnZpY2UuZ2V0Q29ubmVjdGlvbnMoKTtcbiAgICAgIGNvbnN0IGZpbmFsV2VpZ2h0ID0gZmluYWxDb25uZWN0aW9uc1swXS53ZWlnaHQ7XG4gICAgICBcbiAgICAgIGV4cGVjdChmaW5hbFdlaWdodCkubm90LnRvQmUoaW5pdGlhbFdlaWdodCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHRyYWluaW5nIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QobWVzaFNlcnZpY2UubGVhcm4oW10sIDEwKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnVHJhaW5pbmcgZGF0YSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB0cmFpbmluZyBkYXRhIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0gW1xuICAgICAgICB7IGlucHV0czogeyBub25leGlzdGVudDogMS4wIH0sIG91dHB1dHM6IHsgb3V0cHV0OiAxLjAgfSB9XG4gICAgICBdO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QobWVzaFNlcnZpY2UubGVhcm4oaW52YWxpZERhdGEsIDEwKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnSW52YWxpZCB0cmFpbmluZyBkYXRhOiBub2RlIG5vbmV4aXN0ZW50IGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdPcHRpbWl6YXRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5pbml0aWFsaXplKCk7XG4gICAgICAvLyBDcmVhdGUgYSBtb3JlIGNvbXBsZXggbmV0d29yayBmb3Igb3B0aW1pemF0aW9uIHRlc3RpbmdcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ2lucHV0MScsIHR5cGU6ICdpbnB1dCcgfSk7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5hZGROb2RlKHsgaWQ6ICdpbnB1dDInLCB0eXBlOiAnaW5wdXQnIH0pO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnaGlkZGVuMScsIHR5cGU6ICdoaWRkZW4nIH0pO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnaGlkZGVuMicsIHR5cGU6ICdoaWRkZW4nIH0pO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnb3V0cHV0JywgdHlwZTogJ291dHB1dCcgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ2lucHV0MScsICdoaWRkZW4xJywgMC4zKTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ2lucHV0MicsICdoaWRkZW4xJywgMC40KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ2lucHV0MScsICdoaWRkZW4yJywgMC4yKTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ2hpZGRlbjEnLCAnb3V0cHV0JywgMC42KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ2hpZGRlbjInLCAnb3V0cHV0JywgMC41KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBvcHRpbWl6ZSBuZXR3b3JrIHRvcG9sb2d5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbENvbm5lY3Rpb25zID0gbWVzaFNlcnZpY2UuZ2V0Q29ubmVjdGlvbnMoKS5sZW5ndGg7XG4gICAgICBcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLm9wdGltaXplVG9wb2xvZ3koKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmluYWxDb25uZWN0aW9ucyA9IG1lc2hTZXJ2aWNlLmdldENvbm5lY3Rpb25zKCkubGVuZ3RoO1xuICAgICAgXG4gICAgICAvLyBPcHRpbWl6YXRpb24gbWlnaHQgcmVtb3ZlIHdlYWsgY29ubmVjdGlvbnNcbiAgICAgIGV4cGVjdChmaW5hbENvbm5lY3Rpb25zKS50b0JlTGVzc1RoYW5PckVxdWFsKGluaXRpYWxDb25uZWN0aW9ucyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJ1bmUgd2VhayBjb25uZWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFkZCBhIHZlcnkgd2VhayBjb25uZWN0aW9uXG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdpbnB1dDInLCAnaGlkZGVuMicsIDAuMDEpO1xuICAgICAgXG4gICAgICBjb25zdCBpbml0aWFsQ291bnQgPSBtZXNoU2VydmljZS5nZXRDb25uZWN0aW9ucygpLmxlbmd0aDtcbiAgICAgIFxuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UucHJ1bmVXZWFrQ29ubmVjdGlvbnMoMC4xKTsgLy8gUmVtb3ZlIGNvbm5lY3Rpb25zIDwgMC4xXG4gICAgICBcbiAgICAgIGNvbnN0IGZpbmFsQ291bnQgPSBtZXNoU2VydmljZS5nZXRDb25uZWN0aW9ucygpLmxlbmd0aDtcbiAgICAgIGV4cGVjdChmaW5hbENvdW50KS50b0JlTGVzc1RoYW4oaW5pdGlhbENvdW50KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBiYWxhbmNlIG5ldHdvcmsgbG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmJhbGFuY2VMb2FkKCk7XG4gICAgICBcbiAgICAgIC8vIExvYWQgYmFsYW5jaW5nIHNob3VsZCBtYWludGFpbiBuZXR3b3JrIHN0cnVjdHVyZVxuICAgICAgZXhwZWN0KG1lc2hTZXJ2aWNlLmdldE5vZGVDb3VudCgpKS50b0JlKDUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGVtaXQgb3B0aW1pemF0aW9uIGV2ZW50cycsIChkb25lKSA9PiB7XG4gICAgICBtZXNoU2VydmljZS5vbigndG9wb2xvZ3lPcHRpbWl6ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXhwZWN0KGV2ZW50LnJlbW92ZWRDb25uZWN0aW9ucykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGV2ZW50LmVmZmljaWVuY3kpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtZXNoU2VydmljZS5vcHRpbWl6ZVRvcG9sb2d5KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBNb25pdG9yaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAndGVzdC1ub2RlJywgdHlwZTogJ3Byb2Nlc3NvcicgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJvdmlkZSBwZXJmb3JtYW5jZSBtZXRyaWNzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWV0cmljcyA9IG1lc2hTZXJ2aWNlLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgICAgXG4gICAgICBleHBlY3QobWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljcy5wcm9wYWdhdGlvblRpbWUpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLmxlYXJuaW5nUmF0ZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MubmV0d29ya0VmZmljaWVuY3kpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLm1lbW9yeVVzYWdlKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljcy5ub2RlVXRpbGl6YXRpb24pLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRyYWNrIHByb3BhZ2F0aW9uIHBlcmZvcm1hbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbE1ldHJpY3MgPSBtZXNoU2VydmljZS5nZXRQZXJmb3JtYW5jZU1ldHJpY3MoKTtcbiAgICAgIFxuICAgICAgLy8gUGVyZm9ybSBzb21lIG9wZXJhdGlvbnNcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLnByb3BhZ2F0ZVNpZ25hbCh7ICd0ZXN0LW5vZGUnOiAxLjAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHVwZGF0ZWRNZXRyaWNzID0gbWVzaFNlcnZpY2UuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICBleHBlY3QodXBkYXRlZE1ldHJpY3MucHJvcGFnYXRpb25UaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNhbGN1bGF0ZSBuZXR3b3JrIGVmZmljaWVuY3knLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXRyaWNzID0gbWVzaFNlcnZpY2UuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLm5ldHdvcmtFZmZpY2llbmN5KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MubmV0d29ya0VmZmljaWVuY3kpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbW9uaXRvciBtZW1vcnkgdXNhZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXRyaWNzID0gbWVzaFNlcnZpY2UuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeVVzYWdlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3RhdGUgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ3N0YXRlLW5vZGUnLCB0eXBlOiAncHJvY2Vzc29yJyB9KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ3N0YXRlLW5vZGUnLCAnc3RhdGUtbm9kZScsIDAuNSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2F2ZSBtZXNoIHN0YXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCBtZXNoU2VydmljZS5zYXZlU3RhdGUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN0YXRlLm5vZGVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmNvbm5lY3Rpb25zKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmNvbmZpZykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzdGF0ZS50aW1lc3RhbXApLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVzdG9yZSBtZXNoIHN0YXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxTdGF0ZSA9IGF3YWl0IG1lc2hTZXJ2aWNlLnNhdmVTdGF0ZSgpO1xuICAgICAgXG4gICAgICAvLyBNb2RpZnkgdGhlIG1lc2hcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ3RlbXAtbm9kZScsIHR5cGU6ICd0ZW1wJyB9KTtcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBzdGF0ZVxuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UucmVzdG9yZVN0YXRlKG9yaWdpbmFsU3RhdGUpO1xuICAgICAgXG4gICAgICBleHBlY3QobWVzaFNlcnZpY2UuZ2V0Tm9kZUNvdW50KCkpLnRvQmUoMSk7XG4gICAgICBleHBlY3QobWVzaFNlcnZpY2UuZ2V0Tm9kZSgndGVtcC1ub2RlJykpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgc3RhdGUgcmVzdG9yYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU3RhdGUgPSB7XG4gICAgICAgIG5vZGVzOiBbXSxcbiAgICAgICAgY29ubmVjdGlvbnM6IFtdLFxuICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KG1lc2hTZXJ2aWNlLnJlc3RvcmVTdGF0ZShpbnZhbGlkU3RhdGUgYXMgYW55KSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGV4cG9ydCBtZXNoIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBleHBvcnREYXRhID0gYXdhaXQgbWVzaFNlcnZpY2UuZXhwb3J0TWVzaCgnanNvbicpO1xuICAgICAgXG4gICAgICBleHBlY3QoZXhwb3J0RGF0YSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgZXhwb3J0RGF0YSkudG9CZSgnc3RyaW5nJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZXhwb3J0RGF0YSk7XG4gICAgICBleHBlY3QocGFyc2VkLm5vZGVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBhcnNlZC5jb25uZWN0aW9ucykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzdXBwb3J0IGRpZmZlcmVudCBleHBvcnQgZm9ybWF0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGpzb25EYXRhID0gYXdhaXQgbWVzaFNlcnZpY2UuZXhwb3J0TWVzaCgnanNvbicpO1xuICAgICAgY29uc3QgY3N2RGF0YSA9IGF3YWl0IG1lc2hTZXJ2aWNlLmV4cG9ydE1lc2goJ2NzdicpO1xuICAgICAgXG4gICAgICBleHBlY3QoanNvbkRhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY3N2RGF0YSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChqc29uRGF0YSkubm90LnRvQmUoY3N2RGF0YSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIFdBU00gaW5pdGlhbGl6YXRpb24gZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvclNlcnZpY2UgPSBuZXcgTmV1cmFsTWVzaFNlcnZpY2UoKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBXQVNNIGZhaWx1cmVcbiAgICAgIGplc3Quc3B5T24oZXJyb3JTZXJ2aWNlIGFzIGFueSwgJ2luaXRpYWxpemVXQVNNJykubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdXQVNNIGZhaWxlZCcpKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KGVycm9yU2VydmljZS5pbml0aWFsaXplKCkpLnJlamVjdHMudG9UaHJvdygnV0FTTSBmYWlsZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY29ycnVwdGVkIG1lc2ggZGF0YSBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBjb3JydXB0ZWQgaW50ZXJuYWwgc3RhdGVcbiAgICAgIChtZXNoU2VydmljZSBhcyBhbnkpLm5vZGVzID0gbnVsbDtcbiAgICAgIFxuICAgICAgZXhwZWN0KCgpID0+IG1lc2hTZXJ2aWNlLmdldE5vZGVDb3VudCgpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtZW1vcnkgcHJlc3N1cmUgc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICAvLyBBZGQgbWFueSBub2RlcyB0byBzaW11bGF0ZSBtZW1vcnkgcHJlc3N1cmVcbiAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHtcbiAgICAgICAgcHJvbWlzZXMucHVzaChtZXNoU2VydmljZS5hZGROb2RlKHsgaWQ6IGBub2RlLSR7aX1gLCB0eXBlOiAncHJvY2Vzc29yJyB9KSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGF3YWl0IGV4cGVjdChQcm9taXNlLmFsbChwcm9taXNlcykpLnJlc29sdmVzLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgb3BlcmF0aW9ucyBzYWZlbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5pbml0aWFsaXplKCk7XG4gICAgICBcbiAgICAgIC8vIFBlcmZvcm0gY29uY3VycmVudCBvcGVyYXRpb25zXG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gW1xuICAgICAgICBtZXNoU2VydmljZS5hZGROb2RlKHsgaWQ6ICdjb25jdXJyZW50LTEnLCB0eXBlOiAncHJvY2Vzc29yJyB9KSxcbiAgICAgICAgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnY29uY3VycmVudC0yJywgdHlwZTogJ3Byb2Nlc3NvcicgfSksXG4gICAgICAgIG1lc2hTZXJ2aWNlLnByb3BhZ2F0ZVNpZ25hbCh7IGlucHV0OiAxLjAgfSksXG4gICAgICAgIG1lc2hTZXJ2aWNlLmdldFBlcmZvcm1hbmNlTWV0cmljcygpXG4gICAgICBdO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QoUHJvbWlzZS5hbGwob3BlcmF0aW9ucykpLnJlc29sdmVzLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDbGVhbnVwIGFuZCBTaHV0ZG93bicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc2h1dGRvd24gY2xlYW5seScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ2NsZWFudXAtdGVzdCcsIHR5cGU6ICdwcm9jZXNzb3InIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QobWVzaFNlcnZpY2Uuc2h1dGRvd24oKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdChtZXNoU2VydmljZS5pc0luaXRpYWxpemVkKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGVtaXQgc2h1dGRvd24gZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgbWVzaFNlcnZpY2Uub24oJ3NodXRkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV4cGVjdChldmVudC50aW1lc3RhbXApLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtZXNoU2VydmljZS5pbml0aWFsaXplKCkudGhlbigoKSA9PiBtZXNoU2VydmljZS5zaHV0ZG93bigpKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc2h1dGRvd24gd2hlbiBub3QgaW5pdGlhbGl6ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkU2VydmljZSA9IG5ldyBOZXVyYWxNZXNoU2VydmljZSgpO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QodW5pbml0aWFsaXplZFNlcnZpY2Uuc2h1dGRvd24oKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhbiB1cCBhbGwgcmVzb3VyY2VzIG9uIHNodXRkb3duJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAncmVzb3VyY2UtdGVzdCcsIHR5cGU6ICdwcm9jZXNzb3InIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5zaHV0ZG93bigpO1xuICAgICAgXG4gICAgICBleHBlY3QobWVzaFNlcnZpY2UuZ2V0Tm9kZUNvdW50KCkpLnRvQmUoMCk7XG4gICAgICBleHBlY3QobWVzaFNlcnZpY2UuZ2V0Q29ubmVjdGlvbnMoKSkudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmluaXRpYWxpemUoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbm9kZXMgd2l0aCBzcGVjaWFsIGNoYXJhY3RlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzcGVjaWFsSWQgPSAnbm9kZS13aXRoLXNwZWNpYWwtY2hhcnMtQCMkJSc7XG4gICAgICBcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogc3BlY2lhbElkLCB0eXBlOiAncHJvY2Vzc29yJyB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1lc2hTZXJ2aWNlLmdldE5vZGUoc3BlY2lhbElkKSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsYXJnZSB3ZWlnaHQgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnbm9kZS0xJywgdHlwZTogJ2lucHV0JyB9KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ25vZGUtMicsIHR5cGU6ICdvdXRwdXQnIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdub2RlLTEnLCAnbm9kZS0yJywgTnVtYmVyLk1BWF9WQUxVRSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gbWVzaFNlcnZpY2UuZ2V0Q29ubmVjdGlvbnMoKTtcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uc1swXS53ZWlnaHQpLnRvQmUoTnVtYmVyLk1BWF9WQUxVRSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG5lZ2F0aXZlIHdlaWdodCB2YWx1ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBtZXNoU2VydmljZS5hZGROb2RlKHsgaWQ6ICdub2RlLTEnLCB0eXBlOiAnaW5wdXQnIH0pO1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnbm9kZS0yJywgdHlwZTogJ291dHB1dCcgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmNyZWF0ZUNvbm5lY3Rpb24oJ25vZGUtMScsICdub2RlLTInLCAtMC41KTtcbiAgICAgIFxuICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSBtZXNoU2VydmljZS5nZXRDb25uZWN0aW9ucygpO1xuICAgICAgZXhwZWN0KGNvbm5lY3Rpb25zWzBdLndlaWdodCkudG9CZSgtMC41KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgTmFOIGFuZCBJbmZpbml0eSB3ZWlnaHQgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbWVzaFNlcnZpY2UuYWRkTm9kZSh7IGlkOiAnbm9kZS0xJywgdHlwZTogJ2lucHV0JyB9KTtcbiAgICAgIGF3YWl0IG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ25vZGUtMicsIHR5cGU6ICdvdXRwdXQnIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QobWVzaFNlcnZpY2UuY3JlYXRlQ29ubmVjdGlvbignbm9kZS0xJywgJ25vZGUtMicsIE5hTikpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ0ludmFsaWQgd2VpZ2h0IHZhbHVlJyk7XG4gICAgICBcbiAgICAgIGF3YWl0IGV4cGVjdChtZXNoU2VydmljZS5jcmVhdGVDb25uZWN0aW9uKCdub2RlLTEnLCAnbm9kZS0yJywgSW5maW5pdHkpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIHdlaWdodCB2YWx1ZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBub2RlIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KG1lc2hTZXJ2aWNlLmFkZE5vZGUoeyBpZDogJ2VtcHR5LXR5cGUnLCB0eXBlOiAnJyB9KSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnTm9kZSB0eXBlIGNhbm5vdCBiZSBlbXB0eScpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==