ec24e3366074ca53842717734002f387
"use strict";
/**
 * Agent Coordination Tests for Phase 2A
 * Tests multi-agent coordination, swarm behavior, and neural mesh interactions
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const coordination_setup_1 = require("../coordination-setup");
const performance_setup_1 = require("../performance-setup");
describe('Agent Coordination', () => {
    beforeEach(() => {
        globals_1.jest.clearAllMocks();
    });
    describe('Swarm Initialization and Management', () => {
        test('should initialize swarm within performance threshold', async () => {
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('swarm-initialization', async () => {
                return await coordination_setup_1.coordinationMocks.swarm.initializeSwarm();
            });
            // Assert swarm initialized quickly
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD * 2); // 100ms
            // Verify swarm properties
            expect(result).toBeDefined();
            expect(result.swarmId).toBeDefined();
            expect(result.topology).toBe('mesh');
            expect(result.status).toBe('active');
        });
        test('should spawn multiple agents efficiently', async () => {
            const agentTypes = ['researcher', 'coder', 'analyst', 'tester', 'coordinator'];
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('multi-agent-spawn', async () => {
                const agents = [];
                for (const type of agentTypes) {
                    const agent = await coordination_setup_1.coordinationMocks.swarm.spawnAgent(type, [`${type}_capability`]);
                    agents.push(agent);
                }
                return agents;
            });
            // Assert all agents spawned within threshold
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.AGENT_SPAWN_TIME * agentTypes.length);
            // Verify all agents created
            expect(result).toHaveLength(agentTypes.length);
            result.forEach((agent, index) => {
                expect(agent.type).toBe(agentTypes[index]);
                expect(agent.status).toBe('active');
            });
        });
        test('should handle swarm status monitoring efficiently', async () => {
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('swarm-status', async () => {
                return coordination_setup_1.coordinationMocks.swarm.getSwarmStatus();
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(result).toBeDefined();
            expect(result.swarmId).toBeDefined();
            expect(result.coordinationEfficiency).toBeGreaterThan(0.8); // >80% efficiency
        });
    });
    describe('Task Orchestration', () => {
        test('should orchestrate tasks with minimal coordination overhead', async () => {
            const task = 'Analyze neural network performance and optimize parameters';
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('task-orchestration', async () => {
                return await coordination_setup_1.coordinationMocks.swarm.orchestrateTask(task, 'parallel');
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(result).toBeDefined();
            expect(result.task).toBe(task);
            expect(result.strategy).toBe('parallel');
            expect(result.assignedAgents).toHaveLength(2);
        });
        test('should coordinate parallel task execution', async () => {
            const tasks = [
                { id: 'task-1', type: 'analysis', priority: 'high' },
                { id: 'task-2', type: 'optimization', priority: 'medium' },
                { id: 'task-3', type: 'validation', priority: 'high' }
            ];
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('parallel-coordination', async () => {
                return await coordination_setup_1.coordinationMocks.tasks.coordinateParallelTasks(tasks);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD * 2); // 100ms for multiple tasks
            expect(result).toBeDefined();
            expect(result.tasks).toHaveLength(tasks.length);
            expect(result.strategy).toBe('parallel');
        });
        test('should handle task dependencies efficiently', async () => {
            const dependencies = [
                { id: 'dep-1', status: 'completed', dependsOn: [] },
                { id: 'dep-2', status: 'pending', dependsOn: ['dep-1'] },
                { id: 'dep-3', status: 'pending', dependsOn: ['dep-1', 'dep-2'] }
            ];
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('dependency-resolution', async () => {
                return await coordination_setup_1.coordinationMocks.tasks.handleTaskDependencies(dependencies);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(result.resolved).toHaveLength(1); // dep-1 is completed
            expect(result.pending).toHaveLength(2); // dep-2, dep-3 are pending
            expect(result.resolutionPlan).toBeDefined();
        });
    });
    describe('Agent Communication', () => {
        test('should broadcast messages efficiently to all agents', async () => {
            const message = coordination_setup_1.coordinationMocks.communication.createMessage('TASK_ASSIGNMENT', { task: 'Optimize neural weights', priority: 'high' }, 'coordinator-agent');
            const { duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('message-broadcast', async () => {
                await coordination_setup_1.coordinationMocks.communication.broadcastMessage(message);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(coordination_setup_1.coordinationMocks.communication.broadcastMessage).toHaveBeenCalledWith(message);
        });
        test('should handle direct agent-to-agent communication', async () => {
            const message = coordination_setup_1.coordinationMocks.communication.createMessage('KNOWLEDGE_SHARE', { weights: [0.1, 0.2, 0.3], accuracy: 0.95 }, 'agent-001', 'agent-002');
            const { duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('direct-communication', async () => {
                await coordination_setup_1.coordinationMocks.communication.sendDirectMessage(message);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(coordination_setup_1.coordinationMocks.communication.sendDirectMessage).toHaveBeenCalledWith(message);
        });
        test('should manage communication channels efficiently', async () => {
            const channels = ['neural-updates', 'task-coordination', 'performance-monitoring'];
            const { duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('channel-management', async () => {
                for (const channel of channels) {
                    await coordination_setup_1.coordinationMocks.communication.subscribeToChannel(channel);
                }
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(coordination_setup_1.coordinationMocks.communication.subscribeToChannel).toHaveBeenCalledTimes(channels.length);
        });
    });
    describe('Memory Coordination', () => {
        test('should store and retrieve shared memory efficiently', async () => {
            const memoryKey = 'swarm-coordination-state';
            const memoryValue = {
                activeAgents: ['agent-001', 'agent-002', 'agent-003'],
                currentTasks: ['task-alpha', 'task-beta'],
                performanceMetrics: { efficiency: 0.92, throughput: 1250 }
            };
            // Test memory storage
            const { duration: storeDuration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('memory-store', async () => {
                return await coordination_setup_1.coordinationMocks.memory.storeSharedMemory(memoryKey, memoryValue);
            });
            expect(storeDuration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            // Test memory retrieval
            const { result, duration: retrieveDuration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('memory-retrieve', async () => {
                return await coordination_setup_1.coordinationMocks.memory.retrieveSharedMemory(memoryKey);
            });
            expect(retrieveDuration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(result.key).toBe(memoryKey);
        });
        test('should synchronize memory across agents efficiently', async () => {
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('memory-sync', async () => {
                return await coordination_setup_1.coordinationMocks.memory.syncMemoryAcrossAgents();
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD * 2); // 100ms for sync operation
            expect(result.syncedAgents).toHaveLength(3);
            expect(result.success).toBe(true);
        });
        test('should monitor memory usage and prevent overconsumption', async () => {
            const memoryUsage = coordination_setup_1.coordinationMocks.memory.getMemoryUsage();
            expect(memoryUsage.totalMemory).toBeGreaterThan(0);
            expect(memoryUsage.usedMemory).toBeLessThan(memoryUsage.totalMemory);
            // Ensure individual agents don't exceed threshold
            Object.values(memoryUsage.agentMemoryMap).forEach((agentMemory) => {
                expect(agentMemory).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.MEMORY_USAGE_PER_AGENT);
            });
        });
    });
    describe('Neural Mesh Coordination', () => {
        test('should establish neural mesh connections efficiently', async () => {
            const agents = ['neural-agent-001', 'neural-agent-002', 'neural-agent-003'];
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('mesh-connection', async () => {
                return await coordination_setup_1.coordinationMocks.neuralMesh.establishMeshConnection(agents);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD * 2); // 100ms for mesh setup
            expect(result.connectedAgents).toEqual(agents);
            expect(result.topology).toBe('full_mesh');
            expect(result.connectionStrength).toBeGreaterThan(0.9); // >90% connection strength
        });
        test('should propagate neural updates across mesh efficiently', async () => {
            const neuralUpdates = [
                { layer: 0, weights: [0.1, 0.2, 0.3] },
                { layer: 1, weights: [0.4, 0.5, 0.6] }
            ];
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('neural-propagation', async () => {
                return await coordination_setup_1.coordinationMocks.neuralMesh.propagateNeuralUpdates('neural-agent-001', neuralUpdates);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.KNOWLEDGE_SHARING);
            expect(result.propagationTime).toBeLessThan(50); // <50ms propagation
            expect(result.targetAgents).toHaveLength(2);
        });
        test('should synchronize neural states across agents', async () => {
            const agents = ['neural-agent-001', 'neural-agent-002', 'neural-agent-003'];
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('neural-sync', async () => {
                return await coordination_setup_1.coordinationMocks.neuralMesh.synchronizeNeuralStates(agents);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(result.synchronizedAgents).toEqual(agents);
            expect(result.convergenceScore).toBeGreaterThan(0.8); // >80% convergence
        });
        test('should analyze mesh topology for optimization', async () => {
            const topology = coordination_setup_1.coordinationMocks.neuralMesh.getMeshTopology();
            expect(topology.nodes).toHaveLength(3);
            expect(topology.edges).toHaveLength(3); // Full mesh = n*(n-1)/2 = 3
            expect(topology.density).toBe(1.0); // Fully connected
            expect(topology.averagePathLength).toBe(1.0); // Direct connections
            // Verify all connection weights are strong
            topology.edges.forEach((edge) => {
                expect(edge.weight).toBeGreaterThan(0.8);
            });
        });
    });
    describe('Performance Coordination', () => {
        test('should monitor swarm performance in real-time', async () => {
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('performance-monitoring', async () => {
                return coordination_setup_1.coordinationMocks.performance.monitorSwarmPerformance();
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(result.averageTaskCompletionTime).toBeLessThan(500); // <500ms average
            expect(result.coordinationOverhead).toBeLessThan(50); // <50ms overhead
            expect(result.resourceUtilization).toBeGreaterThan(0.7); // >70% utilization
            // Verify agent efficiency scores
            Object.values(result.agentEfficiencyScores).forEach((score) => {
                expect(score).toBeGreaterThan(0.8); // >80% efficiency
            });
        });
        test('should optimize resource allocation dynamically', async () => {
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('resource-optimization', async () => {
                return await coordination_setup_1.coordinationMocks.performance.optimizeResourceAllocation();
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD * 4); // 200ms for optimization
            expect(result.improvements).toHaveLength(2);
            result.improvements.forEach((improvement) => {
                expect(improvement.type).toBeDefined();
                expect(improvement.improvement).toContain('% ');
            });
        });
        test('should detect and report coordination bottlenecks', async () => {
            const bottlenecks = coordination_setup_1.coordinationMocks.performance.detectCoordinationBottlenecks();
            expect(Array.isArray(bottlenecks)).toBe(true);
            bottlenecks.forEach((bottleneck) => {
                expect(bottleneck.type).toBeDefined();
                expect(bottleneck.severity).toMatch(/low|medium|high|critical/);
                expect(bottleneck.suggestedFix).toBeDefined();
            });
        });
    });
    describe('Cross-Session Coordination Persistence', () => {
        test('should save coordination state efficiently', async () => {
            const swarmId = 'persistent-swarm-001';
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('coordination-state-save', async () => {
                return await coordination_setup_1.mockCrossSessionCoordination.saveCoordinationState(swarmId);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.PERSISTENCE_SAVE);
            expect(result.swarmId).toBe(swarmId);
            expect(result.agentStates).toHaveLength(3);
            expect(result.taskStates).toHaveLength(2);
            expect(result.memorySnapshot).toBeDefined();
        });
        test('should restore coordination state within threshold', async () => {
            const swarmId = 'persistent-swarm-001';
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('coordination-state-restore', async () => {
                return await coordination_setup_1.mockCrossSessionCoordination.restoreCoordinationState(swarmId);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.CROSS_SESSION_RESTORE);
            expect(result.swarmId).toBe(swarmId);
            expect(result.restoredAgents).toBe(3);
            expect(result.restoredTasks).toBe(2);
            expect(result.continuityScore).toBeGreaterThan(0.9); // >90% continuity
        });
        test('should validate session continuity', async () => {
            const beforeState = {
                agentCount: 3,
                taskProgress: 0.6,
                memoryUsage: 150 * 1024 * 1024 // 150MB
            };
            const afterState = {
                agentCount: 3,
                taskProgress: 0.8,
                memoryUsage: 155 * 1024 * 1024 // 155MB
            };
            const { result, duration } = await performance_setup_1.performanceTestUtils.measureAsyncOperation('continuity-validation', async () => {
                return await coordination_setup_1.mockCrossSessionCoordination.validateSessionContinuity(beforeState, afterState);
            });
            expect(duration).toBeLessThan(performance_setup_1.PERFORMANCE_THRESHOLDS.COORDINATION_OVERHEAD);
            expect(result.continuityScore).toBeGreaterThan(0.9);
            expect(result.preservedData).toContain('agent_states');
            expect(result.preservedData).toContain('task_progress');
            expect(result.lostData).toHaveLength(0);
            expect(result.recoveryTime).toBeLessThan(200); // <200ms recovery
        });
    });
    describe('Coordination Scenarios', () => {
        test('should handle complex multi-stage workflows', async () => {
            const scenario = {
                name: 'Complex Multi-Stage Workflow',
                taskType: 'research',
                agentCount: 5,
                coordinationPattern: 'sequential'
            };
            const { result, duration } = await coordination_setup_1.coordinationTestUtils.measureCoordinationPerformance(async () => {
                return await coordination_setup_1.coordinationTestUtils.simulateCoordinationScenario(scenario);
            });
            coordination_setup_1.coordinationTestUtils.validateCoordinationThresholds(result.performance);
            expect(result.result.swarm).toBeDefined();
            expect(result.result.agents).toHaveLength(scenario.agentCount);
            expect(result.result.task).toBeDefined();
        });
        test('should execute all coordination scenarios successfully', async () => {
            const scenarios = coordination_setup_1.coordinationTestUtils.generateCoordinationScenarios();
            for (const scenario of scenarios) {
                const { result } = await coordination_setup_1.coordinationTestUtils.measureCoordinationPerformance(async () => {
                    return await coordination_setup_1.coordinationTestUtils.simulateCoordinationScenario(scenario);
                });
                expect(result.result.swarm).toBeDefined();
                expect(result.result.agents).toHaveLength(scenario.agentCount);
                console.log(`✅ Scenario '${scenario.name}' completed successfully`);
            }
        });
    });
    describe('Error Handling and Resilience', () => {
        test('should handle agent failures gracefully', async () => {
            // Simulate agent failure
            const failingAgent = 'failing-agent-001';
            coordination_setup_1.coordinationMocks.swarm.terminateAgent = globals_1.jest.fn().mockResolvedValue(undefined);
            await coordination_setup_1.coordinationMocks.swarm.terminateAgent(failingAgent);
            // Verify swarm continues functioning
            const swarmStatus = coordination_setup_1.coordinationMocks.swarm.getSwarmStatus();
            expect(swarmStatus.coordinationEfficiency).toBeGreaterThan(0.8); // Still >80% efficient
        });
        test('should recover from communication failures', async () => {
            // Simulate communication failure
            coordination_setup_1.coordinationMocks.communication.broadcastMessage.mockRejectedValueOnce(new Error('Communication network unavailable'));
            const message = coordination_setup_1.coordinationMocks.communication.createMessage('STATUS_UPDATE', { status: 'active' }, 'test-agent');
            // Should handle failure gracefully
            await expect(coordination_setup_1.coordinationMocks.communication.broadcastMessage(message)).rejects.toThrow('Communication network unavailable');
            // Verify system can recover
            coordination_setup_1.coordinationMocks.communication.broadcastMessage.mockResolvedValueOnce(undefined);
            await expect(coordination_setup_1.coordinationMocks.communication.broadcastMessage(message)).resolves.not.toThrow();
        });
    });
});
// Hook for coordination tracking
afterEach(async () => {
    await new Promise(resolve => setTimeout(resolve, 10));
    const hookResult = await coordination_setup_1.coordinationTestUtils.mockHooksExecution('post-edit', {
        file: 'agent-coordination.test.ts',
        operation: 'coordination_test_completion',
        performance: 'coordination_thresholds_met'
    });
    expect(hookResult.executed).toBe(true);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL3dvcmtzcGFjZXMvYWdlbnRpc3RzLXF1aWNrc3RhcnQtd29ya3NwYWNlLWJhc2ljL3Nhc2kvdGVzdHMvY29vcmRpbmF0aW9uL2FnZW50LWNvb3JkaW5hdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsMkNBQXFDO0FBQ3JDLDhEQUkrQjtBQUMvQiw0REFBb0Y7QUFFcEYsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsY0FBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtRQUNuRCxJQUFJLENBQUMsc0RBQXNELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDdEUsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxNQUFNLHdDQUFvQixDQUFDLHFCQUFxQixDQUMzRSxzQkFBc0IsRUFDdEIsS0FBSyxJQUFJLEVBQUU7Z0JBQ1QsT0FBTyxNQUFNLHNDQUFpQixDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUN6RCxDQUFDLENBQ0YsQ0FBQztZQUVGLG1DQUFtQztZQUNuQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLDBDQUFzQixDQUFDLHFCQUFxQixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUTtZQUV6RiwwQkFBMEI7WUFDMUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDckMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdkMsQ0FB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QTZCO0tBQzNDLENBQ0YsQ0FBQztJQUNGLE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pDLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL2FnZW50aXN0cy1xdWlja3N0YXJ0LXdvcmtzcGFjZS1iYXNpYy9zYXNpL3Rlc3RzL2Nvb3JkaW5hdGlvbi9hZ2VudC1jb29yZGluYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFnZW50IENvb3JkaW5hdGlvbiBUZXN0cyBmb3IgUGhhc2UgMkFcbiAqIFRlc3RzIG11bHRpLWFnZW50IGNvb3JkaW5hdGlvbiwgc3dhcm0gYmVoYXZpb3IsIGFuZCBuZXVyYWwgbWVzaCBpbnRlcmFjdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBcbiAgY29vcmRpbmF0aW9uTW9ja3MsXG4gIGNvb3JkaW5hdGlvblRlc3RVdGlscyxcbiAgbW9ja0Nyb3NzU2Vzc2lvbkNvb3JkaW5hdGlvbiBcbn0gZnJvbSAnLi4vY29vcmRpbmF0aW9uLXNldHVwJztcbmltcG9ydCB7IHBlcmZvcm1hbmNlVGVzdFV0aWxzLCBQRVJGT1JNQU5DRV9USFJFU0hPTERTIH0gZnJvbSAnLi4vcGVyZm9ybWFuY2Utc2V0dXAnO1xuXG5kZXNjcmliZSgnQWdlbnQgQ29vcmRpbmF0aW9uJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnU3dhcm0gSW5pdGlhbGl6YXRpb24gYW5kIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGluaXRpYWxpemUgc3dhcm0gd2l0aGluIHBlcmZvcm1hbmNlIHRocmVzaG9sZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBkdXJhdGlvbiB9ID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0VXRpbHMubWVhc3VyZUFzeW5jT3BlcmF0aW9uKFxuICAgICAgICAnc3dhcm0taW5pdGlhbGl6YXRpb24nLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IGNvb3JkaW5hdGlvbk1vY2tzLnN3YXJtLmluaXRpYWxpemVTd2FybSgpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnQgc3dhcm0gaW5pdGlhbGl6ZWQgcXVpY2tseVxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DT09SRElOQVRJT05fT1ZFUkhFQUQgKiAyKTsgLy8gMTAwbXNcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHN3YXJtIHByb3BlcnRpZXNcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnN3YXJtSWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnRvcG9sb2d5KS50b0JlKCdtZXNoJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnYWN0aXZlJyk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIHNwYXduIG11bHRpcGxlIGFnZW50cyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50VHlwZXMgPSBbJ3Jlc2VhcmNoZXInLCAnY29kZXInLCAnYW5hbHlzdCcsICd0ZXN0ZXInLCAnY29vcmRpbmF0b3InXTtcbiAgICAgIFxuICAgICAgY29uc3QgeyByZXN1bHQsIGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdtdWx0aS1hZ2VudC1zcGF3bicsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBhZ2VudHMgPSBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2YgYWdlbnRUeXBlcykge1xuICAgICAgICAgICAgY29uc3QgYWdlbnQgPSBhd2FpdCBjb29yZGluYXRpb25Nb2Nrcy5zd2FybS5zcGF3bkFnZW50KHR5cGUsIFtgJHt0eXBlfV9jYXBhYmlsaXR5YF0pO1xuICAgICAgICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYWdlbnRzO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnQgYWxsIGFnZW50cyBzcGF3bmVkIHdpdGhpbiB0aHJlc2hvbGRcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuQUdFTlRfU1BBV05fVElNRSAqIGFnZW50VHlwZXMubGVuZ3RoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGFsbCBhZ2VudHMgY3JlYXRlZFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKGFnZW50VHlwZXMubGVuZ3RoKTtcbiAgICAgIHJlc3VsdC5mb3JFYWNoKChhZ2VudDogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGV4cGVjdChhZ2VudC50eXBlKS50b0JlKGFnZW50VHlwZXNbaW5kZXhdKTtcbiAgICAgICAgZXhwZWN0KGFnZW50LnN0YXR1cykudG9CZSgnYWN0aXZlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHN3YXJtIHN0YXR1cyBtb25pdG9yaW5nIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdzd2FybS1zdGF0dXMnLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGlvbk1vY2tzLnN3YXJtLmdldFN3YXJtU3RhdHVzKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuQ09PUkRJTkFUSU9OX09WRVJIRUFEKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3dhcm1JZCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29vcmRpbmF0aW9uRWZmaWNpZW5jeSkudG9CZUdyZWF0ZXJUaGFuKDAuOCk7IC8vID44MCUgZWZmaWNpZW5jeVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdUYXNrIE9yY2hlc3RyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIG9yY2hlc3RyYXRlIHRhc2tzIHdpdGggbWluaW1hbCBjb29yZGluYXRpb24gb3ZlcmhlYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0YXNrID0gJ0FuYWx5emUgbmV1cmFsIG5ldHdvcmsgcGVyZm9ybWFuY2UgYW5kIG9wdGltaXplIHBhcmFtZXRlcnMnO1xuICAgICAgXG4gICAgICBjb25zdCB7IHJlc3VsdCwgZHVyYXRpb24gfSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdFV0aWxzLm1lYXN1cmVBc3luY09wZXJhdGlvbihcbiAgICAgICAgJ3Rhc2stb3JjaGVzdHJhdGlvbicsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgY29vcmRpbmF0aW9uTW9ja3Muc3dhcm0ub3JjaGVzdHJhdGVUYXNrKHRhc2ssICdwYXJhbGxlbCcpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbihQRVJGT1JNQU5DRV9USFJFU0hPTERTLkNPT1JESU5BVElPTl9PVkVSSEVBRCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnRhc2spLnRvQmUodGFzayk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0cmF0ZWd5KS50b0JlKCdwYXJhbGxlbCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5hc3NpZ25lZEFnZW50cykudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBjb29yZGluYXRlIHBhcmFsbGVsIHRhc2sgZXhlY3V0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGFza3MgPSBbXG4gICAgICAgIHsgaWQ6ICd0YXNrLTEnLCB0eXBlOiAnYW5hbHlzaXMnLCBwcmlvcml0eTogJ2hpZ2gnIH0sXG4gICAgICAgIHsgaWQ6ICd0YXNrLTInLCB0eXBlOiAnb3B0aW1pemF0aW9uJywgcHJpb3JpdHk6ICdtZWRpdW0nIH0sXG4gICAgICAgIHsgaWQ6ICd0YXNrLTMnLCB0eXBlOiAndmFsaWRhdGlvbicsIHByaW9yaXR5OiAnaGlnaCcgfVxuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29uc3QgeyByZXN1bHQsIGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdwYXJhbGxlbC1jb29yZGluYXRpb24nLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IGNvb3JkaW5hdGlvbk1vY2tzLnRhc2tzLmNvb3JkaW5hdGVQYXJhbGxlbFRhc2tzKHRhc2tzKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DT09SRElOQVRJT05fT1ZFUkhFQUQgKiAyKTsgLy8gMTAwbXMgZm9yIG11bHRpcGxlIHRhc2tzXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnRhc2tzKS50b0hhdmVMZW5ndGgodGFza3MubGVuZ3RoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RyYXRlZ3kpLnRvQmUoJ3BhcmFsbGVsJyk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB0YXNrIGRlcGVuZGVuY2llcyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgeyBpZDogJ2RlcC0xJywgc3RhdHVzOiAnY29tcGxldGVkJywgZGVwZW5kc09uOiBbXSB9LFxuICAgICAgICB7IGlkOiAnZGVwLTInLCBzdGF0dXM6ICdwZW5kaW5nJywgZGVwZW5kc09uOiBbJ2RlcC0xJ10gfSxcbiAgICAgICAgeyBpZDogJ2RlcC0zJywgc3RhdHVzOiAncGVuZGluZycsIGRlcGVuZHNPbjogWydkZXAtMScsICdkZXAtMiddIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBkdXJhdGlvbiB9ID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0VXRpbHMubWVhc3VyZUFzeW5jT3BlcmF0aW9uKFxuICAgICAgICAnZGVwZW5kZW5jeS1yZXNvbHV0aW9uJyxcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBjb29yZGluYXRpb25Nb2Nrcy50YXNrcy5oYW5kbGVUYXNrRGVwZW5kZW5jaWVzKGRlcGVuZGVuY2llcyk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuQ09PUkRJTkFUSU9OX09WRVJIRUFEKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5yZXNvbHZlZCkudG9IYXZlTGVuZ3RoKDEpOyAvLyBkZXAtMSBpcyBjb21wbGV0ZWRcbiAgICAgIGV4cGVjdChyZXN1bHQucGVuZGluZykudG9IYXZlTGVuZ3RoKDIpOyAvLyBkZXAtMiwgZGVwLTMgYXJlIHBlbmRpbmdcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzb2x1dGlvblBsYW4pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ0FnZW50IENvbW11bmljYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGJyb2FkY2FzdCBtZXNzYWdlcyBlZmZpY2llbnRseSB0byBhbGwgYWdlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGNvb3JkaW5hdGlvbk1vY2tzLmNvbW11bmljYXRpb24uY3JlYXRlTWVzc2FnZShcbiAgICAgICAgJ1RBU0tfQVNTSUdOTUVOVCcsXG4gICAgICAgIHsgdGFzazogJ09wdGltaXplIG5ldXJhbCB3ZWlnaHRzJywgcHJpb3JpdHk6ICdoaWdoJyB9LFxuICAgICAgICAnY29vcmRpbmF0b3ItYWdlbnQnXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCB7IGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdtZXNzYWdlLWJyb2FkY2FzdCcsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBjb29yZGluYXRpb25Nb2Nrcy5jb21tdW5pY2F0aW9uLmJyb2FkY2FzdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuQ09PUkRJTkFUSU9OX09WRVJIRUFEKTtcbiAgICAgIGV4cGVjdChjb29yZGluYXRpb25Nb2Nrcy5jb21tdW5pY2F0aW9uLmJyb2FkY2FzdE1lc3NhZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1lc3NhZ2UpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZGlyZWN0IGFnZW50LXRvLWFnZW50IGNvbW11bmljYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gY29vcmRpbmF0aW9uTW9ja3MuY29tbXVuaWNhdGlvbi5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAnS05PV0xFREdFX1NIQVJFJyxcbiAgICAgICAgeyB3ZWlnaHRzOiBbMC4xLCAwLjIsIDAuM10sIGFjY3VyYWN5OiAwLjk1IH0sXG4gICAgICAgICdhZ2VudC0wMDEnLFxuICAgICAgICAnYWdlbnQtMDAyJ1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBkdXJhdGlvbiB9ID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0VXRpbHMubWVhc3VyZUFzeW5jT3BlcmF0aW9uKFxuICAgICAgICAnZGlyZWN0LWNvbW11bmljYXRpb24nLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgY29vcmRpbmF0aW9uTW9ja3MuY29tbXVuaWNhdGlvbi5zZW5kRGlyZWN0TWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DT09SRElOQVRJT05fT1ZFUkhFQUQpO1xuICAgICAgZXhwZWN0KGNvb3JkaW5hdGlvbk1vY2tzLmNvbW11bmljYXRpb24uc2VuZERpcmVjdE1lc3NhZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1lc3NhZ2UpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBtYW5hZ2UgY29tbXVuaWNhdGlvbiBjaGFubmVscyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWxzID0gWyduZXVyYWwtdXBkYXRlcycsICd0YXNrLWNvb3JkaW5hdGlvbicsICdwZXJmb3JtYW5jZS1tb25pdG9yaW5nJ107XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZHVyYXRpb24gfSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdFV0aWxzLm1lYXN1cmVBc3luY09wZXJhdGlvbihcbiAgICAgICAgJ2NoYW5uZWwtbWFuYWdlbWVudCcsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoYW5uZWwgb2YgY2hhbm5lbHMpIHtcbiAgICAgICAgICAgIGF3YWl0IGNvb3JkaW5hdGlvbk1vY2tzLmNvbW11bmljYXRpb24uc3Vic2NyaWJlVG9DaGFubmVsKGNoYW5uZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DT09SRElOQVRJT05fT1ZFUkhFQUQpO1xuICAgICAgZXhwZWN0KGNvb3JkaW5hdGlvbk1vY2tzLmNvbW11bmljYXRpb24uc3Vic2NyaWJlVG9DaGFubmVsKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoY2hhbm5lbHMubGVuZ3RoKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnTWVtb3J5IENvb3JkaW5hdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc3RvcmUgYW5kIHJldHJpZXZlIHNoYXJlZCBtZW1vcnkgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtZW1vcnlLZXkgPSAnc3dhcm0tY29vcmRpbmF0aW9uLXN0YXRlJztcbiAgICAgIGNvbnN0IG1lbW9yeVZhbHVlID0ge1xuICAgICAgICBhY3RpdmVBZ2VudHM6IFsnYWdlbnQtMDAxJywgJ2FnZW50LTAwMicsICdhZ2VudC0wMDMnXSxcbiAgICAgICAgY3VycmVudFRhc2tzOiBbJ3Rhc2stYWxwaGEnLCAndGFzay1iZXRhJ10sXG4gICAgICAgIHBlcmZvcm1hbmNlTWV0cmljczogeyBlZmZpY2llbmN5OiAwLjkyLCB0aHJvdWdocHV0OiAxMjUwIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFRlc3QgbWVtb3J5IHN0b3JhZ2VcbiAgICAgIGNvbnN0IHsgZHVyYXRpb246IHN0b3JlRHVyYXRpb24gfSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdFV0aWxzLm1lYXN1cmVBc3luY09wZXJhdGlvbihcbiAgICAgICAgJ21lbW9yeS1zdG9yZScsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgY29vcmRpbmF0aW9uTW9ja3MubWVtb3J5LnN0b3JlU2hhcmVkTWVtb3J5KG1lbW9yeUtleSwgbWVtb3J5VmFsdWUpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RvcmVEdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuQ09PUkRJTkFUSU9OX09WRVJIRUFEKTtcbiAgICAgIFxuICAgICAgLy8gVGVzdCBtZW1vcnkgcmV0cmlldmFsXG4gICAgICBjb25zdCB7IHJlc3VsdCwgZHVyYXRpb246IHJldHJpZXZlRHVyYXRpb24gfSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdFV0aWxzLm1lYXN1cmVBc3luY09wZXJhdGlvbihcbiAgICAgICAgJ21lbW9yeS1yZXRyaWV2ZScsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgY29vcmRpbmF0aW9uTW9ja3MubWVtb3J5LnJldHJpZXZlU2hhcmVkTWVtb3J5KG1lbW9yeUtleSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXRyaWV2ZUR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DT09SRElOQVRJT05fT1ZFUkhFQUQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5rZXkpLnRvQmUobWVtb3J5S2V5KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgc3luY2hyb25pemUgbWVtb3J5IGFjcm9zcyBhZ2VudHMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgZHVyYXRpb24gfSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdFV0aWxzLm1lYXN1cmVBc3luY09wZXJhdGlvbihcbiAgICAgICAgJ21lbW9yeS1zeW5jJyxcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBjb29yZGluYXRpb25Nb2Nrcy5tZW1vcnkuc3luY01lbW9yeUFjcm9zc0FnZW50cygpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbihQRVJGT1JNQU5DRV9USFJFU0hPTERTLkNPT1JESU5BVElPTl9PVkVSSEVBRCAqIDIpOyAvLyAxMDBtcyBmb3Igc3luYyBvcGVyYXRpb25cbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5zeW5jZWRBZ2VudHMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgbW9uaXRvciBtZW1vcnkgdXNhZ2UgYW5kIHByZXZlbnQgb3ZlcmNvbnN1bXB0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVtb3J5VXNhZ2UgPSBjb29yZGluYXRpb25Nb2Nrcy5tZW1vcnkuZ2V0TWVtb3J5VXNhZ2UoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1lbW9yeVVzYWdlLnRvdGFsTWVtb3J5KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QobWVtb3J5VXNhZ2UudXNlZE1lbW9yeSkudG9CZUxlc3NUaGFuKG1lbW9yeVVzYWdlLnRvdGFsTWVtb3J5KTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIGluZGl2aWR1YWwgYWdlbnRzIGRvbid0IGV4Y2VlZCB0aHJlc2hvbGRcbiAgICAgIE9iamVjdC52YWx1ZXMobWVtb3J5VXNhZ2UuYWdlbnRNZW1vcnlNYXApLmZvckVhY2goKGFnZW50TWVtb3J5OiBhbnkpID0+IHtcbiAgICAgICAgZXhwZWN0KGFnZW50TWVtb3J5KS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5NRU1PUllfVVNBR0VfUEVSX0FHRU5UKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdOZXVyYWwgTWVzaCBDb29yZGluYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGVzdGFibGlzaCBuZXVyYWwgbWVzaCBjb25uZWN0aW9ucyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50cyA9IFsnbmV1cmFsLWFnZW50LTAwMScsICduZXVyYWwtYWdlbnQtMDAyJywgJ25ldXJhbC1hZ2VudC0wMDMnXTtcbiAgICAgIFxuICAgICAgY29uc3QgeyByZXN1bHQsIGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdtZXNoLWNvbm5lY3Rpb24nLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IGNvb3JkaW5hdGlvbk1vY2tzLm5ldXJhbE1lc2guZXN0YWJsaXNoTWVzaENvbm5lY3Rpb24oYWdlbnRzKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DT09SRElOQVRJT05fT1ZFUkhFQUQgKiAyKTsgLy8gMTAwbXMgZm9yIG1lc2ggc2V0dXBcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jb25uZWN0ZWRBZ2VudHMpLnRvRXF1YWwoYWdlbnRzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudG9wb2xvZ3kpLnRvQmUoJ2Z1bGxfbWVzaCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb25uZWN0aW9uU3RyZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwLjkpOyAvLyA+OTAlIGNvbm5lY3Rpb24gc3RyZW5ndGhcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgcHJvcGFnYXRlIG5ldXJhbCB1cGRhdGVzIGFjcm9zcyBtZXNoIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmV1cmFsVXBkYXRlcyA9IFtcbiAgICAgICAgeyBsYXllcjogMCwgd2VpZ2h0czogWzAuMSwgMC4yLCAwLjNdIH0sXG4gICAgICAgIHsgbGF5ZXI6IDEsIHdlaWdodHM6IFswLjQsIDAuNSwgMC42XSB9XG4gICAgICBdO1xuICAgICAgXG4gICAgICBjb25zdCB7IHJlc3VsdCwgZHVyYXRpb24gfSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdFV0aWxzLm1lYXN1cmVBc3luY09wZXJhdGlvbihcbiAgICAgICAgJ25ldXJhbC1wcm9wYWdhdGlvbicsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgY29vcmRpbmF0aW9uTW9ja3MubmV1cmFsTWVzaC5wcm9wYWdhdGVOZXVyYWxVcGRhdGVzKCduZXVyYWwtYWdlbnQtMDAxJywgbmV1cmFsVXBkYXRlcyk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuS05PV0xFREdFX1NIQVJJTkcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5wcm9wYWdhdGlvblRpbWUpLnRvQmVMZXNzVGhhbig1MCk7IC8vIDw1MG1zIHByb3BhZ2F0aW9uXG4gICAgICBleHBlY3QocmVzdWx0LnRhcmdldEFnZW50cykudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBzeW5jaHJvbml6ZSBuZXVyYWwgc3RhdGVzIGFjcm9zcyBhZ2VudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudHMgPSBbJ25ldXJhbC1hZ2VudC0wMDEnLCAnbmV1cmFsLWFnZW50LTAwMicsICduZXVyYWwtYWdlbnQtMDAzJ107XG4gICAgICBcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBkdXJhdGlvbiB9ID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0VXRpbHMubWVhc3VyZUFzeW5jT3BlcmF0aW9uKFxuICAgICAgICAnbmV1cmFsLXN5bmMnLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IGNvb3JkaW5hdGlvbk1vY2tzLm5ldXJhbE1lc2guc3luY2hyb25pemVOZXVyYWxTdGF0ZXMoYWdlbnRzKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DT09SRElOQVRJT05fT1ZFUkhFQUQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zeW5jaHJvbml6ZWRBZ2VudHMpLnRvRXF1YWwoYWdlbnRzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udmVyZ2VuY2VTY29yZSkudG9CZUdyZWF0ZXJUaGFuKDAuOCk7IC8vID44MCUgY29udmVyZ2VuY2VcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgYW5hbHl6ZSBtZXNoIHRvcG9sb2d5IGZvciBvcHRpbWl6YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b3BvbG9neSA9IGNvb3JkaW5hdGlvbk1vY2tzLm5ldXJhbE1lc2guZ2V0TWVzaFRvcG9sb2d5KCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCh0b3BvbG9neS5ub2RlcykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHRvcG9sb2d5LmVkZ2VzKS50b0hhdmVMZW5ndGgoMyk7IC8vIEZ1bGwgbWVzaCA9IG4qKG4tMSkvMiA9IDNcbiAgICAgIGV4cGVjdCh0b3BvbG9neS5kZW5zaXR5KS50b0JlKDEuMCk7IC8vIEZ1bGx5IGNvbm5lY3RlZFxuICAgICAgZXhwZWN0KHRvcG9sb2d5LmF2ZXJhZ2VQYXRoTGVuZ3RoKS50b0JlKDEuMCk7IC8vIERpcmVjdCBjb25uZWN0aW9uc1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgYWxsIGNvbm5lY3Rpb24gd2VpZ2h0cyBhcmUgc3Ryb25nXG4gICAgICB0b3BvbG9neS5lZGdlcy5mb3JFYWNoKChlZGdlOiBhbnkpID0+IHtcbiAgICAgICAgZXhwZWN0KGVkZ2Uud2VpZ2h0KS50b0JlR3JlYXRlclRoYW4oMC44KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBDb29yZGluYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIG1vbml0b3Igc3dhcm0gcGVyZm9ybWFuY2UgaW4gcmVhbC10aW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdwZXJmb3JtYW5jZS1tb25pdG9yaW5nJyxcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBjb29yZGluYXRpb25Nb2Nrcy5wZXJmb3JtYW5jZS5tb25pdG9yU3dhcm1QZXJmb3JtYW5jZSgpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbihQRVJGT1JNQU5DRV9USFJFU0hPTERTLkNPT1JESU5BVElPTl9PVkVSSEVBRCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuYXZlcmFnZVRhc2tDb21wbGV0aW9uVGltZSkudG9CZUxlc3NUaGFuKDUwMCk7IC8vIDw1MDBtcyBhdmVyYWdlXG4gICAgICBleHBlY3QocmVzdWx0LmNvb3JkaW5hdGlvbk92ZXJoZWFkKS50b0JlTGVzc1RoYW4oNTApOyAvLyA8NTBtcyBvdmVyaGVhZFxuICAgICAgZXhwZWN0KHJlc3VsdC5yZXNvdXJjZVV0aWxpemF0aW9uKS50b0JlR3JlYXRlclRoYW4oMC43KTsgLy8gPjcwJSB1dGlsaXphdGlvblxuICAgICAgXG4gICAgICAvLyBWZXJpZnkgYWdlbnQgZWZmaWNpZW5jeSBzY29yZXNcbiAgICAgIE9iamVjdC52YWx1ZXMocmVzdWx0LmFnZW50RWZmaWNpZW5jeVNjb3JlcykuZm9yRWFjaCgoc2NvcmU6IGFueSkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NvcmUpLnRvQmVHcmVhdGVyVGhhbigwLjgpOyAvLyA+ODAlIGVmZmljaWVuY3lcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBvcHRpbWl6ZSByZXNvdXJjZSBhbGxvY2F0aW9uIGR5bmFtaWNhbGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQsIGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdyZXNvdXJjZS1vcHRpbWl6YXRpb24nLFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IGNvb3JkaW5hdGlvbk1vY2tzLnBlcmZvcm1hbmNlLm9wdGltaXplUmVzb3VyY2VBbGxvY2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuQ09PUkRJTkFUSU9OX09WRVJIRUFEICogNCk7IC8vIDIwMG1zIGZvciBvcHRpbWl6YXRpb25cbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5pbXByb3ZlbWVudHMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIHJlc3VsdC5pbXByb3ZlbWVudHMuZm9yRWFjaCgoaW1wcm92ZW1lbnQ6IGFueSkgPT4ge1xuICAgICAgICBleHBlY3QoaW1wcm92ZW1lbnQudHlwZSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGltcHJvdmVtZW50LmltcHJvdmVtZW50KS50b0NvbnRhaW4oJyUgJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgZGV0ZWN0IGFuZCByZXBvcnQgY29vcmRpbmF0aW9uIGJvdHRsZW5lY2tzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYm90dGxlbmVja3MgPSBjb29yZGluYXRpb25Nb2Nrcy5wZXJmb3JtYW5jZS5kZXRlY3RDb29yZGluYXRpb25Cb3R0bGVuZWNrcygpO1xuICAgICAgXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShib3R0bGVuZWNrcykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGJvdHRsZW5lY2tzLmZvckVhY2goKGJvdHRsZW5lY2s6IGFueSkgPT4ge1xuICAgICAgICBleHBlY3QoYm90dGxlbmVjay50eXBlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoYm90dGxlbmVjay5zZXZlcml0eSkudG9NYXRjaCgvbG93fG1lZGl1bXxoaWdofGNyaXRpY2FsLyk7XG4gICAgICAgIGV4cGVjdChib3R0bGVuZWNrLnN1Z2dlc3RlZEZpeCkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdDcm9zcy1TZXNzaW9uIENvb3JkaW5hdGlvbiBQZXJzaXN0ZW5jZScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc2F2ZSBjb29yZGluYXRpb24gc3RhdGUgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzd2FybUlkID0gJ3BlcnNpc3RlbnQtc3dhcm0tMDAxJztcbiAgICAgIFxuICAgICAgY29uc3QgeyByZXN1bHQsIGR1cmF0aW9uIH0gPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3RVdGlscy5tZWFzdXJlQXN5bmNPcGVyYXRpb24oXG4gICAgICAgICdjb29yZGluYXRpb24tc3RhdGUtc2F2ZScsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgbW9ja0Nyb3NzU2Vzc2lvbkNvb3JkaW5hdGlvbi5zYXZlQ29vcmRpbmF0aW9uU3RhdGUoc3dhcm1JZCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuUEVSU0lTVEVOQ0VfU0FWRSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuc3dhcm1JZCkudG9CZShzd2FybUlkKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYWdlbnRTdGF0ZXMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudGFza1N0YXRlcykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZW1vcnlTbmFwc2hvdCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgcmVzdG9yZSBjb29yZGluYXRpb24gc3RhdGUgd2l0aGluIHRocmVzaG9sZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN3YXJtSWQgPSAncGVyc2lzdGVudC1zd2FybS0wMDEnO1xuICAgICAgXG4gICAgICBjb25zdCB7IHJlc3VsdCwgZHVyYXRpb24gfSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdFV0aWxzLm1lYXN1cmVBc3luY09wZXJhdGlvbihcbiAgICAgICAgJ2Nvb3JkaW5hdGlvbi1zdGF0ZS1yZXN0b3JlJyxcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBtb2NrQ3Jvc3NTZXNzaW9uQ29vcmRpbmF0aW9uLnJlc3RvcmVDb29yZGluYXRpb25TdGF0ZShzd2FybUlkKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5DUk9TU19TRVNTSU9OX1JFU1RPUkUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LnN3YXJtSWQpLnRvQmUoc3dhcm1JZCk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlc3RvcmVkQWdlbnRzKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXN0b3JlZFRhc2tzKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb250aW51aXR5U2NvcmUpLnRvQmVHcmVhdGVyVGhhbigwLjkpOyAvLyA+OTAlIGNvbnRpbnVpdHlcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgc2Vzc2lvbiBjb250aW51aXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYmVmb3JlU3RhdGUgPSB7XG4gICAgICAgIGFnZW50Q291bnQ6IDMsXG4gICAgICAgIHRhc2tQcm9ncmVzczogMC42LFxuICAgICAgICBtZW1vcnlVc2FnZTogMTUwICogMTAyNCAqIDEwMjQgLy8gMTUwTUJcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IGFmdGVyU3RhdGUgPSB7XG4gICAgICAgIGFnZW50Q291bnQ6IDMsXG4gICAgICAgIHRhc2tQcm9ncmVzczogMC44LFxuICAgICAgICBtZW1vcnlVc2FnZTogMTU1ICogMTAyNCAqIDEwMjQgLy8gMTU1TUJcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBkdXJhdGlvbiB9ID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0VXRpbHMubWVhc3VyZUFzeW5jT3BlcmF0aW9uKFxuICAgICAgICAnY29udGludWl0eS12YWxpZGF0aW9uJyxcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBtb2NrQ3Jvc3NTZXNzaW9uQ29vcmRpbmF0aW9uLnZhbGlkYXRlU2Vzc2lvbkNvbnRpbnVpdHkoYmVmb3JlU3RhdGUsIGFmdGVyU3RhdGUpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbihQRVJGT1JNQU5DRV9USFJFU0hPTERTLkNPT1JESU5BVElPTl9PVkVSSEVBRCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGludWl0eVNjb3JlKS50b0JlR3JlYXRlclRoYW4oMC45KTtcbiAgICAgIGV4cGVjdChyZXN1bHQucHJlc2VydmVkRGF0YSkudG9Db250YWluKCdhZ2VudF9zdGF0ZXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucHJlc2VydmVkRGF0YSkudG9Db250YWluKCd0YXNrX3Byb2dyZXNzJyk7XG4gICAgICBleHBlY3QocmVzdWx0Lmxvc3REYXRhKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlY292ZXJ5VGltZSkudG9CZUxlc3NUaGFuKDIwMCk7IC8vIDwyMDBtcyByZWNvdmVyeVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdDb29yZGluYXRpb24gU2NlbmFyaW9zJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY29tcGxleCBtdWx0aS1zdGFnZSB3b3JrZmxvd3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzY2VuYXJpbyA9IHtcbiAgICAgICAgbmFtZTogJ0NvbXBsZXggTXVsdGktU3RhZ2UgV29ya2Zsb3cnLFxuICAgICAgICB0YXNrVHlwZTogJ3Jlc2VhcmNoJyxcbiAgICAgICAgYWdlbnRDb3VudDogNSxcbiAgICAgICAgY29vcmRpbmF0aW9uUGF0dGVybjogJ3NlcXVlbnRpYWwnXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCB7IHJlc3VsdCwgZHVyYXRpb24gfSA9IGF3YWl0IGNvb3JkaW5hdGlvblRlc3RVdGlscy5tZWFzdXJlQ29vcmRpbmF0aW9uUGVyZm9ybWFuY2UoXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgY29vcmRpbmF0aW9uVGVzdFV0aWxzLnNpbXVsYXRlQ29vcmRpbmF0aW9uU2NlbmFyaW8oc2NlbmFyaW8pO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBjb29yZGluYXRpb25UZXN0VXRpbHMudmFsaWRhdGVDb29yZGluYXRpb25UaHJlc2hvbGRzKHJlc3VsdC5wZXJmb3JtYW5jZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0LnN3YXJtKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXN1bHQuYWdlbnRzKS50b0hhdmVMZW5ndGgoc2NlbmFyaW8uYWdlbnRDb3VudCk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlc3VsdC50YXNrKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBleGVjdXRlIGFsbCBjb29yZGluYXRpb24gc2NlbmFyaW9zIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNjZW5hcmlvcyA9IGNvb3JkaW5hdGlvblRlc3RVdGlscy5nZW5lcmF0ZUNvb3JkaW5hdGlvblNjZW5hcmlvcygpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHNjZW5hcmlvIG9mIHNjZW5hcmlvcykge1xuICAgICAgICBjb25zdCB7IHJlc3VsdCB9ID0gYXdhaXQgY29vcmRpbmF0aW9uVGVzdFV0aWxzLm1lYXN1cmVDb29yZGluYXRpb25QZXJmb3JtYW5jZShcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgY29vcmRpbmF0aW9uVGVzdFV0aWxzLnNpbXVsYXRlQ29vcmRpbmF0aW9uU2NlbmFyaW8oc2NlbmFyaW8pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0LnN3YXJtKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnJlc3VsdC5hZ2VudHMpLnRvSGF2ZUxlbmd0aChzY2VuYXJpby5hZ2VudENvdW50KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgU2NlbmFyaW8gJyR7c2NlbmFyaW8ubmFtZX0nIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgYW5kIFJlc2lsaWVuY2UnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBhZ2VudCBmYWlsdXJlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhdGUgYWdlbnQgZmFpbHVyZVxuICAgICAgY29uc3QgZmFpbGluZ0FnZW50ID0gJ2ZhaWxpbmctYWdlbnQtMDAxJztcbiAgICAgIGNvb3JkaW5hdGlvbk1vY2tzLnN3YXJtLnRlcm1pbmF0ZUFnZW50ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICBcbiAgICAgIGF3YWl0IGNvb3JkaW5hdGlvbk1vY2tzLnN3YXJtLnRlcm1pbmF0ZUFnZW50KGZhaWxpbmdBZ2VudCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBzd2FybSBjb250aW51ZXMgZnVuY3Rpb25pbmdcbiAgICAgIGNvbnN0IHN3YXJtU3RhdHVzID0gY29vcmRpbmF0aW9uTW9ja3Muc3dhcm0uZ2V0U3dhcm1TdGF0dXMoKTtcbiAgICAgIGV4cGVjdChzd2FybVN0YXR1cy5jb29yZGluYXRpb25FZmZpY2llbmN5KS50b0JlR3JlYXRlclRoYW4oMC44KTsgLy8gU3RpbGwgPjgwJSBlZmZpY2llbnRcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgcmVjb3ZlciBmcm9tIGNvbW11bmljYXRpb24gZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTaW11bGF0ZSBjb21tdW5pY2F0aW9uIGZhaWx1cmVcbiAgICAgIGNvb3JkaW5hdGlvbk1vY2tzLmNvbW11bmljYXRpb24uYnJvYWRjYXN0TWVzc2FnZS5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UoXG4gICAgICAgIG5ldyBFcnJvcignQ29tbXVuaWNhdGlvbiBuZXR3b3JrIHVuYXZhaWxhYmxlJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjb29yZGluYXRpb25Nb2Nrcy5jb21tdW5pY2F0aW9uLmNyZWF0ZU1lc3NhZ2UoXG4gICAgICAgICdTVEFUVVNfVVBEQVRFJyxcbiAgICAgICAgeyBzdGF0dXM6ICdhY3RpdmUnIH0sXG4gICAgICAgICd0ZXN0LWFnZW50J1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBmYWlsdXJlIGdyYWNlZnVsbHlcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29vcmRpbmF0aW9uTW9ja3MuY29tbXVuaWNhdGlvbi5icm9hZGNhc3RNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnQ29tbXVuaWNhdGlvbiBuZXR3b3JrIHVuYXZhaWxhYmxlJyk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBzeXN0ZW0gY2FuIHJlY292ZXJcbiAgICAgIGNvb3JkaW5hdGlvbk1vY2tzLmNvbW11bmljYXRpb24uYnJvYWRjYXN0TWVzc2FnZS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UodW5kZWZpbmVkKTtcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29vcmRpbmF0aW9uTW9ja3MuY29tbXVuaWNhdGlvbi5icm9hZGNhc3RNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICApLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8vIEhvb2sgZm9yIGNvb3JkaW5hdGlvbiB0cmFja2luZ1xuYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gIGNvbnN0IGhvb2tSZXN1bHQgPSBhd2FpdCBjb29yZGluYXRpb25UZXN0VXRpbHMubW9ja0hvb2tzRXhlY3V0aW9uKFxuICAgICdwb3N0LWVkaXQnLFxuICAgIHsgXG4gICAgICBmaWxlOiAnYWdlbnQtY29vcmRpbmF0aW9uLnRlc3QudHMnLFxuICAgICAgb3BlcmF0aW9uOiAnY29vcmRpbmF0aW9uX3Rlc3RfY29tcGxldGlvbicsXG4gICAgICBwZXJmb3JtYW5jZTogJ2Nvb3JkaW5hdGlvbl90aHJlc2hvbGRzX21ldCdcbiAgICB9XG4gICk7XG4gIGV4cGVjdChob29rUmVzdWx0LmV4ZWN1dGVkKS50b0JlKHRydWUpO1xufSk7Il0sInZlcnNpb24iOjN9