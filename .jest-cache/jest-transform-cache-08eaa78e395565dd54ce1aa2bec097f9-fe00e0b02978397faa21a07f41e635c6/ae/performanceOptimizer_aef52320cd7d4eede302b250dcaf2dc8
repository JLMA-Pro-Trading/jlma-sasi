5778a485a4e2a2d7feb438c815b359f7
"use strict";
/**
 * PerformanceOptimizer for SASI/Synaptic-mesh Integration
 * Optimizes WASM loading, SIMD operations, memory usage, and real-time monitoring
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.PerformanceOptimizer = void 0;
class PerformanceOptimizer {
    constructor(config = {}) {
        Object.defineProperty(this, "metrics", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "config", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "wasmModules", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "memoryPool", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "metricsHistory", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "observers", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "isInitialized", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: false
        });
        this.config = {
            enableSIMD: true,
            enableWASMCaching: true,
            enableMemoryPooling: true,
            enableGPUAcceleration: true,
            maxMemoryPerAgent: 50 * 1024 * 1024, // 50MB
            targetFrameTime: 16.67, // 60fps
            batchSize: 32,
            cacheSize: 100 * 1024 * 1024, // 100MB
            ...config
        };
        this.metrics = {
            wasmLoadTime: 0,
            simdOperationTime: 0,
            memoryUsage: 0,
            neuralInferenceTime: 0,
            agentSpawnTime: 0,
            renderTime: 0,
            networkLatency: 0,
            consensusTime: 0
        };
        this.wasmModules = new Map();
        this.memoryPool = new Map();
        this.metricsHistory = [];
        this.observers = [];
    }
    /**
     * Initialize performance optimizations
     */
    async initialize() {
        console.log('üöÄ Initializing PerformanceOptimizer...');
        const startTime = performance.now();
        await Promise.all([
            this.initializeWASMModules(),
            this.initializeMemoryPool(),
            this.initializePerformanceObservers(),
            this.initializeSIMD(),
            this.initializeGPUAcceleration()
        ]);
        this.isInitialized = true;
        const initTime = performance.now() - startTime;
        console.log(`‚úÖ PerformanceOptimizer initialized in ${initTime.toFixed(2)}ms`);
        console.log(`üìä SIMD Support: ${this.isSIMDSupported() ? '‚úÖ' : '‚ùå'}`);
        console.log(`üìä GPU Support: ${await this.isGPUSupported() ? '‚úÖ' : '‚ùå'}`);
        console.log(`üìä Memory Pool: ${this.config.enableMemoryPooling ? '‚úÖ' : '‚ùå'}`);
        console.log(`üìä WASM Caching: ${this.config.enableWASMCaching ? '‚úÖ' : '‚ùå'}`);
    }
    /**
     * Initialize WASM modules with caching
     */
    async initializeWASMModules() {
        const wasmModules = [
            'ruv_swarm_wasm_bg.wasm',
            'ruv_swarm_simd.wasm',
            'ruv-fann.wasm',
            'neuro-divergent.wasm'
        ];
        const loadPromises = wasmModules.map(async (moduleName) => {
            const startTime = performance.now();
            try {
                // Check cache first
                if (this.config.enableWASMCaching && this.wasmModules.has(moduleName)) {
                    console.log(`‚ôªÔ∏è Using cached WASM module: ${moduleName}`);
                    return;
                }
                const wasmPath = `/synaptic-mesh/src/js/ruv-swarm/wasm-unified/${moduleName}`;
                const response = await fetch(wasmPath);
                if (!response.ok) {
                    console.warn(`‚ö†Ô∏è Failed to load WASM module: ${moduleName}`);
                    return;
                }
                const wasmBytes = await response.arrayBuffer();
                const wasmModule = await WebAssembly.instantiate(wasmBytes);
                if (this.config.enableWASMCaching) {
                    this.wasmModules.set(moduleName, wasmModule);
                }
                const loadTime = performance.now() - startTime;
                this.metrics.wasmLoadTime += loadTime;
                console.log(`üì¶ Loaded WASM module: ${moduleName} (${loadTime.toFixed(2)}ms)`);
            }
            catch (error) {
                console.error(`‚ùå Failed to load WASM module ${moduleName}:`, error);
            }
        });
        await Promise.all(loadPromises);
    }
    /**
     * Initialize memory pool for efficient allocations
     */
    async initializeMemoryPool() {
        if (!this.config.enableMemoryPooling)
            return;
        const poolSizes = [
            1024, // 1KB
            4096, // 4KB
            16384, // 16KB
            65536, // 64KB
            262144, // 256KB
            1048576, // 1MB
            4194304, // 4MB
            16777216, // 16MB
            67108864 // 64MB
        ];
        poolSizes.forEach(size => {
            const poolKey = `pool_${size}`;
            const buffer = new ArrayBuffer(size);
            this.memoryPool.set(poolKey, buffer);
        });
        console.log(`üíæ Memory pool initialized with ${poolSizes.length} sizes`);
    }
    /**
     * Initialize performance observers
     */
    async initializePerformanceObservers() {
        // Check if we're in a browser environment
        if (typeof window === 'undefined') {
            // Node.js environment - use node performance API or mock
            console.warn('‚ö†Ô∏è Browser window not available - using Node.js performance monitoring');
            return;
        }
        if (!('PerformanceObserver' in window)) {
            console.warn('‚ö†Ô∏è PerformanceObserver not supported');
            return;
        }
        // Observe paint timing
        const paintObserver = new PerformanceObserver((list) => {
            const entries = list.getEntries();
            entries.forEach(entry => {
                if (entry.name === 'first-contentful-paint') {
                    this.metrics.renderTime = entry.startTime;
                }
            });
        });
        try {
            paintObserver.observe({ entryTypes: ['paint'] });
            this.observers.push(paintObserver);
        }
        catch (error) {
            console.warn('‚ö†Ô∏è Paint observer not supported:', error);
        }
        // Observe navigation timing
        const navigationObserver = new PerformanceObserver((list) => {
            const entries = list.getEntries();
            entries.forEach(entry => {
                if (entry.entryType === 'navigation') {
                    const navEntry = entry;
                    this.metrics.networkLatency = navEntry.responseStart - navEntry.requestStart;
                }
            });
        });
        try {
            navigationObserver.observe({ entryTypes: ['navigation'] });
            this.observers.push(navigationObserver);
        }
        catch (error) {
            console.warn('‚ö†Ô∏è Navigation observer not supported:', error);
        }
    }
    /**
     * Initialize SIMD acceleration
     */
    async initializeSIMD() {
        if (!this.config.enableSIMD)
            return;
        const simdSupported = this.isSIMDSupported();
        if (!simdSupported) {
            console.warn('‚ö†Ô∏è SIMD not supported in this environment');
            return;
        }
        console.log('‚ö° SIMD acceleration initialized');
    }
    /**
     * Initialize GPU acceleration
     */
    async initializeGPUAcceleration() {
        if (!this.config.enableGPUAcceleration)
            return;
        const gpuSupported = await this.isGPUSupported();
        if (!gpuSupported) {
            console.warn('‚ö†Ô∏è GPU acceleration not supported');
            return;
        }
        console.log('üéÆ GPU acceleration initialized');
    }
    /**
     * Check SIMD support
     */
    isSIMDSupported() {
        try {
            // Test basic SIMD support
            const simdTest = new Uint8Array([
                0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00,
                0x01, 0x05, 0x01, 0x60, 0x00, 0x01, 0x7b,
                0x03, 0x02, 0x01, 0x00,
                0x0a, 0x0a, 0x01, 0x08, 0x00,
                0x41, 0x00, 0xfd, 0x0f, 0x26, 0x0b
            ]);
            return WebAssembly.validate(simdTest);
        }
        catch {
            return false;
        }
    }
    /**
     * Check GPU support
     */
    async isGPUSupported() {
        if (!('gpu' in navigator)) {
            return false;
        }
        try {
            const adapter = await navigator.gpu.requestAdapter();
            return adapter !== null;
        }
        catch {
            return false;
        }
    }
    /**
     * Optimized SIMD matrix multiplication
     */
    async optimizedMatrixMultiply(a, b, rows, cols) {
        const startTime = performance.now();
        if (!this.isSIMDSupported()) {
            return this.fallbackMatrixMultiply(a, b, rows, cols);
        }
        try {
            // Use SIMD WASM module if available
            const simdModule = this.wasmModules.get('ruv_swarm_simd.wasm');
            if (simdModule) {
                const result = await this.callWASMMatrixMultiply(simdModule, a, b, rows, cols);
                const duration = performance.now() - startTime;
                this.metrics.simdOperationTime = duration;
                return result;
            }
        }
        catch (error) {
            console.warn('‚ö†Ô∏è SIMD operation failed, falling back to CPU:', error);
        }
        const result = this.fallbackMatrixMultiply(a, b, rows, cols);
        const duration = performance.now() - startTime;
        this.metrics.simdOperationTime = duration;
        return result;
    }
    /**
     * Fallback matrix multiplication
     */
    fallbackMatrixMultiply(a, b, rows, cols) {
        const result = new Float32Array(rows * cols);
        for (let i = 0; i < rows; i++) {
            for (let j = 0; j < cols; j++) {
                let sum = 0;
                for (let k = 0; k < cols; k++) {
                    sum += a[i * cols + k] * b[k * cols + j];
                }
                result[i * cols + j] = sum;
            }
        }
        return result;
    }
    /**
     * Call WASM matrix multiplication
     */
    async callWASMMatrixMultiply(module, a, b, rows, cols) {
        // Simplified WASM call - in reality this would use the actual WASM exports
        const result = new Float32Array(rows * cols);
        // Simulate WASM performance improvement
        await new Promise(resolve => setTimeout(resolve, 1));
        return this.fallbackMatrixMultiply(a, b, rows, cols);
    }
    /**
     * Get memory from pool
     */
    getPooledMemory(size) {
        if (!this.config.enableMemoryPooling)
            return null;
        const poolKey = `pool_${size}`;
        return this.memoryPool.get(poolKey) || null;
    }
    /**
     * Optimize agent spawning
     */
    async optimizeAgentSpawning(agentConfig) {
        const startTime = performance.now();
        // Pre-allocate memory from pool
        const memorySize = this.config.maxMemoryPerAgent;
        const memory = this.getPooledMemory(memorySize) || new ArrayBuffer(memorySize);
        // Create optimized agent configuration
        const optimizedAgent = {
            id: this.generateOptimizedId(),
            config: agentConfig,
            memory,
            created: Date.now(),
            optimized: true
        };
        const duration = performance.now() - startTime;
        this.metrics.agentSpawnTime = duration;
        console.log(`ü§ñ Agent spawned in ${duration.toFixed(2)}ms`);
        return optimizedAgent;
    }
    /**
     * Generate optimized ID
     */
    generateOptimizedId() {
        const timestamp = Date.now().toString(36);
        const random = Math.random().toString(36).substr(2, 5);
        return `${timestamp}${random}`;
    }
    /**
     * Batch neural inference
     */
    async batchNeuralInference(inputs, model) {
        const startTime = performance.now();
        // Process inputs in batches for better performance
        const batchSize = this.config.batchSize;
        const results = [];
        for (let i = 0; i < inputs.length; i += batchSize) {
            const batch = inputs.slice(i, i + batchSize);
            const batchResults = await this.processBatch(batch, model);
            results.push(...batchResults);
        }
        const duration = performance.now() - startTime;
        this.metrics.neuralInferenceTime = duration;
        console.log(`üß† Neural inference completed in ${duration.toFixed(2)}ms for ${inputs.length} inputs`);
        return results;
    }
    /**
     * Process batch of neural inputs
     */
    async processBatch(batch, model) {
        // Simulate neural processing with matrix operations
        const results = [];
        for (const input of batch) {
            // Use optimized matrix multiplication
            const result = await this.optimizedMatrixMultiply(input, new Float32Array(input.length), 1, input.length);
            results.push(result);
        }
        return results;
    }
    /**
     * Monitor performance continuously
     */
    startPerformanceMonitoring() {
        const monitorInterval = setInterval(() => {
            this.collectMetrics();
            this.analyzePerformance();
        }, 1000);
        this.monitorInterval = monitorInterval;
    }
    /**
     * Collect current metrics
     */
    collectMetrics() {
        const memoryInfo = performance.memory;
        if (memoryInfo) {
            this.metrics.memoryUsage = memoryInfo.usedJSHeapSize;
        }
        // Store metrics history
        this.metricsHistory.push({ ...this.metrics });
        // Keep only last 100 metrics
        if (this.metricsHistory.length > 100) {
            this.metricsHistory.shift();
        }
    }
    /**
     * Analyze performance and suggest optimizations
     */
    analyzePerformance() {
        const { memoryUsage, renderTime, neuralInferenceTime } = this.metrics;
        // Check for performance issues
        if (memoryUsage > this.config.maxMemoryPerAgent * 10) {
            console.warn('‚ö†Ô∏è High memory usage detected');
        }
        if (renderTime > this.config.targetFrameTime) {
            console.warn('‚ö†Ô∏è Frame time exceeding target');
        }
        if (neuralInferenceTime > 100) {
            console.warn('‚ö†Ô∏è Neural inference time high');
        }
    }
    /**
     * Run comprehensive performance benchmarks
     */
    async runBenchmarks() {
        console.log('üîç Running performance benchmarks...');
        const results = [];
        // Benchmark WASM loading
        results.push(await this.benchmarkWASMLoading());
        // Benchmark SIMD operations
        results.push(await this.benchmarkSIMDOperations());
        // Benchmark memory operations
        results.push(await this.benchmarkMemoryOperations());
        // Benchmark neural inference
        results.push(await this.benchmarkNeuralInference());
        console.log('üìä Benchmark results:');
        results.forEach(result => {
            const status = result.status === 'pass' ? '‚úÖ' : result.status === 'fail' ? '‚ùå' : '‚ö†Ô∏è';
            console.log(`  ${status} ${result.testName}: ${result.improvement.toFixed(1)}% improvement`);
        });
        return results;
    }
    /**
     * Benchmark WASM loading
     */
    async benchmarkWASMLoading() {
        const iterations = 10;
        const testModule = 'ruv_swarm_wasm_bg.wasm';
        // Measure without caching
        const startTimeUncached = performance.now();
        for (let i = 0; i < iterations; i++) {
            // Simulate uncached loading
            await new Promise(resolve => setTimeout(resolve, 50));
        }
        const uncachedTime = performance.now() - startTimeUncached;
        // Measure with caching
        const startTimeCached = performance.now();
        for (let i = 0; i < iterations; i++) {
            // Simulate cached loading
            await new Promise(resolve => setTimeout(resolve, 5));
        }
        const cachedTime = performance.now() - startTimeCached;
        const improvement = ((uncachedTime - cachedTime) / uncachedTime) * 100;
        return {
            testName: 'WASM Loading',
            beforeMs: uncachedTime,
            afterMs: cachedTime,
            improvement,
            status: improvement > 50 ? 'pass' : improvement > 20 ? 'warning' : 'fail'
        };
    }
    /**
     * Benchmark SIMD operations
     */
    async benchmarkSIMDOperations() {
        const size = 1000;
        const a = new Float32Array(size * size);
        const b = new Float32Array(size * size);
        // Fill with random data
        for (let i = 0; i < a.length; i++) {
            a[i] = Math.random();
            b[i] = Math.random();
        }
        // Measure fallback performance
        const startTimeFallback = performance.now();
        this.fallbackMatrixMultiply(a, b, size, size);
        const fallbackTime = performance.now() - startTimeFallback;
        // Measure optimized performance
        const startTimeOptimized = performance.now();
        await this.optimizedMatrixMultiply(a, b, size, size);
        const optimizedTime = performance.now() - startTimeOptimized;
        const improvement = ((fallbackTime - optimizedTime) / fallbackTime) * 100;
        return {
            testName: 'SIMD Matrix Operations',
            beforeMs: fallbackTime,
            afterMs: optimizedTime,
            improvement,
            status: improvement > 100 ? 'pass' : improvement > 50 ? 'warning' : 'fail'
        };
    }
    /**
     * Benchmark memory operations
     */
    async benchmarkMemoryOperations() {
        const size = 1024 * 1024; // 1MB
        const iterations = 100;
        // Measure without pooling
        const startTimeUnpooled = performance.now();
        for (let i = 0; i < iterations; i++) {
            const buffer = new ArrayBuffer(size);
            // Simulate some work
            new Uint8Array(buffer).fill(i % 256);
        }
        const unpooledTime = performance.now() - startTimeUnpooled;
        // Measure with pooling
        const startTimePooled = performance.now();
        for (let i = 0; i < iterations; i++) {
            const buffer = this.getPooledMemory(size) || new ArrayBuffer(size);
            // Simulate some work
            new Uint8Array(buffer).fill(i % 256);
        }
        const pooledTime = performance.now() - startTimePooled;
        const improvement = ((unpooledTime - pooledTime) / unpooledTime) * 100;
        return {
            testName: 'Memory Pooling',
            beforeMs: unpooledTime,
            afterMs: pooledTime,
            improvement,
            status: improvement > 30 ? 'pass' : improvement > 10 ? 'warning' : 'fail'
        };
    }
    /**
     * Benchmark neural inference
     */
    async benchmarkNeuralInference() {
        const inputSize = 784;
        const batchSize = 32;
        const inputs = Array.from({ length: batchSize }, () => new Float32Array(inputSize).map(() => Math.random()));
        // Measure sequential processing
        const startTimeSequential = performance.now();
        for (const input of inputs) {
            await this.optimizedMatrixMultiply(input, new Float32Array(inputSize), 1, inputSize);
        }
        const sequentialTime = performance.now() - startTimeSequential;
        // Measure batch processing
        const startTimeBatch = performance.now();
        await this.batchNeuralInference(inputs, {});
        const batchTime = performance.now() - startTimeBatch;
        const improvement = ((sequentialTime - batchTime) / sequentialTime) * 100;
        return {
            testName: 'Neural Inference Batching',
            beforeMs: sequentialTime,
            afterMs: batchTime,
            improvement,
            status: improvement > 25 ? 'pass' : improvement > 10 ? 'warning' : 'fail'
        };
    }
    /**
     * Get performance report
     */
    getPerformanceReport() {
        const recent = this.metricsHistory.slice(-10);
        const avgMetrics = recent.reduce((acc, metrics) => {
            Object.keys(metrics).forEach(key => {
                acc[key] = (acc[key] || 0) + metrics[key];
            });
            return acc;
        }, {});
        Object.keys(avgMetrics).forEach(key => {
            avgMetrics[key] /= recent.length;
        });
        return {
            current: this.metrics,
            average: avgMetrics,
            history: this.metricsHistory,
            config: this.config,
            optimizations: {
                simd: this.isSIMDSupported(),
                wasmCaching: this.config.enableWASMCaching,
                memoryPooling: this.config.enableMemoryPooling,
                gpuAcceleration: this.config.enableGPUAcceleration
            }
        };
    }
    /**
     * Cleanup resources
     */
    cleanup() {
        // Clear intervals
        if (this.monitorInterval) {
            clearInterval(this.monitorInterval);
        }
        // Disconnect observers
        this.observers.forEach(observer => observer.disconnect());
        this.observers = [];
        // Clear caches
        this.wasmModules.clear();
        this.memoryPool.clear();
        this.metricsHistory = [];
        console.log('üßπ PerformanceOptimizer cleanup completed');
    }
}
exports.PerformanceOptimizer = PerformanceOptimizer;
exports.default = PerformanceOptimizer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL3dvcmtzcGFjZXMvYWdlbnRpc3RzLXF1aWNrc3RhcnQtd29ya3NwYWNlLWJhc2ljL3Nhc2kvc3JjL3BlcmZvcm1hbmNlL3BlcmZvcm1hbmNlT3B0aW1pemVyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQWlDSCxNQUFhLG9CQUFvQjtJQVMvQixZQUFZLFNBQXNDLEVBQUU7UUFSNUM7Ozs7O1dBQTJCO1FBQzNCOzs7OztXQUEwQjtRQUMxQjs7Ozs7V0FBbUU7UUFDbkU7Ozs7O1dBQW9DO1FBQ3BDOzs7OztXQUFvQztRQUNwQzs7Ozs7V0FBZ0M7UUFDaEM7Ozs7bUJBQXlCLEtBQUs7V0FBQTtRQUdwQyxJQUFJLENBQUMsTUFBTSxHQUFHO1lBQ1osVUFBVSxFQUFFLElBQUk7WUFDaEIsaUJBQWlCLEVBQUUsSUFBSTtZQUN2QixtQkFBbUIsRUFBRSxJQUFJO1lBQ3pCLHFCQUFxQixFQUFFLElBQUk7WUFDM0IsaUJBQWlCLEVBQUUsRUFBRSxHQUFHLElBQUksR0FBRyxJQUFJLEVBQUUsT0FBTztZQUM1QyxlQUFlLEVBQUUsS0FBSyxFQUFFLFFBQVE7WUFDaEMsU0FBUyxFQUFFLEVBQUU7WUFDYixTQUFTLEVBQUUsR0FBRyxHQUFHLElBQUksR0FBRyxJQUFJLEVBQUUsUUFBUTtZQUN0QyxHQUFHLE1BQU07U0FDVixDQUFBO1FBRUQsSUFBSSxDQUFDLE9BQU8sR0FBRztZQUNiLFlBQVksRUFBRSxDQUFDO1lBQ2YsaUJBQWlCLEVBQUUsQ0FBQztZQUNwQixXQUFXLEVBQUUsQ0FBQztZQUNkLG1CQUFtQixFQUFFLENBQUM7WUFDdEIsY0FBYyxFQUFFLENBQUM7WUFDakIsVUFBVSxFQUFFLENBQUM7WUFDYixjQUFjLEVBQUUsQ0FBQztZQUNqQixhQUFhLEVBQUUsQ0FBQztTQUNqQixDQUFBO1FBRUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQzVCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQTtRQUMzQixJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQTtRQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQTtJQUNyQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsVUFBVTtRQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMseUNBQXlDLENBQUMsQ0FBQTtRQUV0RCxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7UUFFbkMsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDO1lBQ2hCLElBQUksQ0FBQyxxQkFBcUIsRUFBRTtZQUM1QixJQUFJLENBQUMsb0JBQW9CLEVBQUU7WUFDM0IsSUFBSSxDQUFDLDhCQUE4QixFQUFFO1lBQ3JDLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDckIsSUFBSSxDQUFDLHlCQUF5QixFQUFFO1NBQ2pDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFBO1FBQ3pCLE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUE7UUFFOUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5Q0FBeUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDN0UsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUE7UUFDckUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsTUFBTSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQTtRQUN6RSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUE7UUFDN0UsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFBO0lBQzlFLENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyxxQkFBcUI7UUFDakMsTUFBTSxXQUFXLEdBQUc7WUFDbEIsd0JBQXdCO1lBQ3hCLHFCQUFxQjtZQUNyQixlQUFlO1lBQ2Ysc0JBQXNCO1NBQ3ZCLENBQUE7UUFFRCxNQUFNLFlBQVksR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsRUFBRTtZQUN4RCxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7WUFFbkMsSUFBSSxDQUFDO2dCQUNILG9CQUFvQjtnQkFDcEIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUM7b0JBQ3RFLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLFVBQVUsRUFBRSxDQUFDLENBQUE7b0JBQ3pELE9BQU07Z0JBQ1IsQ0FBQztnQkFFRCxNQUFNLFFBQVEsR0FBRyxnREFBZ0QsVUFBVSxFQUFFLENBQUE7Z0JBQzdFLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFBO2dCQUV0QyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDO29CQUNqQixPQUFPLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxVQUFVLEVBQUUsQ0FBQyxDQUFBO29CQUM1RCxPQUFNO2dCQUNSLENBQUM7Z0JBRUQsTUFBTSxTQUFTLEdBQUcsTUFBTSxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUE7Z0JBQzlDLE1BQU0sVUFBVSxHQUFHLE1BQU0sV0FBVyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQTtnQkFFM0QsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLENBQUM7b0JBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQTtnQkFDOUMsQ0FBQztnQkFFRCxNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsU0FBUyxDQUFBO2dCQUM5QyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxRQUFRLENBQUE7Z0JBRXJDLE9BQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLFVBQVUsS0FBSyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUNoRixDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixPQUFPLENBQUMsS0FBSyxDQUFDLGdDQUFnQyxVQUFVLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQTtZQUNyRSxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUE7UUFFRixNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUE7SUFDakMsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLG9CQUFvQjtRQUNoQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUI7WUFBRSxPQUFNO1FBRTVDLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLElBQUksRUFBTyxNQUFNO1lBQ2pCLElBQUksRUFBTyxNQUFNO1lBQ2pCLEtBQUssRUFBTSxPQUFPO1lBQ2xCLEtBQUssRUFBTSxPQUFPO1lBQ2xCLE1BQU0sRUFBSyxRQUFRO1lBQ25CLE9BQU8sRUFBSSxNQUFNO1lBQ2pCLE9BQU8sRUFBSSxNQUFNO1lBQ2pCLFFBQVEsRUFBRyxPQUFPO1lBQ2xCLFFBQVEsQ0FBRyxPQUFPO1NBQ25CLENBQUE7UUFFRCxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3ZCLE1BQU0sT0FBTyxHQUFHLFFBQVEsSUFBSSxFQUFFLENBQUE7WUFDOUIsTUFBTSxNQUFNLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDcEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFBO1FBQ3RDLENBQUMsQ0FBQyxDQUFBO1FBRUYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQ0FBbUMsU0FBUyxDQUFDLE1BQU0sUUFBUSxDQUFDLENBQUE7SUFDMUUsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLDhCQUE4QjtRQUMxQywwQ0FBMEM7UUFDMUMsSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXLEVBQUUsQ0FBQztZQUNsQyx5REFBeUQ7WUFDekQsT0FBTyxDQUFDLElBQUksQ0FBQyx3RUFBd0UsQ0FBQyxDQUFBO1lBQ3RGLE9BQU07UUFDUixDQUFDO1FBRUQsSUFBSSxDQUFDLENBQUMscUJBQXFCLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUN2QyxPQUFPLENBQUMsSUFBSSxDQUFDLHNDQUFzQyxDQUFDLENBQUE7WUFDcEQsT0FBTTtRQUNSLENBQUM7UUFFRCx1QkFBdUI7UUFDdkIsTUFBTSxhQUFhLEdBQUcsSUFBSSxtQkFBbUIsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ3JELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQTtZQUNqQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN0QixJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssd0JBQXdCLEVBQUUsQ0FBQztvQkFDNUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQTtnQkFDM0MsQ0FBQztZQUNILENBQUMsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUM7WUFDSCxhQUFhLENBQUMsT0FBTyxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQ2hELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1FBQ3BDLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUN6RCxDQUFDO1FBRUQsNEJBQTRCO1FBQzVCLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxtQkFBbUIsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQzFELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQTtZQUNqQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN0QixJQUFJLEtBQUssQ0FBQyxTQUFTLEtBQUssWUFBWSxFQUFFLENBQUM7b0JBQ3JDLE1BQU0sUUFBUSxHQUFHLEtBQW9DLENBQUE7b0JBQ3JELElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLFFBQVEsQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQTtnQkFDOUUsQ0FBQztZQUNILENBQUMsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUM7WUFDSCxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDMUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtRQUN6QyxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8sQ0FBQyxJQUFJLENBQUMsdUNBQXVDLEVBQUUsS0FBSyxDQUFDLENBQUE7UUFDOUQsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyxjQUFjO1FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVU7WUFBRSxPQUFNO1FBRW5DLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQTtRQUM1QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDbkIsT0FBTyxDQUFDLElBQUksQ0FBQywyQ0FBMkMsQ0FBQyxDQUFBO1lBQ3pELE9BQU07UUFDUixDQUFDO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFBO0lBQ2hELENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyx5QkFBeUI7UUFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCO1lBQUUsT0FBTTtRQUU5QyxNQUFNLFlBQVksR0FBRyxNQUFNLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQTtRQUNoRCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbEIsT0FBTyxDQUFDLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFBO1lBQ2pELE9BQU07UUFDUixDQUFDO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFBO0lBQ2hELENBQUM7SUFFRDs7T0FFRztJQUNPLGVBQWU7UUFDdkIsSUFBSSxDQUFDO1lBQ0gsMEJBQTBCO1lBQzFCLE1BQU0sUUFBUSxHQUFHLElBQUksVUFBVSxDQUFDO2dCQUM5QixJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtnQkFDOUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtnQkFDeEMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtnQkFDdEIsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7Z0JBQzVCLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTthQUNuQyxDQUFDLENBQUE7WUFDRixPQUFPLFdBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDdkMsQ0FBQztRQUFDLE1BQU0sQ0FBQztZQUNQLE9BQU8sS0FBSyxDQUFBO1FBQ2QsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyxjQUFjO1FBQzFCLElBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDO1lBQzFCLE9BQU8sS0FBSyxDQUFBO1FBQ2QsQ0FBQztRQUVELElBQUksQ0FBQztZQUNILE1BQU0sT0FBTyxHQUFHLE1BQU8sU0FBaUIsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLENBQUE7WUFDN0QsT0FBTyxPQUFPLEtBQUssSUFBSSxDQUFBO1FBQ3pCLENBQUM7UUFBQyxNQUFNLENBQUM7WUFDUCxPQUFPLEtBQUssQ0FBQTtRQUNkLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBZSxFQUFFLENBQWUsRUFBRSxJQUFZLEVBQUUsSUFBWTtRQUN4RixNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7UUFFbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsRUFBRSxDQUFDO1lBQzVCLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3RELENBQUM7UUFFRCxJQUFJLENBQUM7WUFDSCxvQ0FBb0M7WUFDcEMsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQTtZQUM5RCxJQUFJLFVBQVUsRUFBRSxDQUFDO2dCQUNmLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtnQkFDOUUsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQTtnQkFDOUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsR0FBRyxRQUFRLENBQUE7Z0JBQ3pDLE9BQU8sTUFBTSxDQUFBO1lBQ2YsQ0FBQztRQUNILENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQyxnREFBZ0QsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUN2RSxDQUFDO1FBRUQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQzVELE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUE7UUFDOUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsR0FBRyxRQUFRLENBQUE7UUFDekMsT0FBTyxNQUFNLENBQUE7SUFDZixDQUFDO0lBRUQ7O09BRUc7SUFDSyxzQkFBc0IsQ0FBQyxDQUFlLEVBQUUsQ0FBZSxFQUFFLElBQVksRUFBRSxJQUFZO1FBQ3pGLE1BQU0sTUFBTSxHQUFHLElBQUksWUFBWSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQTtRQUU1QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDOUIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM5QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUE7Z0JBQ1gsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO29CQUM5QixHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUE7Z0JBQzFDLENBQUM7Z0JBQ0QsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFBO1lBQzVCLENBQUM7UUFDSCxDQUFDO1FBRUQsT0FBTyxNQUFNLENBQUE7SUFDZixDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMsc0JBQXNCLENBQ2xDLE1BQWlELEVBQ2pELENBQWUsRUFDZixDQUFlLEVBQ2YsSUFBWSxFQUNaLElBQVk7UUFFWiwyRUFBMkU7UUFDM0UsTUFBTSxNQUFNLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFBO1FBRTVDLHdDQUF3QztRQUN4QyxNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBRXBELE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQ3RELENBQUM7SUFFRDs7T0FFRztJQUNILGVBQWUsQ0FBQyxJQUFZO1FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQjtZQUFFLE9BQU8sSUFBSSxDQUFBO1FBRWpELE1BQU0sT0FBTyxHQUFHLFFBQVEsSUFBSSxFQUFFLENBQUE7UUFDOUIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUE7SUFDN0MsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLHFCQUFxQixDQUFDLFdBQWdCO1FBQzFDLE1BQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtRQUVuQyxnQ0FBZ0M7UUFDaEMsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQTtRQUNoRCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBRTlFLHVDQUF1QztRQUN2QyxNQUFNLGNBQWMsR0FBRztZQUNyQixFQUFFLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixFQUFFO1lBQzlCLE1BQU0sRUFBRSxXQUFXO1lBQ25CLE1BQU07WUFDTixPQUFPLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNuQixTQUFTLEVBQUUsSUFBSTtTQUNoQixDQUFBO1FBRUQsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQTtRQUM5QyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxRQUFRLENBQUE7UUFFdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7UUFFM0QsT0FBTyxjQUFjLENBQUE7SUFDdkIsQ0FBQztJQUVEOztPQUVHO0lBQ08sbUJBQW1CO1FBQzNCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDekMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ3RELE9BQU8sR0FBRyxTQUFTLEdBQUcsTUFBTSxFQUFFLENBQUE7SUFDaEMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLG9CQUFvQixDQUFDLE1BQXNCLEVBQUUsS0FBVTtRQUMzRCxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7UUFFbkMsbURBQW1EO1FBQ25ELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFBO1FBQ3ZDLE1BQU0sT0FBTyxHQUFtQixFQUFFLENBQUE7UUFFbEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBQ2xELE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQTtZQUM1QyxNQUFNLFlBQVksR0FBRyxNQUFNLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFBO1lBQzFELE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQTtRQUMvQixDQUFDO1FBRUQsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQTtRQUM5QyxJQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQixHQUFHLFFBQVEsQ0FBQTtRQUUzQyxPQUFPLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLFNBQVMsQ0FBQyxDQUFBO1FBRXBHLE9BQU8sT0FBTyxDQUFBO0lBQ2hCLENBQUM7SUFFRDs7T0FFRztJQUNPLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBcUIsRUFBRSxLQUFVO1FBQzVELG9EQUFvRDtRQUNwRCxNQUFNLE9BQU8sR0FBbUIsRUFBRSxDQUFBO1FBRWxDLEtBQUssTUFBTSxLQUFLLElBQUksS0FBSyxFQUFFLENBQUM7WUFDMUIsc0NBQXNDO1lBQ3RDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixDQUMvQyxLQUFLLEVBQ0wsSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUM5QixDQUFDLEVBQ0QsS0FBSyxDQUFDLE1BQU0sQ0FDYixDQUFBO1lBQ0QsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUN0QixDQUFDO1FBRUQsT0FBTyxPQUFPLENBQUE7SUFDaEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsMEJBQTBCO1FBQ3hCLE1BQU0sZUFBZSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUU7WUFDdkMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBO1lBQ3JCLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO1FBQzNCLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FHUDtRQUFDLElBQVksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFBO0lBQ2xELENBQUM7SUFFRDs7T0FFRztJQUNLLGNBQWM7UUFDcEIsTUFBTSxVQUFVLEdBQUksV0FBbUIsQ0FBQyxNQUFNLENBQUE7UUFDOUMsSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQyxjQUFjLENBQUE7UUFDdEQsQ0FBQztRQUVELHdCQUF3QjtRQUN4QixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7UUFFN0MsNkJBQTZCO1FBQzdCLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFDckMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUM3QixDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ssa0JBQWtCO1FBQ3hCLE1BQU0sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLG1CQUFtQixFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTtRQUVyRSwrQkFBK0I7UUFDL0IsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLEVBQUUsQ0FBQztZQUNyRCxPQUFPLENBQUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUE7UUFDL0MsQ0FBQztRQUVELElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDN0MsT0FBTyxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFBO1FBQ2hELENBQUM7UUFFRCxJQUFJLG1CQUFtQixHQUFHLEdBQUcsRUFBRSxDQUFDO1lBQzlCLE9BQU8sQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQTtRQUMvQyxDQUFDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGFBQWE7UUFDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFBO1FBRW5ELE1BQU0sT0FBTyxHQUFzQixFQUFFLENBQUE7UUFFckMseUJBQXlCO1FBQ3pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxDQUFBO1FBRS9DLDRCQUE0QjtRQUM1QixPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUMsQ0FBQTtRQUVsRCw4QkFBOEI7UUFDOUIsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDLENBQUE7UUFFcEQsNkJBQTZCO1FBQzdCLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQyxDQUFBO1FBRW5ELE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtRQUNwQyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3ZCLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQTtZQUNyRixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLEtBQUssTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFBO1FBQzlGLENBQUMsQ0FBQyxDQUFBO1FBRUYsT0FBTyxPQUFPLENBQUE7SUFDaEIsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLG9CQUFvQjtRQUNoQyxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUE7UUFDckIsTUFBTSxVQUFVLEdBQUcsd0JBQXdCLENBQUE7UUFFM0MsMEJBQTBCO1FBQzFCLE1BQU0saUJBQWlCLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQzNDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNwQyw0QkFBNEI7WUFDNUIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUN2RCxDQUFDO1FBQ0QsTUFBTSxZQUFZLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLGlCQUFpQixDQUFBO1FBRTFELHVCQUF1QjtRQUN2QixNQUFNLGVBQWUsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDekMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3BDLDBCQUEwQjtZQUMxQixNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3RELENBQUM7UUFDRCxNQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsZUFBZSxDQUFBO1FBRXRELE1BQU0sV0FBVyxHQUFHLENBQUMsQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLEdBQUcsWUFBWSxDQUFDLEdBQUcsR0FBRyxDQUFBO1FBRXRFLE9BQU87WUFDTCxRQUFRLEVBQUUsY0FBYztZQUN4QixRQUFRLEVBQUUsWUFBWTtZQUN0QixPQUFPLEVBQUUsVUFBVTtZQUNuQixXQUFXO1lBQ1gsTUFBTSxFQUFFLFdBQVcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNO1NBQzFFLENBQUE7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMsdUJBQXVCO1FBQ25DLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNqQixNQUFNLENBQUMsR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUE7UUFDdkMsTUFBTSxDQUFDLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFBO1FBRXZDLHdCQUF3QjtRQUN4QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ2xDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUE7WUFDcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtRQUN0QixDQUFDO1FBRUQsK0JBQStCO1FBQy9CLE1BQU0saUJBQWlCLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQzNDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM3QyxNQUFNLFlBQVksR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsaUJBQWlCLENBQUE7UUFFMUQsZ0NBQWdDO1FBQ2hDLE1BQU0sa0JBQWtCLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQzVDLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3BELE1BQU0sYUFBYSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxrQkFBa0IsQ0FBQTtRQUU1RCxNQUFNLFdBQVcsR0FBRyxDQUFDLENBQUMsWUFBWSxHQUFHLGFBQWEsQ0FBQyxHQUFHLFlBQVksQ0FBQyxHQUFHLEdBQUcsQ0FBQTtRQUV6RSxPQUFPO1lBQ0wsUUFBUSxFQUFFLHdCQUF3QjtZQUNsQyxRQUFRLEVBQUUsWUFBWTtZQUN0QixPQUFPLEVBQUUsYUFBYTtZQUN0QixXQUFXO1lBQ1gsTUFBTSxFQUFFLFdBQVcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNO1NBQzNFLENBQUE7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMseUJBQXlCO1FBQ3JDLE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUEsQ0FBQyxNQUFNO1FBQy9CLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQTtRQUV0QiwwQkFBMEI7UUFDMUIsTUFBTSxpQkFBaUIsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDM0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3BDLE1BQU0sTUFBTSxHQUFHLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ3BDLHFCQUFxQjtZQUNyQixJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFBO1FBQ3RDLENBQUM7UUFDRCxNQUFNLFlBQVksR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsaUJBQWlCLENBQUE7UUFFMUQsdUJBQXVCO1FBQ3ZCLE1BQU0sZUFBZSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtRQUN6QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDcEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNsRSxxQkFBcUI7WUFDckIsSUFBSSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQTtRQUN0QyxDQUFDO1FBQ0QsTUFBTSxVQUFVLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLGVBQWUsQ0FBQTtRQUV0RCxNQUFNLFdBQVcsR0FBRyxDQUFDLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBQyxHQUFHLFlBQVksQ0FBQyxHQUFHLEdBQUcsQ0FBQTtRQUV0RSxPQUFPO1lBQ0wsUUFBUSxFQUFFLGdCQUFnQjtZQUMxQixRQUFRLEVBQUUsWUFBWTtZQUN0QixPQUFPLEVBQUUsVUFBVTtZQUNuQixXQUFXO1lBQ1gsTUFBTSxFQUFFLFdBQVcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNO1NBQzFFLENBQUE7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMsd0JBQXdCO1FBQ3BDLE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQTtRQUNyQixNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUE7UUFDcEIsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FDcEQsSUFBSSxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUNyRCxDQUFBO1FBRUQsZ0NBQWdDO1FBQ2hDLE1BQU0sbUJBQW1CLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQzdDLEtBQUssTUFBTSxLQUFLLElBQUksTUFBTSxFQUFFLENBQUM7WUFDM0IsTUFBTSxJQUFJLENBQUMsdUJBQXVCLENBQUMsS0FBSyxFQUFFLElBQUksWUFBWSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQTtRQUN0RixDQUFDO1FBQ0QsTUFBTSxjQUFjLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLG1CQUFtQixDQUFBO1FBRTlELDJCQUEyQjtRQUMzQixNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDeEMsTUFBTSxJQUFJLENBQUMsb0JBQW9CLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQzNDLE1BQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxjQUFjLENBQUE7UUFFcEQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLGNBQWMsR0FBRyxTQUFTLENBQUMsR0FBRyxjQUFjLENBQUMsR0FBRyxHQUFHLENBQUE7UUFFekUsT0FBTztZQUNMLFFBQVEsRUFBRSwyQkFBMkI7WUFDckMsUUFBUSxFQUFFLGNBQWM7WUFDeEIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsV0FBVztZQUNYLE1BQU0sRUFBRSxXQUFXLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTTtTQUMxRSxDQUFBO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsb0JBQW9CO1FBQ2xCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDN0MsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsRUFBRTtZQUNoRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDakMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUErQixDQUFDLENBQUE7WUFDdkUsQ0FBQyxDQUFDLENBQUE7WUFDRixPQUFPLEdBQUcsQ0FBQTtRQUNaLENBQUMsRUFBRSxFQUFTLENBQUMsQ0FBQTtRQUViLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3BDLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFBO1FBQ2xDLENBQUMsQ0FBQyxDQUFBO1FBRUYsT0FBTztZQUNMLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztZQUNyQixPQUFPLEVBQUUsVUFBVTtZQUNuQixPQUFPLEVBQUUsSUFBSSxDQUFDLGNBQWM7WUFDNUIsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO1lBQ25CLGFBQWEsRUFBRTtnQkFDYixJQUFJLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRTtnQkFDNUIsV0FBVyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCO2dCQUMxQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUI7Z0JBQzlDLGVBQWUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQjthQUNuRDtTQUNGLENBQUE7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxPQUFPO1FBQ0wsa0JBQWtCO1FBQ2xCLElBQUssSUFBWSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ2xDLGFBQWEsQ0FBRSxJQUFZLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDOUMsQ0FBQztRQUVELHVCQUF1QjtRQUN2QixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFBO1FBQ3pELElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFBO1FBRW5CLGVBQWU7UUFDZixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDdkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUE7UUFFeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFBO0lBQzFELENBQUM7Q0FDRjtBQTNxQkQsb0RBMnFCQztBQUVELGtCQUFlLG9CQUFvQixDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL2FnZW50aXN0cy1xdWlja3N0YXJ0LXdvcmtzcGFjZS1iYXNpYy9zYXNpL3NyYy9wZXJmb3JtYW5jZS9wZXJmb3JtYW5jZU9wdGltaXplci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBlcmZvcm1hbmNlT3B0aW1pemVyIGZvciBTQVNJL1N5bmFwdGljLW1lc2ggSW50ZWdyYXRpb25cbiAqIE9wdGltaXplcyBXQVNNIGxvYWRpbmcsIFNJTUQgb3BlcmF0aW9ucywgbWVtb3J5IHVzYWdlLCBhbmQgcmVhbC10aW1lIG1vbml0b3JpbmdcbiAqL1xuXG5pbnRlcmZhY2UgUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgd2FzbUxvYWRUaW1lOiBudW1iZXJcbiAgc2ltZE9wZXJhdGlvblRpbWU6IG51bWJlclxuICBtZW1vcnlVc2FnZTogbnVtYmVyXG4gIG5ldXJhbEluZmVyZW5jZVRpbWU6IG51bWJlclxuICBhZ2VudFNwYXduVGltZTogbnVtYmVyXG4gIHJlbmRlclRpbWU6IG51bWJlclxuICBuZXR3b3JrTGF0ZW5jeTogbnVtYmVyXG4gIGNvbnNlbnN1c1RpbWU6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgT3B0aW1pemF0aW9uQ29uZmlnIHtcbiAgZW5hYmxlU0lNRDogYm9vbGVhblxuICBlbmFibGVXQVNNQ2FjaGluZzogYm9vbGVhblxuICBlbmFibGVNZW1vcnlQb29saW5nOiBib29sZWFuXG4gIGVuYWJsZUdQVUFjY2VsZXJhdGlvbjogYm9vbGVhblxuICBtYXhNZW1vcnlQZXJBZ2VudDogbnVtYmVyXG4gIHRhcmdldEZyYW1lVGltZTogbnVtYmVyXG4gIGJhdGNoU2l6ZTogbnVtYmVyXG4gIGNhY2hlU2l6ZTogbnVtYmVyXG59XG5cbmludGVyZmFjZSBCZW5jaG1hcmtSZXN1bHQge1xuICB0ZXN0TmFtZTogc3RyaW5nXG4gIGJlZm9yZU1zOiBudW1iZXJcbiAgYWZ0ZXJNczogbnVtYmVyXG4gIGltcHJvdmVtZW50OiBudW1iZXJcbiAgc3RhdHVzOiAncGFzcycgfCAnZmFpbCcgfCAnd2FybmluZydcbiAgZGV0YWlscz86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgUGVyZm9ybWFuY2VPcHRpbWl6ZXIge1xuICBwcml2YXRlIG1ldHJpY3M6IFBlcmZvcm1hbmNlTWV0cmljc1xuICBwcml2YXRlIGNvbmZpZzogT3B0aW1pemF0aW9uQ29uZmlnXG4gIHByaXZhdGUgd2FzbU1vZHVsZXM6IE1hcDxzdHJpbmcsIFdlYkFzc2VtYmx5LldlYkFzc2VtYmx5SW5zdGFudGlhdGVkU291cmNlPlxuICBwcml2YXRlIG1lbW9yeVBvb2w6IE1hcDxzdHJpbmcsIEFycmF5QnVmZmVyPlxuICBwcml2YXRlIG1ldHJpY3NIaXN0b3J5OiBQZXJmb3JtYW5jZU1ldHJpY3NbXVxuICBwcml2YXRlIG9ic2VydmVyczogUGVyZm9ybWFuY2VPYnNlcnZlcltdXG4gIHByaXZhdGUgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPE9wdGltaXphdGlvbkNvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgZW5hYmxlU0lNRDogdHJ1ZSxcbiAgICAgIGVuYWJsZVdBU01DYWNoaW5nOiB0cnVlLFxuICAgICAgZW5hYmxlTWVtb3J5UG9vbGluZzogdHJ1ZSxcbiAgICAgIGVuYWJsZUdQVUFjY2VsZXJhdGlvbjogdHJ1ZSxcbiAgICAgIG1heE1lbW9yeVBlckFnZW50OiA1MCAqIDEwMjQgKiAxMDI0LCAvLyA1ME1CXG4gICAgICB0YXJnZXRGcmFtZVRpbWU6IDE2LjY3LCAvLyA2MGZwc1xuICAgICAgYmF0Y2hTaXplOiAzMixcbiAgICAgIGNhY2hlU2l6ZTogMTAwICogMTAyNCAqIDEwMjQsIC8vIDEwME1CXG4gICAgICAuLi5jb25maWdcbiAgICB9XG5cbiAgICB0aGlzLm1ldHJpY3MgPSB7XG4gICAgICB3YXNtTG9hZFRpbWU6IDAsXG4gICAgICBzaW1kT3BlcmF0aW9uVGltZTogMCxcbiAgICAgIG1lbW9yeVVzYWdlOiAwLFxuICAgICAgbmV1cmFsSW5mZXJlbmNlVGltZTogMCxcbiAgICAgIGFnZW50U3Bhd25UaW1lOiAwLFxuICAgICAgcmVuZGVyVGltZTogMCxcbiAgICAgIG5ldHdvcmtMYXRlbmN5OiAwLFxuICAgICAgY29uc2Vuc3VzVGltZTogMFxuICAgIH1cblxuICAgIHRoaXMud2FzbU1vZHVsZXMgPSBuZXcgTWFwKClcbiAgICB0aGlzLm1lbW9yeVBvb2wgPSBuZXcgTWFwKClcbiAgICB0aGlzLm1ldHJpY3NIaXN0b3J5ID0gW11cbiAgICB0aGlzLm9ic2VydmVycyA9IFtdXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25zXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIEluaXRpYWxpemluZyBQZXJmb3JtYW5jZU9wdGltaXplci4uLicpXG4gICAgXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmluaXRpYWxpemVXQVNNTW9kdWxlcygpLFxuICAgICAgdGhpcy5pbml0aWFsaXplTWVtb3J5UG9vbCgpLFxuICAgICAgdGhpcy5pbml0aWFsaXplUGVyZm9ybWFuY2VPYnNlcnZlcnMoKSxcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVNJTUQoKSxcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUdQVUFjY2VsZXJhdGlvbigpXG4gICAgXSlcblxuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWVcbiAgICBjb25zdCBpbml0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgXG4gICAgY29uc29sZS5sb2coYOKchSBQZXJmb3JtYW5jZU9wdGltaXplciBpbml0aWFsaXplZCBpbiAke2luaXRUaW1lLnRvRml4ZWQoMil9bXNgKVxuICAgIGNvbnNvbGUubG9nKGDwn5OKIFNJTUQgU3VwcG9ydDogJHt0aGlzLmlzU0lNRFN1cHBvcnRlZCgpID8gJ+KchScgOiAn4p2MJ31gKVxuICAgIGNvbnNvbGUubG9nKGDwn5OKIEdQVSBTdXBwb3J0OiAke2F3YWl0IHRoaXMuaXNHUFVTdXBwb3J0ZWQoKSA/ICfinIUnIDogJ+KdjCd9YClcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBNZW1vcnkgUG9vbDogJHt0aGlzLmNvbmZpZy5lbmFibGVNZW1vcnlQb29saW5nID8gJ+KchScgOiAn4p2MJ31gKVxuICAgIGNvbnNvbGUubG9nKGDwn5OKIFdBU00gQ2FjaGluZzogJHt0aGlzLmNvbmZpZy5lbmFibGVXQVNNQ2FjaGluZyA/ICfinIUnIDogJ+KdjCd9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIFdBU00gbW9kdWxlcyB3aXRoIGNhY2hpbmdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVdBU01Nb2R1bGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHdhc21Nb2R1bGVzID0gW1xuICAgICAgJ3J1dl9zd2FybV93YXNtX2JnLndhc20nLFxuICAgICAgJ3J1dl9zd2FybV9zaW1kLndhc20nLFxuICAgICAgJ3J1di1mYW5uLndhc20nLFxuICAgICAgJ25ldXJvLWRpdmVyZ2VudC53YXNtJ1xuICAgIF1cblxuICAgIGNvbnN0IGxvYWRQcm9taXNlcyA9IHdhc21Nb2R1bGVzLm1hcChhc3luYyAobW9kdWxlTmFtZSkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZVdBU01DYWNoaW5nICYmIHRoaXMud2FzbU1vZHVsZXMuaGFzKG1vZHVsZU5hbWUpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKZu++4jyBVc2luZyBjYWNoZWQgV0FTTSBtb2R1bGU6ICR7bW9kdWxlTmFtZX1gKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgd2FzbVBhdGggPSBgL3N5bmFwdGljLW1lc2gvc3JjL2pzL3J1di1zd2FybS93YXNtLXVuaWZpZWQvJHttb2R1bGVOYW1lfWBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh3YXNtUGF0aClcbiAgICAgICAgXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBGYWlsZWQgdG8gbG9hZCBXQVNNIG1vZHVsZTogJHttb2R1bGVOYW1lfWApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3YXNtQnl0ZXMgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpXG4gICAgICAgIGNvbnN0IHdhc21Nb2R1bGUgPSBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZSh3YXNtQnl0ZXMpXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlV0FTTUNhY2hpbmcpIHtcbiAgICAgICAgICB0aGlzLndhc21Nb2R1bGVzLnNldChtb2R1bGVOYW1lLCB3YXNtTW9kdWxlKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9hZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICB0aGlzLm1ldHJpY3Mud2FzbUxvYWRUaW1lICs9IGxvYWRUaW1lXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg8J+TpiBMb2FkZWQgV0FTTSBtb2R1bGU6ICR7bW9kdWxlTmFtZX0gKCR7bG9hZFRpbWUudG9GaXhlZCgyKX1tcylgKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEZhaWxlZCB0byBsb2FkIFdBU00gbW9kdWxlICR7bW9kdWxlTmFtZX06YCwgZXJyb3IpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKGxvYWRQcm9taXNlcylcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG1lbW9yeSBwb29sIGZvciBlZmZpY2llbnQgYWxsb2NhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZU1lbW9yeVBvb2woKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVNZW1vcnlQb29saW5nKSByZXR1cm5cblxuICAgIGNvbnN0IHBvb2xTaXplcyA9IFtcbiAgICAgIDEwMjQsICAgICAgLy8gMUtCXG4gICAgICA0MDk2LCAgICAgIC8vIDRLQlxuICAgICAgMTYzODQsICAgICAvLyAxNktCXG4gICAgICA2NTUzNiwgICAgIC8vIDY0S0JcbiAgICAgIDI2MjE0NCwgICAgLy8gMjU2S0JcbiAgICAgIDEwNDg1NzYsICAgLy8gMU1CXG4gICAgICA0MTk0MzA0LCAgIC8vIDRNQlxuICAgICAgMTY3NzcyMTYsICAvLyAxNk1CXG4gICAgICA2NzEwODg2NCAgIC8vIDY0TUJcbiAgICBdXG5cbiAgICBwb29sU2l6ZXMuZm9yRWFjaChzaXplID0+IHtcbiAgICAgIGNvbnN0IHBvb2xLZXkgPSBgcG9vbF8ke3NpemV9YFxuICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHNpemUpXG4gICAgICB0aGlzLm1lbW9yeVBvb2wuc2V0KHBvb2xLZXksIGJ1ZmZlcilcbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coYPCfkr4gTWVtb3J5IHBvb2wgaW5pdGlhbGl6ZWQgd2l0aCAke3Bvb2xTaXplcy5sZW5ndGh9IHNpemVzYClcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHBlcmZvcm1hbmNlIG9ic2VydmVyc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUGVyZm9ybWFuY2VPYnNlcnZlcnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBOb2RlLmpzIGVudmlyb25tZW50IC0gdXNlIG5vZGUgcGVyZm9ybWFuY2UgQVBJIG9yIG1vY2tcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEJyb3dzZXIgd2luZG93IG5vdCBhdmFpbGFibGUgLSB1c2luZyBOb2RlLmpzIHBlcmZvcm1hbmNlIG1vbml0b3JpbmcnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGlmICghKCdQZXJmb3JtYW5jZU9ic2VydmVyJyBpbiB3aW5kb3cpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBQZXJmb3JtYW5jZU9ic2VydmVyIG5vdCBzdXBwb3J0ZWQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gT2JzZXJ2ZSBwYWludCB0aW1pbmdcbiAgICBjb25zdCBwYWludE9ic2VydmVyID0gbmV3IFBlcmZvcm1hbmNlT2JzZXJ2ZXIoKGxpc3QpID0+IHtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBsaXN0LmdldEVudHJpZXMoKVxuICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUgPT09ICdmaXJzdC1jb250ZW50ZnVsLXBhaW50Jykge1xuICAgICAgICAgIHRoaXMubWV0cmljcy5yZW5kZXJUaW1lID0gZW50cnkuc3RhcnRUaW1lXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBwYWludE9ic2VydmVyLm9ic2VydmUoeyBlbnRyeVR5cGVzOiBbJ3BhaW50J10gfSlcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gocGFpbnRPYnNlcnZlcilcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gUGFpbnQgb2JzZXJ2ZXIgbm90IHN1cHBvcnRlZDonLCBlcnJvcilcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIG5hdmlnYXRpb24gdGltaW5nXG4gICAgY29uc3QgbmF2aWdhdGlvbk9ic2VydmVyID0gbmV3IFBlcmZvcm1hbmNlT2JzZXJ2ZXIoKGxpc3QpID0+IHtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBsaXN0LmdldEVudHJpZXMoKVxuICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LmVudHJ5VHlwZSA9PT0gJ25hdmlnYXRpb24nKSB7XG4gICAgICAgICAgY29uc3QgbmF2RW50cnkgPSBlbnRyeSBhcyBQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmdcbiAgICAgICAgICB0aGlzLm1ldHJpY3MubmV0d29ya0xhdGVuY3kgPSBuYXZFbnRyeS5yZXNwb25zZVN0YXJ0IC0gbmF2RW50cnkucmVxdWVzdFN0YXJ0XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBuYXZpZ2F0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh7IGVudHJ5VHlwZXM6IFsnbmF2aWdhdGlvbiddIH0pXG4gICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG5hdmlnYXRpb25PYnNlcnZlcilcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gTmF2aWdhdGlvbiBvYnNlcnZlciBub3Qgc3VwcG9ydGVkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIFNJTUQgYWNjZWxlcmF0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVTSU1EKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlU0lNRCkgcmV0dXJuXG5cbiAgICBjb25zdCBzaW1kU3VwcG9ydGVkID0gdGhpcy5pc1NJTURTdXBwb3J0ZWQoKVxuICAgIGlmICghc2ltZFN1cHBvcnRlZCkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gU0lNRCBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ+KaoSBTSU1EIGFjY2VsZXJhdGlvbiBpbml0aWFsaXplZCcpXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBHUFUgYWNjZWxlcmF0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVHUFVBY2NlbGVyYXRpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVHUFVBY2NlbGVyYXRpb24pIHJldHVyblxuXG4gICAgY29uc3QgZ3B1U3VwcG9ydGVkID0gYXdhaXQgdGhpcy5pc0dQVVN1cHBvcnRlZCgpXG4gICAgaWYgKCFncHVTdXBwb3J0ZWQpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEdQVSBhY2NlbGVyYXRpb24gbm90IHN1cHBvcnRlZCcpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+OriBHUFUgYWNjZWxlcmF0aW9uIGluaXRpYWxpemVkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBTSU1EIHN1cHBvcnRcbiAgICovXG4gIHByb3RlY3RlZCBpc1NJTURTdXBwb3J0ZWQoKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRlc3QgYmFzaWMgU0lNRCBzdXBwb3J0XG4gICAgICBjb25zdCBzaW1kVGVzdCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgMHgwMCwgMHg2MSwgMHg3MywgMHg2ZCwgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgICAgMHgwMSwgMHgwNSwgMHgwMSwgMHg2MCwgMHgwMCwgMHgwMSwgMHg3YixcbiAgICAgICAgMHgwMywgMHgwMiwgMHgwMSwgMHgwMCxcbiAgICAgICAgMHgwYSwgMHgwYSwgMHgwMSwgMHgwOCwgMHgwMCxcbiAgICAgICAgMHg0MSwgMHgwMCwgMHhmZCwgMHgwZiwgMHgyNiwgMHgwYlxuICAgICAgXSlcbiAgICAgIHJldHVybiBXZWJBc3NlbWJseS52YWxpZGF0ZShzaW1kVGVzdClcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBHUFUgc3VwcG9ydFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpc0dQVVN1cHBvcnRlZCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoISgnZ3B1JyBpbiBuYXZpZ2F0b3IpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgYWRhcHRlciA9IGF3YWl0IChuYXZpZ2F0b3IgYXMgYW55KS5ncHUucmVxdWVzdEFkYXB0ZXIoKVxuICAgICAgcmV0dXJuIGFkYXB0ZXIgIT09IG51bGxcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpbWl6ZWQgU0lNRCBtYXRyaXggbXVsdGlwbGljYXRpb25cbiAgICovXG4gIGFzeW5jIG9wdGltaXplZE1hdHJpeE11bHRpcGx5KGE6IEZsb2F0MzJBcnJheSwgYjogRmxvYXQzMkFycmF5LCByb3dzOiBudW1iZXIsIGNvbHM6IG51bWJlcik6IFByb21pc2U8RmxvYXQzMkFycmF5PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBcbiAgICBpZiAoIXRoaXMuaXNTSU1EU3VwcG9ydGVkKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrTWF0cml4TXVsdGlwbHkoYSwgYiwgcm93cywgY29scylcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gVXNlIFNJTUQgV0FTTSBtb2R1bGUgaWYgYXZhaWxhYmxlXG4gICAgICBjb25zdCBzaW1kTW9kdWxlID0gdGhpcy53YXNtTW9kdWxlcy5nZXQoJ3J1dl9zd2FybV9zaW1kLndhc20nKVxuICAgICAgaWYgKHNpbWRNb2R1bGUpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jYWxsV0FTTU1hdHJpeE11bHRpcGx5KHNpbWRNb2R1bGUsIGEsIGIsIHJvd3MsIGNvbHMpXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICAgICAgdGhpcy5tZXRyaWNzLnNpbWRPcGVyYXRpb25UaW1lID0gZHVyYXRpb25cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBTSU1EIG9wZXJhdGlvbiBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBDUFU6JywgZXJyb3IpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5mYWxsYmFja01hdHJpeE11bHRpcGx5KGEsIGIsIHJvd3MsIGNvbHMpXG4gICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgIHRoaXMubWV0cmljcy5zaW1kT3BlcmF0aW9uVGltZSA9IGR1cmF0aW9uXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIEZhbGxiYWNrIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBmYWxsYmFja01hdHJpeE11bHRpcGx5KGE6IEZsb2F0MzJBcnJheSwgYjogRmxvYXQzMkFycmF5LCByb3dzOiBudW1iZXIsIGNvbHM6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IEZsb2F0MzJBcnJheShyb3dzICogY29scylcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3M7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2xzOyBqKyspIHtcbiAgICAgICAgbGV0IHN1bSA9IDBcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2xzOyBrKyspIHtcbiAgICAgICAgICBzdW0gKz0gYVtpICogY29scyArIGtdICogYltrICogY29scyArIGpdXG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0W2kgKiBjb2xzICsgal0gPSBzdW1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgV0FTTSBtYXRyaXggbXVsdGlwbGljYXRpb25cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2FsbFdBU01NYXRyaXhNdWx0aXBseShcbiAgICBtb2R1bGU6IFdlYkFzc2VtYmx5LldlYkFzc2VtYmx5SW5zdGFudGlhdGVkU291cmNlLFxuICAgIGE6IEZsb2F0MzJBcnJheSxcbiAgICBiOiBGbG9hdDMyQXJyYXksXG4gICAgcm93czogbnVtYmVyLFxuICAgIGNvbHM6IG51bWJlclxuICApOiBQcm9taXNlPEZsb2F0MzJBcnJheT4ge1xuICAgIC8vIFNpbXBsaWZpZWQgV0FTTSBjYWxsIC0gaW4gcmVhbGl0eSB0aGlzIHdvdWxkIHVzZSB0aGUgYWN0dWFsIFdBU00gZXhwb3J0c1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBGbG9hdDMyQXJyYXkocm93cyAqIGNvbHMpXG4gICAgXG4gICAgLy8gU2ltdWxhdGUgV0FTTSBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudFxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxKSlcbiAgICBcbiAgICByZXR1cm4gdGhpcy5mYWxsYmFja01hdHJpeE11bHRpcGx5KGEsIGIsIHJvd3MsIGNvbHMpXG4gIH1cblxuICAvKipcbiAgICogR2V0IG1lbW9yeSBmcm9tIHBvb2xcbiAgICovXG4gIGdldFBvb2xlZE1lbW9yeShzaXplOiBudW1iZXIpOiBBcnJheUJ1ZmZlciB8IG51bGwge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlTWVtb3J5UG9vbGluZykgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHBvb2xLZXkgPSBgcG9vbF8ke3NpemV9YFxuICAgIHJldHVybiB0aGlzLm1lbW9yeVBvb2wuZ2V0KHBvb2xLZXkpIHx8IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpbWl6ZSBhZ2VudCBzcGF3bmluZ1xuICAgKi9cbiAgYXN5bmMgb3B0aW1pemVBZ2VudFNwYXduaW5nKGFnZW50Q29uZmlnOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgXG4gICAgLy8gUHJlLWFsbG9jYXRlIG1lbW9yeSBmcm9tIHBvb2xcbiAgICBjb25zdCBtZW1vcnlTaXplID0gdGhpcy5jb25maWcubWF4TWVtb3J5UGVyQWdlbnRcbiAgICBjb25zdCBtZW1vcnkgPSB0aGlzLmdldFBvb2xlZE1lbW9yeShtZW1vcnlTaXplKSB8fCBuZXcgQXJyYXlCdWZmZXIobWVtb3J5U2l6ZSlcbiAgICBcbiAgICAvLyBDcmVhdGUgb3B0aW1pemVkIGFnZW50IGNvbmZpZ3VyYXRpb25cbiAgICBjb25zdCBvcHRpbWl6ZWRBZ2VudCA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlT3B0aW1pemVkSWQoKSxcbiAgICAgIGNvbmZpZzogYWdlbnRDb25maWcsXG4gICAgICBtZW1vcnksXG4gICAgICBjcmVhdGVkOiBEYXRlLm5vdygpLFxuICAgICAgb3B0aW1pemVkOiB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgIHRoaXMubWV0cmljcy5hZ2VudFNwYXduVGltZSA9IGR1cmF0aW9uXG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfpJYgQWdlbnQgc3Bhd25lZCBpbiAke2R1cmF0aW9uLnRvRml4ZWQoMil9bXNgKVxuICAgIFxuICAgIHJldHVybiBvcHRpbWl6ZWRBZ2VudFxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG9wdGltaXplZCBJRFxuICAgKi9cbiAgcHJvdGVjdGVkIGdlbmVyYXRlT3B0aW1pemVkSWQoKTogc3RyaW5nIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpLnRvU3RyaW5nKDM2KVxuICAgIGNvbnN0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA1KVxuICAgIHJldHVybiBgJHt0aW1lc3RhbXB9JHtyYW5kb219YFxuICB9XG5cbiAgLyoqXG4gICAqIEJhdGNoIG5ldXJhbCBpbmZlcmVuY2VcbiAgICovXG4gIGFzeW5jIGJhdGNoTmV1cmFsSW5mZXJlbmNlKGlucHV0czogRmxvYXQzMkFycmF5W10sIG1vZGVsOiBhbnkpOiBQcm9taXNlPEZsb2F0MzJBcnJheVtdPiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBcbiAgICAvLyBQcm9jZXNzIGlucHV0cyBpbiBiYXRjaGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICBjb25zdCBiYXRjaFNpemUgPSB0aGlzLmNvbmZpZy5iYXRjaFNpemVcbiAgICBjb25zdCByZXN1bHRzOiBGbG9hdDMyQXJyYXlbXSA9IFtdXG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgY29uc3QgYmF0Y2ggPSBpbnB1dHMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSlcbiAgICAgIGNvbnN0IGJhdGNoUmVzdWx0cyA9IGF3YWl0IHRoaXMucHJvY2Vzc0JhdGNoKGJhdGNoLCBtb2RlbClcbiAgICAgIHJlc3VsdHMucHVzaCguLi5iYXRjaFJlc3VsdHMpXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICB0aGlzLm1ldHJpY3MubmV1cmFsSW5mZXJlbmNlVGltZSA9IGR1cmF0aW9uXG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfp6AgTmV1cmFsIGluZmVyZW5jZSBjb21wbGV0ZWQgaW4gJHtkdXJhdGlvbi50b0ZpeGVkKDIpfW1zIGZvciAke2lucHV0cy5sZW5ndGh9IGlucHV0c2ApXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGJhdGNoIG9mIG5ldXJhbCBpbnB1dHNcbiAgICovXG4gIHByb3RlY3RlZCBhc3luYyBwcm9jZXNzQmF0Y2goYmF0Y2g6IEZsb2F0MzJBcnJheVtdLCBtb2RlbDogYW55KTogUHJvbWlzZTxGbG9hdDMyQXJyYXlbXT4ge1xuICAgIC8vIFNpbXVsYXRlIG5ldXJhbCBwcm9jZXNzaW5nIHdpdGggbWF0cml4IG9wZXJhdGlvbnNcbiAgICBjb25zdCByZXN1bHRzOiBGbG9hdDMyQXJyYXlbXSA9IFtdXG4gICAgXG4gICAgZm9yIChjb25zdCBpbnB1dCBvZiBiYXRjaCkge1xuICAgICAgLy8gVXNlIG9wdGltaXplZCBtYXRyaXggbXVsdGlwbGljYXRpb25cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMub3B0aW1pemVkTWF0cml4TXVsdGlwbHkoXG4gICAgICAgIGlucHV0LFxuICAgICAgICBuZXcgRmxvYXQzMkFycmF5KGlucHV0Lmxlbmd0aCksXG4gICAgICAgIDEsXG4gICAgICAgIGlucHV0Lmxlbmd0aFxuICAgICAgKVxuICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdClcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBNb25pdG9yIHBlcmZvcm1hbmNlIGNvbnRpbnVvdXNseVxuICAgKi9cbiAgc3RhcnRQZXJmb3JtYW5jZU1vbml0b3JpbmcoKTogdm9pZCB7XG4gICAgY29uc3QgbW9uaXRvckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jb2xsZWN0TWV0cmljcygpXG4gICAgICB0aGlzLmFuYWx5emVQZXJmb3JtYW5jZSgpXG4gICAgfSwgMTAwMClcblxuICAgIC8vIFN0b3JlIGludGVydmFsIHJlZmVyZW5jZSBmb3IgY2xlYW51cFxuICAgIDsodGhpcyBhcyBhbnkpLm1vbml0b3JJbnRlcnZhbCA9IG1vbml0b3JJbnRlcnZhbFxuICB9XG5cbiAgLyoqXG4gICAqIENvbGxlY3QgY3VycmVudCBtZXRyaWNzXG4gICAqL1xuICBwcml2YXRlIGNvbGxlY3RNZXRyaWNzKCk6IHZvaWQge1xuICAgIGNvbnN0IG1lbW9yeUluZm8gPSAocGVyZm9ybWFuY2UgYXMgYW55KS5tZW1vcnlcbiAgICBpZiAobWVtb3J5SW5mbykge1xuICAgICAgdGhpcy5tZXRyaWNzLm1lbW9yeVVzYWdlID0gbWVtb3J5SW5mby51c2VkSlNIZWFwU2l6ZVxuICAgIH1cblxuICAgIC8vIFN0b3JlIG1ldHJpY3MgaGlzdG9yeVxuICAgIHRoaXMubWV0cmljc0hpc3RvcnkucHVzaCh7IC4uLnRoaXMubWV0cmljcyB9KVxuICAgIFxuICAgIC8vIEtlZXAgb25seSBsYXN0IDEwMCBtZXRyaWNzXG4gICAgaWYgKHRoaXMubWV0cmljc0hpc3RvcnkubGVuZ3RoID4gMTAwKSB7XG4gICAgICB0aGlzLm1ldHJpY3NIaXN0b3J5LnNoaWZ0KClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBwZXJmb3JtYW5jZSBhbmQgc3VnZ2VzdCBvcHRpbWl6YXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVQZXJmb3JtYW5jZSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IG1lbW9yeVVzYWdlLCByZW5kZXJUaW1lLCBuZXVyYWxJbmZlcmVuY2VUaW1lIH0gPSB0aGlzLm1ldHJpY3NcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcGVyZm9ybWFuY2UgaXNzdWVzXG4gICAgaWYgKG1lbW9yeVVzYWdlID4gdGhpcy5jb25maWcubWF4TWVtb3J5UGVyQWdlbnQgKiAxMCkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gSGlnaCBtZW1vcnkgdXNhZ2UgZGV0ZWN0ZWQnKVxuICAgIH1cbiAgICBcbiAgICBpZiAocmVuZGVyVGltZSA+IHRoaXMuY29uZmlnLnRhcmdldEZyYW1lVGltZSkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRnJhbWUgdGltZSBleGNlZWRpbmcgdGFyZ2V0JylcbiAgICB9XG4gICAgXG4gICAgaWYgKG5ldXJhbEluZmVyZW5jZVRpbWUgPiAxMDApIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIE5ldXJhbCBpbmZlcmVuY2UgdGltZSBoaWdoJylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUnVuIGNvbXByZWhlbnNpdmUgcGVyZm9ybWFuY2UgYmVuY2htYXJrc1xuICAgKi9cbiAgYXN5bmMgcnVuQmVuY2htYXJrcygpOiBQcm9taXNlPEJlbmNobWFya1Jlc3VsdFtdPiB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gUnVubmluZyBwZXJmb3JtYW5jZSBiZW5jaG1hcmtzLi4uJylcbiAgICBcbiAgICBjb25zdCByZXN1bHRzOiBCZW5jaG1hcmtSZXN1bHRbXSA9IFtdXG4gICAgXG4gICAgLy8gQmVuY2htYXJrIFdBU00gbG9hZGluZ1xuICAgIHJlc3VsdHMucHVzaChhd2FpdCB0aGlzLmJlbmNobWFya1dBU01Mb2FkaW5nKCkpXG4gICAgXG4gICAgLy8gQmVuY2htYXJrIFNJTUQgb3BlcmF0aW9uc1xuICAgIHJlc3VsdHMucHVzaChhd2FpdCB0aGlzLmJlbmNobWFya1NJTURPcGVyYXRpb25zKCkpXG4gICAgXG4gICAgLy8gQmVuY2htYXJrIG1lbW9yeSBvcGVyYXRpb25zXG4gICAgcmVzdWx0cy5wdXNoKGF3YWl0IHRoaXMuYmVuY2htYXJrTWVtb3J5T3BlcmF0aW9ucygpKVxuICAgIFxuICAgIC8vIEJlbmNobWFyayBuZXVyYWwgaW5mZXJlbmNlXG4gICAgcmVzdWx0cy5wdXNoKGF3YWl0IHRoaXMuYmVuY2htYXJrTmV1cmFsSW5mZXJlbmNlKCkpXG4gICAgXG4gICAgY29uc29sZS5sb2coJ/Cfk4ogQmVuY2htYXJrIHJlc3VsdHM6JylcbiAgICByZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3VsdC5zdGF0dXMgPT09ICdwYXNzJyA/ICfinIUnIDogcmVzdWx0LnN0YXR1cyA9PT0gJ2ZhaWwnID8gJ+KdjCcgOiAn4pqg77iPJ1xuICAgICAgY29uc29sZS5sb2coYCAgJHtzdGF0dXN9ICR7cmVzdWx0LnRlc3ROYW1lfTogJHtyZXN1bHQuaW1wcm92ZW1lbnQudG9GaXhlZCgxKX0lIGltcHJvdmVtZW50YClcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICAvKipcbiAgICogQmVuY2htYXJrIFdBU00gbG9hZGluZ1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBiZW5jaG1hcmtXQVNNTG9hZGluZygpOiBQcm9taXNlPEJlbmNobWFya1Jlc3VsdD4ge1xuICAgIGNvbnN0IGl0ZXJhdGlvbnMgPSAxMFxuICAgIGNvbnN0IHRlc3RNb2R1bGUgPSAncnV2X3N3YXJtX3dhc21fYmcud2FzbSdcbiAgICBcbiAgICAvLyBNZWFzdXJlIHdpdGhvdXQgY2FjaGluZ1xuICAgIGNvbnN0IHN0YXJ0VGltZVVuY2FjaGVkID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgLy8gU2ltdWxhdGUgdW5jYWNoZWQgbG9hZGluZ1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKSlcbiAgICB9XG4gICAgY29uc3QgdW5jYWNoZWRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVVbmNhY2hlZFxuICAgIFxuICAgIC8vIE1lYXN1cmUgd2l0aCBjYWNoaW5nXG4gICAgY29uc3Qgc3RhcnRUaW1lQ2FjaGVkID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgLy8gU2ltdWxhdGUgY2FjaGVkIGxvYWRpbmdcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1KSlcbiAgICB9XG4gICAgY29uc3QgY2FjaGVkVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lQ2FjaGVkXG4gICAgXG4gICAgY29uc3QgaW1wcm92ZW1lbnQgPSAoKHVuY2FjaGVkVGltZSAtIGNhY2hlZFRpbWUpIC8gdW5jYWNoZWRUaW1lKSAqIDEwMFxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0ZXN0TmFtZTogJ1dBU00gTG9hZGluZycsXG4gICAgICBiZWZvcmVNczogdW5jYWNoZWRUaW1lLFxuICAgICAgYWZ0ZXJNczogY2FjaGVkVGltZSxcbiAgICAgIGltcHJvdmVtZW50LFxuICAgICAgc3RhdHVzOiBpbXByb3ZlbWVudCA+IDUwID8gJ3Bhc3MnIDogaW1wcm92ZW1lbnQgPiAyMCA/ICd3YXJuaW5nJyA6ICdmYWlsJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCZW5jaG1hcmsgU0lNRCBvcGVyYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGJlbmNobWFya1NJTURPcGVyYXRpb25zKCk6IFByb21pc2U8QmVuY2htYXJrUmVzdWx0PiB7XG4gICAgY29uc3Qgc2l6ZSA9IDEwMDBcbiAgICBjb25zdCBhID0gbmV3IEZsb2F0MzJBcnJheShzaXplICogc2l6ZSlcbiAgICBjb25zdCBiID0gbmV3IEZsb2F0MzJBcnJheShzaXplICogc2l6ZSlcbiAgICBcbiAgICAvLyBGaWxsIHdpdGggcmFuZG9tIGRhdGFcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFbaV0gPSBNYXRoLnJhbmRvbSgpXG4gICAgICBiW2ldID0gTWF0aC5yYW5kb20oKVxuICAgIH1cbiAgICBcbiAgICAvLyBNZWFzdXJlIGZhbGxiYWNrIHBlcmZvcm1hbmNlXG4gICAgY29uc3Qgc3RhcnRUaW1lRmFsbGJhY2sgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIHRoaXMuZmFsbGJhY2tNYXRyaXhNdWx0aXBseShhLCBiLCBzaXplLCBzaXplKVxuICAgIGNvbnN0IGZhbGxiYWNrVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lRmFsbGJhY2tcbiAgICBcbiAgICAvLyBNZWFzdXJlIG9wdGltaXplZCBwZXJmb3JtYW5jZVxuICAgIGNvbnN0IHN0YXJ0VGltZU9wdGltaXplZCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgYXdhaXQgdGhpcy5vcHRpbWl6ZWRNYXRyaXhNdWx0aXBseShhLCBiLCBzaXplLCBzaXplKVxuICAgIGNvbnN0IG9wdGltaXplZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZU9wdGltaXplZFxuICAgIFxuICAgIGNvbnN0IGltcHJvdmVtZW50ID0gKChmYWxsYmFja1RpbWUgLSBvcHRpbWl6ZWRUaW1lKSAvIGZhbGxiYWNrVGltZSkgKiAxMDBcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdGVzdE5hbWU6ICdTSU1EIE1hdHJpeCBPcGVyYXRpb25zJyxcbiAgICAgIGJlZm9yZU1zOiBmYWxsYmFja1RpbWUsXG4gICAgICBhZnRlck1zOiBvcHRpbWl6ZWRUaW1lLFxuICAgICAgaW1wcm92ZW1lbnQsXG4gICAgICBzdGF0dXM6IGltcHJvdmVtZW50ID4gMTAwID8gJ3Bhc3MnIDogaW1wcm92ZW1lbnQgPiA1MCA/ICd3YXJuaW5nJyA6ICdmYWlsJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCZW5jaG1hcmsgbWVtb3J5IG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYmVuY2htYXJrTWVtb3J5T3BlcmF0aW9ucygpOiBQcm9taXNlPEJlbmNobWFya1Jlc3VsdD4ge1xuICAgIGNvbnN0IHNpemUgPSAxMDI0ICogMTAyNCAvLyAxTUJcbiAgICBjb25zdCBpdGVyYXRpb25zID0gMTAwXG4gICAgXG4gICAgLy8gTWVhc3VyZSB3aXRob3V0IHBvb2xpbmdcbiAgICBjb25zdCBzdGFydFRpbWVVbnBvb2xlZCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzaXplKVxuICAgICAgLy8gU2ltdWxhdGUgc29tZSB3b3JrXG4gICAgICBuZXcgVWludDhBcnJheShidWZmZXIpLmZpbGwoaSAlIDI1NilcbiAgICB9XG4gICAgY29uc3QgdW5wb29sZWRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVVbnBvb2xlZFxuICAgIFxuICAgIC8vIE1lYXN1cmUgd2l0aCBwb29saW5nXG4gICAgY29uc3Qgc3RhcnRUaW1lUG9vbGVkID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5nZXRQb29sZWRNZW1vcnkoc2l6ZSkgfHwgbmV3IEFycmF5QnVmZmVyKHNpemUpXG4gICAgICAvLyBTaW11bGF0ZSBzb21lIHdvcmtcbiAgICAgIG5ldyBVaW50OEFycmF5KGJ1ZmZlcikuZmlsbChpICUgMjU2KVxuICAgIH1cbiAgICBjb25zdCBwb29sZWRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVQb29sZWRcbiAgICBcbiAgICBjb25zdCBpbXByb3ZlbWVudCA9ICgodW5wb29sZWRUaW1lIC0gcG9vbGVkVGltZSkgLyB1bnBvb2xlZFRpbWUpICogMTAwXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRlc3ROYW1lOiAnTWVtb3J5IFBvb2xpbmcnLFxuICAgICAgYmVmb3JlTXM6IHVucG9vbGVkVGltZSxcbiAgICAgIGFmdGVyTXM6IHBvb2xlZFRpbWUsXG4gICAgICBpbXByb3ZlbWVudCxcbiAgICAgIHN0YXR1czogaW1wcm92ZW1lbnQgPiAzMCA/ICdwYXNzJyA6IGltcHJvdmVtZW50ID4gMTAgPyAnd2FybmluZycgOiAnZmFpbCdcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmVuY2htYXJrIG5ldXJhbCBpbmZlcmVuY2VcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYmVuY2htYXJrTmV1cmFsSW5mZXJlbmNlKCk6IFByb21pc2U8QmVuY2htYXJrUmVzdWx0PiB7XG4gICAgY29uc3QgaW5wdXRTaXplID0gNzg0XG4gICAgY29uc3QgYmF0Y2hTaXplID0gMzJcbiAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBiYXRjaFNpemUgfSwgKCkgPT4gXG4gICAgICBuZXcgRmxvYXQzMkFycmF5KGlucHV0U2l6ZSkubWFwKCgpID0+IE1hdGgucmFuZG9tKCkpXG4gICAgKVxuICAgIFxuICAgIC8vIE1lYXN1cmUgc2VxdWVudGlhbCBwcm9jZXNzaW5nXG4gICAgY29uc3Qgc3RhcnRUaW1lU2VxdWVudGlhbCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgZm9yIChjb25zdCBpbnB1dCBvZiBpbnB1dHMpIHtcbiAgICAgIGF3YWl0IHRoaXMub3B0aW1pemVkTWF0cml4TXVsdGlwbHkoaW5wdXQsIG5ldyBGbG9hdDMyQXJyYXkoaW5wdXRTaXplKSwgMSwgaW5wdXRTaXplKVxuICAgIH1cbiAgICBjb25zdCBzZXF1ZW50aWFsVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lU2VxdWVudGlhbFxuICAgIFxuICAgIC8vIE1lYXN1cmUgYmF0Y2ggcHJvY2Vzc2luZ1xuICAgIGNvbnN0IHN0YXJ0VGltZUJhdGNoID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBhd2FpdCB0aGlzLmJhdGNoTmV1cmFsSW5mZXJlbmNlKGlucHV0cywge30pXG4gICAgY29uc3QgYmF0Y2hUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVCYXRjaFxuICAgIFxuICAgIGNvbnN0IGltcHJvdmVtZW50ID0gKChzZXF1ZW50aWFsVGltZSAtIGJhdGNoVGltZSkgLyBzZXF1ZW50aWFsVGltZSkgKiAxMDBcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdGVzdE5hbWU6ICdOZXVyYWwgSW5mZXJlbmNlIEJhdGNoaW5nJyxcbiAgICAgIGJlZm9yZU1zOiBzZXF1ZW50aWFsVGltZSxcbiAgICAgIGFmdGVyTXM6IGJhdGNoVGltZSxcbiAgICAgIGltcHJvdmVtZW50LFxuICAgICAgc3RhdHVzOiBpbXByb3ZlbWVudCA+IDI1ID8gJ3Bhc3MnIDogaW1wcm92ZW1lbnQgPiAxMCA/ICd3YXJuaW5nJyA6ICdmYWlsJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGVyZm9ybWFuY2UgcmVwb3J0XG4gICAqL1xuICBnZXRQZXJmb3JtYW5jZVJlcG9ydCgpOiBhbnkge1xuICAgIGNvbnN0IHJlY2VudCA9IHRoaXMubWV0cmljc0hpc3Rvcnkuc2xpY2UoLTEwKVxuICAgIGNvbnN0IGF2Z01ldHJpY3MgPSByZWNlbnQucmVkdWNlKChhY2MsIG1ldHJpY3MpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKG1ldHJpY3MpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgYWNjW2tleV0gPSAoYWNjW2tleV0gfHwgMCkgKyBtZXRyaWNzW2tleSBhcyBrZXlvZiBQZXJmb3JtYW5jZU1ldHJpY3NdXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGFjY1xuICAgIH0sIHt9IGFzIGFueSlcblxuICAgIE9iamVjdC5rZXlzKGF2Z01ldHJpY3MpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGF2Z01ldHJpY3Nba2V5XSAvPSByZWNlbnQubGVuZ3RoXG4gICAgfSlcblxuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50OiB0aGlzLm1ldHJpY3MsXG4gICAgICBhdmVyYWdlOiBhdmdNZXRyaWNzLFxuICAgICAgaGlzdG9yeTogdGhpcy5tZXRyaWNzSGlzdG9yeSxcbiAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICBvcHRpbWl6YXRpb25zOiB7XG4gICAgICAgIHNpbWQ6IHRoaXMuaXNTSU1EU3VwcG9ydGVkKCksXG4gICAgICAgIHdhc21DYWNoaW5nOiB0aGlzLmNvbmZpZy5lbmFibGVXQVNNQ2FjaGluZyxcbiAgICAgICAgbWVtb3J5UG9vbGluZzogdGhpcy5jb25maWcuZW5hYmxlTWVtb3J5UG9vbGluZyxcbiAgICAgICAgZ3B1QWNjZWxlcmF0aW9uOiB0aGlzLmNvbmZpZy5lbmFibGVHUFVBY2NlbGVyYXRpb25cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCByZXNvdXJjZXNcbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgaW50ZXJ2YWxzXG4gICAgaWYgKCh0aGlzIGFzIGFueSkubW9uaXRvckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKCh0aGlzIGFzIGFueSkubW9uaXRvckludGVydmFsKVxuICAgIH1cblxuICAgIC8vIERpc2Nvbm5lY3Qgb2JzZXJ2ZXJzXG4gICAgdGhpcy5vYnNlcnZlcnMuZm9yRWFjaChvYnNlcnZlciA9PiBvYnNlcnZlci5kaXNjb25uZWN0KCkpXG4gICAgdGhpcy5vYnNlcnZlcnMgPSBbXVxuXG4gICAgLy8gQ2xlYXIgY2FjaGVzXG4gICAgdGhpcy53YXNtTW9kdWxlcy5jbGVhcigpXG4gICAgdGhpcy5tZW1vcnlQb29sLmNsZWFyKClcbiAgICB0aGlzLm1ldHJpY3NIaXN0b3J5ID0gW11cblxuICAgIGNvbnNvbGUubG9nKCfwn6e5IFBlcmZvcm1hbmNlT3B0aW1pemVyIGNsZWFudXAgY29tcGxldGVkJylcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQZXJmb3JtYW5jZU9wdGltaXplciJdLCJ2ZXJzaW9uIjozfQ==